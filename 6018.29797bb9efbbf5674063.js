"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6018],{90491:function(e,t,n){n.d(t,{Z:function(){return E}});var a=n(38056),l=(n(95171),n(34234)),i=n(27378),r=n(33996),s=n(56591),c=n(60071),u=n(56552),o=n(14206),m=n.n(o),d=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?n(e.value):l(e.value).then(r,s)}c((a=a.apply(e,t||[])).next())}))};function b(e){return d(this,void 0,void 0,(function*(){try{return(yield m().post("unsubscribe",{email:e})).status}catch(e){throw new Error(e)}}))}const p=(e,t)=>{const{email:n}=t,{t:a}=(0,c.$)(),{mutate:l,isLoading:o}=(0,u.useMutation)(b),{setRequestUpdate:m}=(0,r.xV)();return i.createElement(s.Z,{type:"dashed",onClick:()=>{l(n,{onSuccess:()=>{m(!0)}})},loading:o},a("EmailSubscription.Unsubscribe"))};var h=n(7957);class E{constructor(){this.entity="/subscribe",this.title=[a.ZP.t("EmailSubscription.Title"),a.ZP.t("EmailSubscription.Title",{count:2})],this.apiService=new l.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,i.lazy)((()=>Promise.resolve().then(n.bind(n,98041)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${h.AW.replace("*","")}`}],this.tableColumns=[{key:"email",dataIndex:"email",className:"hasTile",title:a.ZP.t("Global.Email")},{width:200,key:"unsubscribe",dataIndex:"email",className:"hasTile",render:p,title:a.ZP.t("EmailSubscription.Unsubscribe")}]}}},98041:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});n(95171);var a=n(27378),l=n(56552),i=n(33996),r=n(3288),s=n(97851),c=n(60071);var u=({onSubmit:e,isPending:t,initialValues:n})=>{const[l]=r.Z.useForm(),{t:u}=(0,c.$)();return(0,a.useEffect)((()=>{n&&l.setFieldsValue(n)}),[n]),a.createElement(r.Z,{form:l,name:"email-subscription-form",layout:"vertical",onFinish:e},a.createElement(r.Z.Item,{label:u("Global.Email"),name:"email"},a.createElement(s.Z,{placeholder:u("Global.InputPlaceholder",{title:u("Global.Email")}),type:"email"})),a.createElement(i.Ow,{isPending:t}))},o=n(90491);var m=function({onCallback:e,singleData:t}){const n=new o.Z,{mutate:i,isLoading:r}=(0,l.useMutation)((({values:e})=>n.apiService.createOne(e)));return a.createElement(u,{initialValues:t,onSubmit:t=>{i({values:t},{onSuccess:t=>{null==e||e(t)}})},isPending:r})}},36018:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(27378),l=n(96740),i=n(38056),r=n(33996),s=n(90491);function c(){const e=new s.Z;return a.createElement(r.Xg,{module:e},a.createElement(r.Xg.Breadcrumb,null),a.createElement(r.Xg.Panel,null,a.createElement(r.s_.Header,{hasSearch:!0,hasNew:!0,newLink:"upsert",noDescription:!0}),a.createElement(r.s_.ListView,{hasUpdate:!1,module:e,togglers:[{dataIndex:"is_active",url:"active",title:i.ZP.t("Global.IsActive")}]})))}var u=n(53988),o=n(3487),m=n(98041),d=n(7957);var b=()=>{const e=(0,l.s0)(),{email_id:t}=(0,l.UO)(),[n,c]=(0,a.useState)({}),[b,p]=(0,a.useState)(!0),h=new s.Z,E=h.title[0],f=`${d.AW.replace("*","")}`,v=[...h.breadcrumbItems,{path:"",breadcrumbName:t?`${i.ZP.t("Global.Update")} ${E} - ${t}`:`${i.ZP.t("Global.New")} ${E}`}];(0,a.useEffect)((()=>{t?(p(!0),h.apiService.getOne(+t).then((e=>{c(e)})).finally((()=>{p(!1)}))):p(!1)}),[]);return a.createElement(r.Xg,{module:h},a.createElement(r.Xg.Breadcrumb,{routes:v}),a.createElement(r.Xg.Panel,null,a.createElement(o.j,null,a.createElement("div",{className:"header"},a.createElement(u.Z,{onClose:()=>e(`/admin${f}`),items:v})),b?a.createElement(r.aN,null):a.createElement(m.default,{singleData:n,onCallback:()=>{e(-1)}}))))};var p=()=>a.createElement(l.Z5,null,a.createElement(l.AW,{path:"",element:a.createElement(c,null)}),a.createElement(l.AW,{path:"/upsert",element:a.createElement(b,null)}),a.createElement(l.AW,{path:"/upsert/:email_id",element:a.createElement(b,null)}))},3487:function(e,t,n){n.d(t,{j:function(){return a}});const a=n(26761).ZP.div`
  padding: 32px;
  .header {
    padding-bottom: 32px;
    margin-bottom: 32px;
    border-bottom: 1px dashed #ededed;
  }
`},7957:function(e){e.exports=JSON.parse('{"AW":"/emsdsdail/susdsdbscription/*"}')}}]);