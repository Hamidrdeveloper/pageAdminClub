"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9920,8722],{88168:function(e,t,a){var n=a(99386),i=a(76259),r=a(33996),l=a(32383),o=(a(95171),a(3288)),c=a(25724),s=a(35062),u=a(10374),d=a(56591),m=a(27378),p=a(60071),b=a(26761);a(94811);t.Z=function({needAT:e,onSubmit:t,onRemove:a,isPending:b,initialValues:v}){const{t:g}=(0,p.$)(),[E]=o.Z.useForm();return(0,m.useEffect)((()=>{v&&E.setFieldsValue(v)}),[v]),m.createElement(y,null,m.createElement(m.Suspense,{fallback:m.createElement(r.aN,null)},m.createElement(o.Z,{form:E,name:"attribute-options-form",layout:"vertical",onFinish:t},m.createElement(o.Z.Item,{required:!0},m.createElement(r.Es,{inputName:"value"})),m.createElement(o.Z.Item,{label:g("Global.Sort"),name:["sort"],fieldKey:["sort"]},m.createElement(c.Z,{placeholder:g("Global.InputPlaceholder",{title:g("Global.Sort")})})),m.createElement(o.Z.Item,{name:["file_path"],fieldKey:["file_path"],label:g("Availability.Field.File")},m.createElement(r.gq,{form:E})),m.createElement(o.Z.Item,{hidden:!0,name:"file_id",fieldKey:"file_id"}),e&&m.createElement(m.Suspense,{fallback:(0,l.Z)(g("AttributeOptions.AttributeType"))},m.createElement(o.Z.Item,{name:"attributeType",label:g("AttributeOptions.AttributeType")},m.createElement(i.I,{disabled:!!(null==v?void 0:v.attributeType)}))),m.createElement(s.Z,{justify:"end",gutter:[16,16]},m.createElement(u.Z,null,m.createElement(d.Z,{style:{minWidth:180},type:"primary",htmlType:"submit",loading:b},g("Global.Submit"))),!e&&m.createElement(u.Z,null,m.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:m.createElement(n.Z,null),onClick:a}))))))};const y=b.ZP.div`
  border: 1px solid #d9d9d9;
  border-radius: 20px;
  padding: 20px 25px 35px;
  margin-bottom: 40px;
  margin-top: 10px;
`},79213:function(e,t,a){a.d(t,{Z:function(){return o},b:function(){return c}});var n=a(38056),i=(a(95171),a(34234)),r=a(27378),l=(a(52190),a(95699));class o{constructor(){this.entity="/number-series",this.title=[n.ZP.t("NumberSeries.Title"),n.ZP.t("NumberSeries.Title",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,r.lazy)((()=>a.e(5023).then(a.bind(a,25023)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${l.AW.replace("*","")}`}],this.detailColumns=[{key:"name",label:n.ZP.t("NumberSeries.Field.Name")},{key:"active_manual",label:n.ZP.t("NumberSeries.Field.ActiveManual")},{key:"date_order",label:n.ZP.t("NumberSeries.Field.DateOrder")}],this.tableColumns=[{key:"name",width:90,title:n.ZP.t("Global.Name"),className:"hasTile ",dataIndex:"name"},{key:"slug",width:180,title:n.ZP.t("NumberSeries.Field.Type"),dataIndex:["numberSeriesType","slug"]}]}}class c{constructor(){this.entity="/number-series-types",this.title=[n.ZP.t("NumberSeries.Field.Type"),n.ZP.t("NumberSeries.Field.Type",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0])}}},31006:function(e,t,a){a.d(t,{y:function(){return u}});a(52190);var n=a(34234),i=a(60042),r=a.n(i),l=a(27378),o=a(60071),c=a(62500),s=a(79213);var u=function({slug:e,value:t,onChange:a,disabled:i=!1,isPending:u,menuPlacement:d="bottom"}){const{t:m}=(0,o.$)(),p=new s.Z,[b,y]=(0,l.useState)(!1),[v,g]=(0,l.useState)([]);return(0,l.useEffect)((()=>{y(!0),p.apiService.request({url:`number-series-positions/get-by-slug?slug=${e}`,method:"GET"}).then((e=>{g(e)})).finally((()=>y(!1)))}),[]),l.createElement(c.ZP,{isClearable:!0,value:v.find((e=>e.id===t)),isDisabled:i,options:v,menuPlacement:d,onChange:e=>e?null==a?void 0:a(e.id):null==a?void 0:a(void 0),isLoading:null!=u?u:b,getOptionValue:e=>e.id,getOptionLabel:e=>{var t;return`ID: [${null==e?void 0:e.id}]  ${null==e?void 0:e.number_series.name} ${null==e?void 0:e.prefix} ${null==e?void 0:e.starting_number} - ${null!==(t=null==e?void 0:e.ending_number)&&void 0!==t?t:"âˆž"}`},theme:e=>(0,n.$p)(e),classNamePrefix:r()("react-select"),placeholder:m("Global.SelectPlaceholder",{title:m("NumberSeries.Title")})})}},52190:function(e,t,a){a(9378),a(95171)},92493:function(e,t,a){var n=a(33996),i=(a(33699),a(27378)),r=(a(66719),a(98720));t.Z=e=>i.createElement(n.LE,Object.assign({searchParam:"search",module:new r.Z,orderBy:{"translations.name":"ASC"},optionSelector:{label:"name",value:"id"}},e))},1739:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(38056),i=(a(95171),a(34234)),r=a(27378),l=a(50644),o=(a(14089),a(50034));class c{constructor(){this.entity="/products",this.title=[n.ZP.t("Product.Title"),n.ZP.t("Product.Title",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,r.lazy)((()=>Promise.resolve().then(a.bind(a,61261)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${o.AW.replace("*","")}`}],this.detailColumns=[{key:"file",label:n.ZP.t("Product.Field.Image"),render:l.np},{key:"name",label:n.ZP.t("Global.Name")},{key:"number",label:n.ZP.t("Global.Number")},{key:"maximum_sale_for_each_user",label:n.ZP.t("Product.Field.MaxSaleForEachUser")},{key:"default_vat",label:n.ZP.t("Product.Field.DefaultVat")},{key:"interval_order_quantity",label:n.ZP.t("Product.Field.IntervalOrderQuantity")},{key:"max_order_quantity",label:n.ZP.t("Product.Field.MaxOrderQuantity")},{key:"release_date",render:l.WN,label:n.ZP.t("Product.Field.ReleaseDate")},{key:"available_until",render:l.WN,label:n.ZP.t("Product.Field.AvailableUntil")},{key:"price_visible",label:n.ZP.t("Product.Field.PriceVisible")},{key:"auto_active_net_stock",label:n.ZP.t("Product.Field.AutoActiveNetStock")},{key:"auto_deactive_net_stock",label:n.ZP.t("Product.Field.AutoDeactiveNetStock")}],this.tableColumns=[{key:"name",title:n.ZP.t("Global.Name"),dataIndex:"name",width:250,className:"hasTile"},{width:50,key:"file",dataIndex:"file",className:"hasTile mainImage",render:l.zg,title:n.ZP.t("Product.Field.Image")},{sorter:!0,key:"number",title:n.ZP.t("Global.Number"),dataIndex:"number",className:"hasTile",width:100},{className:"hasTile",render:l.w7,key:"min_order_quantity",dataIndex:"min_order_quantity",title:n.ZP.t("Product.Field.MinOrderQuantity")},{className:"hasTile",render:l.w7,key:"max_order_quantity",dataIndex:"max_order_quantity",title:n.ZP.t("Product.Field.MaxOrderQuantity")},{render:l.JK,className:"hasTile",key:"available_until",dataIndex:"available_until",title:n.ZP.t("Product.Field.AvailableUntil")},{key:"release_date",render:l.JK,className:"hasTile",dataIndex:"release_date",title:n.ZP.t("Product.Field.ReleaseDate")}]}}},61261:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});a(95171);var n=a(12606),i=a(27378),r=a(60071),l=a(56552),o=a(31006),c=a(33996),s=a(31675),u=a(3288),d=a(10374),m=a(35062),p=a(97851),b=a(25724),y=a(28681),v=a(48158),g=a(61320),E=a.n(g),P=(a(14089),a(26761));var f={SingleProductRow:(0,P.ZP)(m.Z)`
  padding: 20px;

  &.name-desc-container {
    background-color: #fafafa;
    border-radius: 5px;
    margin: 12px !important;
    border: 1px solid rgba(0, 0, 0, 0.2);
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
  }
`,BoxShadow:P.ZP.div`
  padding: 12px;
  border-radius: 4px;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);

  &.right-side {
    margin-top: 42px;
  }

  & > .ant-form-item {
    margin-bottom: 0;
    padding: 20px;
    :nth-child(even) {
      background-color: #fbfbfb;
    }
    :nth-child(odd) {
      background-color: rgb(242, 242, 242);
    }
  }
`};var h=({onSubmit:e,isPending:t,initialValues:a})=>{const{t:n}=(0,r.$)(),[l]=u.Z.useForm();return(0,i.useEffect)((()=>{a&&l.setFieldsValue(Object.assign(Object.assign({},a),{release_date:a.release_date?E()(a.release_date):null,available_until:a.available_until?E()(a.available_until):null}))}),[a]),i.createElement(u.Z,{form:l,colon:!1,name:"product-form",onFinish:e,labelAlign:"left",layout:"vertical",initialValues:{is_active:!1,price_visible:!0,auto_active_net_stock:!1,auto_deactive_net_stock:!1,translate:[{locale:void 0,name:"",description:""}]}},i.createElement(f.SingleProductRow,{gutter:[16,16]},i.createElement(d.Z,{span:12},i.createElement("h2",null,n("Product.ProductImage")),i.createElement(m.Z,{align:"middle"},i.createElement(d.Z,{flex:1},i.createElement(u.Z.Item,{name:"file",style:{marginBottom:12}},i.createElement(c.gq,{type:"dragger",form:l})),i.createElement(u.Z.Item,{hidden:!0,name:"file_id"},i.createElement(i.Fragment,null)))),i.createElement(f.BoxShadow,null,i.createElement("h2",null,n("Product.BasicSetting")),i.createElement(u.Z.Item,{name:"number",label:n("Global.Number")},i.createElement(p.Z,{placeholder:n("Global.InputPlaceholder",{title:n("Global.Number")})})),!a&&i.createElement(u.Z.Item,{name:"number_series_position_id",label:n("Product.Field.NumberSeries")},i.createElement(o.y,{slug:"product"})),i.createElement(u.Z.Item,{name:"default_vat",label:n("Product.Field.DefaultVat"),rules:[{required:!0}]},i.createElement(b.Z,{min:0,max:100,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.DefaultVat")})})),i.createElement(u.Z.Item,{label:n("Product.Field.Sort"),name:"sort"},i.createElement(b.Z,{min:0,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.Sort")})})))),i.createElement(d.Z,{span:12},i.createElement(f.BoxShadow,{className:"right-side"},i.createElement(u.Z.Item,{name:"max_order_quantity",label:n("Product.Field.MaxOrderQuantity")},i.createElement(b.Z,{min:1,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.MaxOrderQuantity")})})),i.createElement(u.Z.Item,{name:"min_order_quantity",label:n("Product.Field.MinOrderQuantity")},i.createElement(b.Z,{min:1,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.MinOrderQuantity")})})),i.createElement(u.Z.Item,{name:"maximum_sale_for_each_user",label:n("Product.Field.MaxSaleForEachUser")},i.createElement(b.Z,{min:1,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.MaxSaleForEachUser")})})),i.createElement(u.Z.Item,{label:n("Product.Field.ReleaseDate"),name:"release_date"},i.createElement(y.Z,{format:(0,s._A)(),placeholder:n("Product.Field.ReleaseDate")})),i.createElement(u.Z.Item,{name:"available_until",label:n("Product.Field.AvailableUntil")},i.createElement(y.Z,{format:(0,s._A)(),placeholder:n("Product.Field.AvailableUntil")})),i.createElement(u.Z.Item,{label:n("Product.Field.IntervalOrderQuantity"),name:"interval_order_quantity"},i.createElement(b.Z,{min:1,placeholder:n("Global.InputPlaceholder",{title:n("Product.Field.IntervalOrderQuantity")})}))))),i.createElement(m.Z,{gutter:[16,16],align:"middle",style:{padding:"16px 24px"}},i.createElement(d.Z,null,i.createElement(u.Z.Item,{name:"is_active",valuePropName:"checked"},i.createElement(v.Z,null,n("Global.IsActive")))),i.createElement(d.Z,null,i.createElement(u.Z.Item,{name:"price_visible",valuePropName:"checked"},i.createElement(v.Z,null,n("Product.Field.PriceVisible"))))),i.createElement("div",{style:{padding:"0 16px"}},i.createElement(c.jh,{isDescriptionRequired:!0})),i.createElement(c.Ow,{isPending:t,title:n(a?"Global.SaveChanges":"Global.Submit")}))},Z=a(1739),_=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var V=({onCallback:e,singleData:t})=>{const a=new Z.Z,{mutate:o,isLoading:c}=(0,l.useMutation)((({id:e,values:t})=>e?a.apiService.updateOne(e,t):a.apiService.createOne(t))),{t:s}=(0,r.$)();return i.createElement(h,{initialValues:t,onSubmit:a=>{const{productCategories:i,file:r,file_id:l}=a,c=_(a,["productCategories","file","file_id"]);if(r||l)if(c.min_order_quantity&&c.max_order_quantity&&Number(c.min_order_quantity)>Number(c.max_order_quantity))n.Z.error({message:s("Product.Error"),description:s("Product.MinOrderQuantity")});else{const a=Object.assign(Object.assign({},c),{file:r,file_id:l,product_category_ids:null==i?void 0:i.map((e=>e.id))});o({id:t?t.id:void 0,values:a},{onSuccess:e})}else n.Z.error({message:s("Product.RequiredFile"),description:s("Product.RequiredFileDescription")})},isPending:c})}},79920:function(e,t,a){a.r(t),a.d(t,{default:function(){return va}});var n=a(27378),i=a(96740),r=a(33996),l=(a(14089),a(1739));function o(){const e=new l.Z;return n.createElement(r.Xg,{module:e},n.createElement(r.Xg.Breadcrumb,null),n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasNew:!0,hasSearch:!0,newLink:"manage"}),n.createElement(r.s_.ListView,{hasActive:!0,updateLink:"manage",module:e,tableScroll:{y:640,x:1300}})))}var c=a(50836),s=a(60071),u=a(61261),d=a(56591),m=a(38056),p=(a(95171),a(34234)),b=a(30433);class y{constructor(e){this.title=[m.ZP.t("Product.Variation.Title"),m.ZP.t("Product.Variation.Title",{count:2})],this.breadcrumbItems=[],this.detailColumns=[{key:"name",label:m.ZP.t("Global.Name")}],this.tableColumns=[{width:140,key:"number",dataIndex:"number",className:"number hasTile",title:m.ZP.t("Product.Variation.Field.Number")},{width:250,key:"name",dataIndex:"name",className:"hasTile",ellipsis:{showTitle:!1},render:b.yL,title:m.ZP.t("Global.Name")},{width:120,key:"type",dataIndex:"type",className:"hasTile",title:m.ZP.t("Global.Type")},{width:100,key:"quantity",dataIndex:"quantity",className:"number hasTile",title:m.ZP.t("Product.Variation.Field.Quantity")},{width:100,key:"point",dataIndex:"point",render:b.nW,className:"number hasTile",title:m.ZP.t("Product.Variation.Field.Point")},{width:170,key:"release_date",className:"hasTile",render:b.JK,dataIndex:"release_date",title:m.ZP.t("Product.Variation.Field.ReleaseDate")},{width:150,className:"hasTile",render:b.JK,key:"available_until",dataIndex:"available_until",title:m.ZP.t("Product.Variation.Field.AvailableUntil")}],e&&(this.entity=`/product-variations?productId=${e}`,this.apiService=new p.Vx(this.entity,this.title[0]))}}var v=a(21329),g=a(56552),E=a(21244),P=a(99386),f=a(76259),h=a(49989),Z=a(48955),_=a(22501),V=a(62500),k=(a(94811),a(88168));var S=({onCallback:e,singleData:t})=>{const{t:a}=(0,s.$)(),i=new p.Vx("attribute-type-options",a("AttributeOptions.Title")),{mutate:r,isLoading:l}=(0,g.useMutation)((({id:e,values:t})=>e?i.updateOne(e,t):i.createOne(t)));return n.createElement(k.Z,{needAT:!0,initialValues:t,onSubmit:a=>{const{attributeType:n,translate:i,sort:l,file_id:o}=a,c={sort:null!=l?l:void 0,file_id:null!=o?o:void 0,attribute_type_id:null==n?void 0:n.id,translate:(0,p.mj)(i)};r({id:t?t.id:void 0,values:c},{onSuccess:e})},isPending:l})};var x=function({AT:e,name:t,value:a,onChange:i,maxHeight:r,refetchFn:l,hasNew:o=!0,ATOptions:c,isMulti:s=!1,disabled:u=!1,menuPlacement:d="bottom",placeholder:b=_.ZP.t("Global.SelectPlaceholder",{title:m.ZP.t("AttributeOptions.Title")})}){const[y,v]=(0,n.useState)(c),[g,E]=(0,n.useState)(!1);(0,n.useEffect)((()=>{v(c)}),[c]);const P=e=>null==i?void 0:i(e);return n.createElement(n.Fragment,null,n.createElement(V.ZP,{isClearable:!0,isMulti:s,options:y,isDisabled:u,onChange:P,placeholder:b,maxMenuHeight:r,menuPlacement:d,menuPortalTarget:document.body,getOptionLabel:e=>null==e?void 0:e.value,getOptionValue:e=>String(null==e?void 0:e.id),styles:{menuPortal:e=>Object.assign(Object.assign({},e),{zIndex:9999})},components:{Menu:e=>(0,h.S)({hasNew:o,props:e,onClick:()=>E(!0)}),IndicatorSeparator:()=>n.createElement("span",{style:{width:0}})},theme:e=>(0,p.$p)(e),classNamePrefix:"react-select",value:a}),n.createElement(Z.Z,{isVisible:g,setVisible:E,title:"AttributeOptions.Title"},n.createElement(S,{onCallback:e=>{var n;Array.isArray(a)?P([...a,e]):P(s?[e]:e),(null==y?void 0:y.length)&&(null==l||l(null===(n=y[0])||void 0===n?void 0:n.attribute_type_id,t)),E(!1)},singleData:{attributeType:e}})))},O=a(87216),F=a(3288),T=a(97851),I=a(48158),w=a(72961),C=a(26761);var N={InputContainer:C.ZP.div`
  gap: 8px;
  display: flex;

  &:not(:last-child) {
    margin-bottom: 16px;
  }

  & span[role='img'].icon {
    font-size: 16px;
    color: rgb(24, 144, 255);
  }
`},j=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const M=new O.Z;var q=({disabled:e=!1,name:t="attributes",haveVisibleField:a=!0,multiOptions:i=!1,attributeTypeName:r="attributeType",attributeOptionName:l="attributeTypeOption",initialValues:o,form:c})=>{const[s,u]=(0,n.useState)({version:.1,data:[]}),p=(e,t)=>{(e=>M.apiService.getOne(e))(e).then((e=>{const a=null==e?void 0:e.attributeTypeOptions;u((({data:n})=>{const i={options:a,type:e};return n[t]=i,{version:Math.random(),data:n}}))}))},b=e=>{(e=>{if(Array.isArray(t))return;const a=null==c?void 0:c.getFieldsValue(),n=a[t][e];a[t][e]=Object.assign(Object.assign({},n),{[l]:i?[]:{}});const r=Object.assign({},a);null==c||c.setFieldsValue(r)})(e),u((({data:t})=>(t[e]={options:[],type:{}},{version:Math.random(),data:t})))};(0,n.useEffect)((()=>{o&&o.forEach(((e,t)=>{var a;const n=null===(a=null==e?void 0:e.attributeType)||void 0===a?void 0:a.id;p(n,t)}))}),[o]);const y=(e,t)=>{if(b(t),!e)return;const a=e.id;p(a,t)},v=(e,t)=>{u((({data:e})=>(e.splice(t,1),{version:Math.random(),data:e}))),e(t)};return n.createElement(F.Z.List,{name:t},((t,{add:o,remove:c})=>n.createElement(n.Fragment,null,t.map(((u,b)=>{var g,h,Z,_,{key:V,name:k,fieldKey:S}=u,O=j(u,["key","name","fieldKey"]);return n.createElement(N.InputContainer,{key:V},n.createElement(T.Z.Group,{style:{display:"flex",flex:1,gap:"12px"}},n.createElement(F.Z.Item,Object.assign({},O,{style:{flexGrow:1},required:!0,name:[k,r],fieldKey:[S,r],rules:[{required:!0,message:`Item ${k+1} Attribute Type is required`}]}),n.createElement(f.I,{onChange:e=>y(e,k)})),n.createElement(F.Z.Item,Object.assign({},O,{style:{flexGrow:3},required:!0,name:[k,l],fieldKey:[S,l],rules:[{required:!0,message:`Item ${k+1} ${l} is required`}]}),n.createElement(x,{isMulti:i,name:k,AT:null===(h=null===(g=null==s?void 0:s.data)||void 0===g?void 0:g[k])||void 0===h?void 0:h.type,refetchFn:p,ATOptions:null===(_=null===(Z=null==s?void 0:s.data)||void 0===Z?void 0:Z[k])||void 0===_?void 0:_.options})),a&&n.createElement(F.Z.Item,Object.assign({},O,{name:[k,"visible"],required:!0,fieldKey:[S,"visible"],valuePropName:"checked"}),n.createElement(I.Z,null,m.ZP.t("Global.IsVisible")))),!e&&n.createElement("div",null,b===t.length-1?n.createElement(w.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",icon:n.createElement(E.Z,null),onClick:()=>o(null,t.length)}),t.length>1&&n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(P.Z,null),onClick:()=>v(c,k)})):n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(P.Z,null),onClick:()=>v(c,k)})))})))))},A=a(6004);var L=({onSubmit:e,isPending:t})=>{const[a]=(0,A.cI)(),{t:i}=(0,s.$)();return(0,n.useEffect)((()=>{a.setFieldsValue({attributes:[{}]})}),[]),n.createElement(F.Z,{form:a,layout:"vertical",onFinish:e},n.createElement(n.Suspense,{fallback:n.createElement(r.aN,{title:i("Product.Variation.LoadingAutoGenerating")})},n.createElement(F.Z.Item,null,n.createElement(q,{haveVisibleField:!1,multiOptions:!0,form:a}))),n.createElement(r.Ow,{isPending:t}))};var G=({onCallback:e})=>{const{product_id:t}=(0,i.UO)(),{mutate:a,isLoading:r}=(0,g.useMutation)((({id:e,values:t})=>((e,t)=>{const a=new p.Vx(`products/${e}/auto-generate-variation`,"Auto Generate Variation");try{return a.createOne(t)}catch(e){throw new Error(e)}})(e,t)));return n.createElement(L,{onSubmit:n=>{if(!t)return;const{attributes:i}=n,r={attributeTypeOptions:null==i?void 0:i.map((e=>{var t;return null===(t=e.attributeTypeOption)||void 0===t?void 0:t.map((e=>null==e?void 0:e.id))}))};a({id:t,values:r},{onSuccess:e})},isPending:r})};var K=function({isVisible:e,setVisible:t}){const{t:a}=(0,s.$)(),i=()=>{t(!1)},l=a("Global.CreateTitle",{title:a("Product.Variation.Title")});return n.createElement(v.Z,{width:1300,footer:!1,destroyOnClose:!0,closable:!1,visible:e,onCancel:i,title:n.createElement(r.xB,{onClose:i,items:[{path:"",breadcrumbName:l}]})},n.createElement(n.Suspense,{fallback:n.createElement("p",null,a("Product.Variation.LoadingUpsertModule"))},n.createElement(G,{onCallback:()=>t(!1)})))};function D({onNew:e,onUpdate:t,productId:a}){const[i,l]=(0,n.useState)(!1),o=new y(a),{t:c}=(0,s.$)();return n.createElement(r.Xg,{module:o},n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasNew:!0,hasSearch:!0,onNew:e,ExtraAction:()=>n.createElement(d.Z,{type:"primary",onClick:()=>l(!0)},c("Product.Variation.AutoGenerateVariation"))}),n.createElement(r.s_.ListView,{hasActive:!0,hasUpdate:!1,onUpdate:t,module:o,tableScroll:{x:1320,y:700}})),n.createElement(K,{setVisible:l,isVisible:i}))}var $={TabsContainer:C.ZP.div`
  padding: 20px;

  & .product-tabs {
    overflow: initial !important;

    & .ant-tabs-nav::before {
      border: none;
    }

    & .single-tab {
      &.ant-tabs-tab {
        background: #fff;
        border-radius: 4px;
      }

      &.ant-tabs-tab-active {
        background: #009ddc;
        border-radius: 4px;

        & .anticon-close {
          color: #fff;
        }

        & .ant-tabs-tab-btn {
          color: #fff !important;
        }
      }
    }
  }
`},U=a(70898),Q=a(11970),R=a(95964),B=a(39338),H=a(96188),W=a(6110),z=a(35062),X=a(10374),J=a(26490),Y=a(55241),ee=a(98809),te=a(41156),ae=a(32383),ne=a(25724);var ie=function({onSubmit:e,onRemove:t,isPending:a,initialValues:i}){const{t:r}=(0,s.$)(),[l]=F.Z.useForm();(0,n.useEffect)((()=>{if(!i)return;const e=i.provision_price*(i.percentage_of_provision/100);l.setFieldsValue(Object.assign(Object.assign({},i),{effective_provision_price:e}))}),[i]);const o=({provisionPrice:e,effectivePrice:t,percentageOfProvision:a})=>{const n=l.getFieldsValue(),i=null==n?void 0:n.percentage_of_provision;e?(e=>{const t=e*(i/100);l.setFieldsValue(Object.assign(Object.assign({},n),{effective_provision_price:t}))})(e):t?(e=>{const t=100*e/i;l.setFieldsValue(Object.assign(Object.assign({},n),{provision_price:t}))})(t):a&&(e=>{const t=(null==n?void 0:n.provision_price)*(e/100);l.setFieldsValue(Object.assign(Object.assign({},n),{effective_provision_price:t}))})(a)};return n.createElement(re,null,n.createElement(F.Z,{form:l,name:"variation-mlm-form",labelAlign:"left",layout:"horizontal",labelCol:{xs:{span:8}},wrapperCol:{xs:{span:16}},onFinish:e},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{xs:24,xl:12},n.createElement(n.Suspense,{fallback:(0,ae.Z)(r("Product.Variation.MLM.Country"))},n.createElement(F.Z.Item,{name:"country",fieldKey:"country",rules:[{required:!0}],label:r("Product.Variation.MLM.Country")},n.createElement(ee.O,null)))),n.createElement(X.Z,{xs:24,xl:12},n.createElement(F.Z.Item,{name:"qv",fieldKey:"qv",label:r("Product.Variation.MLM.QualificationPointsUP")},n.createElement(ne.Z,{precision:2}))),n.createElement(X.Z,{xs:24,xl:12},n.createElement(F.Z.Item,{name:"percentage_of_provision",fieldKey:"percentage_of_provision",label:r("Product.Variation.MLM.PercentageOfProvision")},n.createElement(ne.Z,{className:"full-width",onChange:e=>o({percentageOfProvision:e}),precision:2,min:0,max:100,addonAfter:"%"}))),n.createElement(X.Z,{xs:24,xl:12},n.createElement(F.Z.Item,{name:"provision_price",fieldKey:"provision_price",label:r("Product.Variation.MLM.ProvisionPrice")},n.createElement(ne.Z,{min:0,precision:2,onChange:e=>o({provisionPrice:e})}))),n.createElement(X.Z,{xs:24,xl:12},n.createElement(F.Z.Item,{name:"effective_provision_price",fieldKey:"effective_provision_price",label:r("Product.Variation.MLM.EffectiveProvisionPrice")},n.createElement(ne.Z,{min:0,precision:2,onChange:e=>o({effectivePrice:e})}))),n.createElement(X.Z,{xs:24,xl:6},n.createElement(F.Z.Item,{name:"is_active",valuePropName:"checked"},n.createElement(I.Z,null,r("Product.Variation.MLM.ActiveProvision")))),n.createElement(X.Z,{xs:24,xl:6},n.createElement(F.Z.Item,{name:"has_discount",valuePropName:"checked"},n.createElement(I.Z,null,r("Product.Variation.MLM.HasDiscount")))),n.createElement(X.Z,{xs:24,xl:12},n.createElement(F.Z.Item,{name:"has_organization_bonus",valuePropName:"checked"},n.createElement(I.Z,null,r("Product.Variation.MLM.HasOrganizationBonusDiscountable"))))),n.createElement(z.Z,{justify:"end",gutter:[16,16]},n.createElement(X.Z,null,n.createElement(d.Z,{style:{minWidth:180},type:"primary",htmlType:"submit",loading:a},r("Global.Submit"))),n.createElement(X.Z,null,n.createElement(te.Z,{onConfirm:t},n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(P.Z,null)}))))))};const re=C.ZP.div`
  border: 1px solid #d9d9d9;
  border-radius: 20px;
  padding: 20px 25px 35px;
  margin-bottom: 40px;
  margin-top: 10px;

  .full-width {
    width: 100%;
  }
`;var le=a(14206),oe=a.n(le),ce=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):i(e.value).then(l,o)}c((n=n.apply(e,t||[])).next())}))};const se=new p.Vx("product-variation-mlm-details","Product Variation MLM Details");const ue=(0,B.cn)(void 0);var de=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var me=()=>{const{t:e}=(0,s.$)(),[t]=(0,B.KO)(ue);if(!t)return n.createElement(Y.Z,null);const[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[c,u]=(0,n.useState)(-2),{mutate:m}=(0,g.useMutation)((({id:e,values:t})=>e?se.updateOne(e,t):se.createOne(t))),{mutate:p}=(0,g.useMutation)((({id:e})=>function(e){return ce(this,void 0,void 0,(function*(){try{return(yield oe().delete(`product-variation-mlm-details/${e}`)).status}catch(e){throw new Error(e)}}))}(e)));(0,n.useEffect)((()=>{o(!0),function(e){return ce(this,void 0,void 0,(function*(){try{return(yield se.getAll({params:{productVariationId:e}})).data}catch(e){throw new Error(e)}}))}(t).then((e=>{o(!1),i(e)})).catch((()=>{o(!1)}))}),[]);const b=t=>{i((e=>e.filter((e=>e.id!==t)))),-1!==t&&p({id:t},{onSuccess:()=>{W.ZP.success(e("Global.DeletedSuccessfully",{title:e("Product.Variation.MLM.MLMDetail")}))},onError:()=>{W.ZP.error(e("Global.DeletedError",{title:e("Product.Variation.MLM.MLMDetail")}))}})};return n.createElement(pe,null,n.createElement(z.Z,{className:"header",justify:"space-between"},n.createElement(X.Z,null,n.createElement(J.Z.Title,{level:4},e("Product.Variation.MLM.MLMList"))),n.createElement(X.Z,null,n.createElement(d.Z,{icon:n.createElement(H.Z,null),type:"primary",onClick:()=>{(null==a?void 0:a.some((e=>-1===e.id)))||i((e=>[{id:-1,qv:void 0,country:null,is_active:!1,provision_price:void 0,percentage_of_provision:void 0},...e]))}},e("Global.Create")))),l?n.createElement(r.aN,null):n.createElement(n.Fragment,null,a.map(((e,a)=>n.createElement(ie,{initialValues:e,key:`mlm-${a}`,isPending:c===e.id,onRemove:()=>b(null==e?void 0:e.id),onSubmit:a=>((e,a)=>{u(e);const{country:n}=a,r=de(a,["country"]),l=Object.assign({product_variation_id:t,country_id:null==n?void 0:n.id},r);m({id:-1===e?void 0:e,values:l},{onSuccess:t=>{-1===e&&i((e=>e.map((e=>-1===e.id?t:e))))},onSettled:()=>{u(-2)}})})(null==e?void 0:e.id,a)})))))};const pe=C.ZP.div`
  & .header {
    padding: 16px 0;

    & button {
      min-width: 180px;
    }
  }
`;var be=a(74456),ye=a(52395),ve=a(68891),ge=(a(39140),a(65127),a(55088),function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):i(e.value).then(l,o)}c((n=n.apply(e,t||[])).next())}))});const Ee="/product-variations",Pe=e=>ge(void 0,void 0,void 0,(function*(){const t=new p.Vx("product-variations");return yield t.getOne(e)})),fe=new p.Vx("product-variations/setting-tab",m.ZP.t("Product.Variation.Title")),he=(e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/setting-tab`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})),Ze=e=>ge(void 0,void 0,void 0,(function*(){try{return(yield oe().get("barcodes/generate",{params:{type:e}})).data.data}catch(e){throw new Error(e)}}));var _e=function({value:e,onAdd:t,onChange:a,options:i,isPending:r,maxHeight:l,attributeType:o,hasNew:c=!0,isMulti:s=!1,disabled:u=!1,menuPlacement:d="bottom"}){const[m,b]=(0,n.useState)(!1),y=e=>null==a?void 0:a(e);return n.createElement(n.Fragment,null,n.createElement(V.ZP,{isClearable:!0,isMulti:s,options:i,isLoading:r,isDisabled:u||r,onChange:y,maxMenuHeight:l,menuPlacement:d,menuPortalTarget:document.body,getOptionLabel:e=>null==e?void 0:e.value,getOptionValue:e=>String(null==e?void 0:e.id),styles:{menuPortal:e=>Object.assign(Object.assign({},e),{zIndex:9999})},components:{Menu:e=>(0,h.S)({hasNew:c,props:e,onClick:()=>b(!0)}),IndicatorSeparator:()=>n.createElement("span",{style:{width:0}})},theme:e=>(0,p.$p)(e),classNamePrefix:"react-select",value:e}),n.createElement(Z.Z,{isVisible:m,setVisible:b,title:"AttributeOptions.Title"},n.createElement(S,{onCallback:a=>{Array.isArray(e)?y([...e,a]):y(s?[a]:a),null==t||t(a),b(!1)},singleData:{attributeType:o}})))};var Ve=({name:e,fieldKey:t,onRemove:a,disabled:i,selectedType:r,attributeTypes:l,setAttributeTypes:o,onChangeToNewType:c,onAddNewAttribute:u})=>{const p=new O.Z,[b,y]=(0,n.useState)(!1),[v,g]=(0,n.useState)([]),{t:E}=(0,s.$)();(0,n.useEffect)((()=>{r&&h(r.attributeType,!0)}),[]);const h=(t,a)=>{if(t){if(!a){const e=null==l?void 0:l.filter((e=>(null==e?void 0:e.id)!==(null==t?void 0:t.id)));o(r?[...e,null==r?void 0:r.attributeType]:e)}y(!0),p.apiService.getOne(t.id).then((({attributeTypeOptions:t})=>{g(t),y(!1),a||c(e)})).catch((()=>y(!1)))}};return n.createElement(ke,{disabled:i},i&&n.createElement("div",{className:"auto-generate"},n.createElement(J.Z,{className:"title"},E("Product.Variation.Attributes.AutoGenerated"))),n.createElement(F.Z.Item,{required:!0,label:E("Product.Variation.Attributes.AttributeType"),name:[e,"attributeType"],fieldKey:[t,"attributeType"],rules:[{required:!0,message:`${E("Product.Variation.Attributes.RequiredAttribute")}`}]},n.createElement(f.$,{disabled:i,options:l,onAdd:u,onSelect:h})),n.createElement(F.Z.Item,{required:!0,label:E("Product.Variation.Attributes.AttributeTypeOption"),name:[e,"attributeTypeOption"],fieldKey:[t,"attributeTypeOption"],rules:[{required:!0,message:`${E("Product.Variation.Attributes.RequiredAttributeTypeOption")}`}]},n.createElement(_e,{disabled:i,isPending:b,options:v,onAdd:e=>{g((t=>[...t,e]))},attributeType:null==r?void 0:r.attributeType})),n.createElement(z.Z,{justify:"space-between",align:"middle"},n.createElement(X.Z,null,n.createElement(F.Z.Item,{name:[e,"visible"],fieldKey:[t,"visible"],valuePropName:"checked"},n.createElement(I.Z,null,m.ZP.t("Global.IsVisible")))),!i&&n.createElement(X.Z,null,n.createElement(te.Z,{onConfirm:()=>{a(e),r&&h(null==r?void 0:r.attributeType,!1)}},n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(P.Z,null)})))))};const ke=C.ZP.div`
  padding: 16px 16px 0 16px;
  border-radius: 4px;
  background: #ececec;
  border: 1px solid #d9d9d9;
  position: relative;
  pointer-events: ${e=>e.disabled?"none":"auto"};

  & .auto-generate {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    z-index: 10;

    & .title {
      position: absolute;
      right: 16px;
      top: 16px;
      color: #d9d9d9;
      z-index: 11;
      color: red;
    }
  }
`;var Se={FormContainer:(0,C.ZP)(F.Z)`
  & .form-container {
    padding: 16px;
  }
  .form-content {
    border-radius: 4px;
    box-shadow: rgb(0 0 0 / 20%) 0px 2px 1px -1px, rgb(0 0 0 / 14%) 0px 1px 1px 0px,
      rgb(0 0 0 / 12%) 0px 1px 3px 0px;
  }
`,FieldListDivider:C.ZP.div`
  padding: 16px 8px;

  & .ant-upload-drag-container {
    height: 168px;
  }

  &:not(:last-child) {
    border-bottom: 1px dashed #ededed;
    margin-bottom: 24px;
  }
`};const xe={encode:!1,skipNull:!0,skipEmptyString:!0};var Oe=({onSubmit:e,initialValues:t,isPending:a,attributeTypes:i,setAttributeTypes:l})=>{const[o]=F.Z.useForm(),{t:c}=(0,s.$)(),[u,d]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(t){const{attributes:e,productVariationCategories:a}=t;o.setFieldsValue({attributes:0===e.length?[{}]:e,productVariationCategories:a}),m(a)}}),[t]);const m=e=>{const a=e.map((e=>e.id)),n=ve.stringify({productVariationCategoryIds:a},xe);console.log(),d(!0),(e=>ge(void 0,void 0,void 0,(function*(){try{const t=new O.Z;return(yield t.apiService.getAll({extra:`?${e}`,pagination:{per_page:200}})).data}catch(e){throw new Error(e)}})))(n).then((e=>{var a;d(!1);const n=o.getFieldValue("attributes");o.setFieldsValue({attributes:n.filter((t=>e.some((e=>e.id===t.attribute_type_id))))});const i=[];null===(a=null==t?void 0:t.attributes)||void 0===a||a.forEach((e=>{var t;i.push(null===(t=null==e?void 0:e.attributeType)||void 0===t?void 0:t.id)}));const r=[];null==e||e.forEach((e=>{r.push(null==e?void 0:e.id)}));const c=null==r?void 0:r.filter((function(e){return!(null==i?void 0:i.includes(e))})),s=null==e?void 0:e.filter((e=>null==c?void 0:c.includes(null==e?void 0:e.id)));l(s)})).catch((()=>d(!1)))},p=e=>{l((t=>[...t,e]))},b=e=>{const t=o.getFieldValue("attributes").map(((t,a)=>a===e?Object.assign(Object.assign({},t),{attributeTypeOption:null}):t));o.setFieldsValue({attributes:t})};return n.createElement(Se.FormContainer,{form:o,layout:"vertical",onFinish:e},n.createElement(J.Z.Title,{style:{marginTop:16},level:3},c("Product.Variation.Attributes.VariationAttributes")),n.createElement(n.Suspense,{fallback:n.createElement(r.aN,{title:c("Product.Variation.Loader")})},n.createElement(Fe,null,n.createElement(F.Z.Item,{name:"productVariationCategories",label:c("Product.Variation.Attributes.ProductVariationCategory")},n.createElement(be.e,{isMulti:!0,hasNew:!1,onChange:m})),n.createElement(Te,null,n.createElement("legend",null,"Attributes".toUpperCase()),n.createElement(ye.Z,{spinning:u,tip:c("Product.Variation.Attributes.Loading")},n.createElement(z.Z,{gutter:[16,16]},n.createElement(F.Z.List,{name:"attributes"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,e.map((({key:e,name:t,fieldKey:r})=>{var c;return n.createElement(X.Z,{span:6,key:e},n.createElement(Ve,{name:t,onRemove:a,fieldKey:r,attributeTypes:i,onAddNewAttribute:p,onChangeToNewType:b,selectedType:o.getFieldValue("attributes")[t],disabled:null===(c=o.getFieldValue("attributes")[t])||void 0===c?void 0:c.is_auto_generated,setAttributeTypes:l}))})),n.createElement(Ie,{onClick:()=>t(null)}))))))))),n.createElement(r.Ow,{isPending:a}))};const Fe=C.ZP.div`
  padding: 16px;
`,Te=C.ZP.fieldset`
  border: 1px solid #d9d9d9;
  border-radius: 8px;
  padding: 20px 25px 35px;
  margin-bottom: 40px;
  margin-top: 10px;

  legend {
    color: #235b81;
    width: auto;
    padding: 0 10px;
    font-weight: bold;
    margin-bottom: 0;
    margin-left: 15px;
    border-bottom: 0;
  }
`,Ie=({onClick:e})=>{const{t:t}=(0,s.$)();return n.createElement(X.Z,{span:6},n.createElement(we,{onClick:e},n.createElement("div",{className:"icon"},n.createElement(r.VZ,{src:"/global/create.svg",width:50,height:50})),n.createElement(J.Z.Title,{type:"secondary",level:5},t("Product.Variation.Attributes.CreateNewAttributeType"))))},we=C.ZP.div`
  height: 247.56px;
  border-radius: 4px;
  border: 1px dashed #d9d9d9;
  background: #f0f0f0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  cursor: pointer;
  text-align: center;

  & .icon {
    margin-bottom: 16px;
  }
`;var Ce=({onCallback:e,singleData:t,variationId:a,isFetching:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/attribute-tab`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(a,e))),[u,d]=(0,n.useState)([]);return n.createElement(n.Fragment,null,i?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.Attributes")})}):n.createElement(Oe,{initialValues:t,onSubmit:t=>{var a;const{productVariationCategories:n,attributes:i}=t,r={attributes:i.map((({attributeType:e,attributeTypeOption:t,visible:a})=>({attribute_type_id:null==e?void 0:e.id,attribute_type_option_id:null==t?void 0:t.id,visible:a}))),productVariationCategories:null!==(a=null==n?void 0:n.map((e=>e.id)))&&void 0!==a?a:void 0};o({values:r},{onSuccess:e})},isPending:c,attributeTypes:u,setAttributeTypes:d}))},Ne=a(97645),je=a(9172),Me=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var qe=({onSubmit:e,isPending:t,initialValues:a})=>{const{t:i}=(0,s.$)(),[l]=F.Z.useForm(),[o,c]=(0,n.useState)([]),[u,m]=(0,n.useState)([]),p=(e,t)=>{"youtube"===e?(m((e=>[...e,t])),c((e=>e.filter((e=>e!==t))))):(c((e=>[...e,t])),m((e=>e.filter((e=>e!==t)))))};return(0,n.useEffect)((()=>{if((null==a?void 0:a.productVariationFiles)&&a.productVariationFiles.length>0){l.setFieldsValue({productVariationFiles:a.productVariationFiles.map((e=>{var{file_self_id:t}=e,a=Me(e,["file_self_id"]);return Object.assign(Object.assign({},a),{file_id:t})}))});const e=[],t=[];a.productVariationFiles.forEach(((a,n)=>{"youtube"===a.type?t.push(n):e.push(n)})),c(e),m(t)}}),[a]),n.createElement(F.Z,{form:l,colon:!1,layout:"horizontal",onFinish:e,labelCol:{span:2},name:"variation-files-form",initialValues:{productVariationFiles:[{type:void 0}]}},n.createElement(J.Z.Title,{style:{marginTop:16},level:3},i("Product.Variation.File.ProductVariationFiles")),n.createElement(F.Z.List,{name:"productVariationFiles"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,0===e.length?n.createElement(r.cm,{onClick:()=>t({type:void 0}),title:i("Product.Variation.NoDataMsg")}):e.reverse().map(((e,c)=>{var{key:s,name:m,fieldKey:b}=e,y=Me(e,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:s},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:8,style:{height:"205px"}},n.createElement(F.Z.Item,Object.assign({},y,{name:[m,"file"],fieldKey:[b,"file"]}),n.createElement(r.gq,{form:l,type:"dragger",disabled:u.some((e=>e===m)),idName:["productVariationFiles",m,"file_id"]})),n.createElement(F.Z.Item,Object.assign({hidden:!0},y,{name:[m,"file_id"],fieldKey:[b,"file_id"]}),n.createElement(n.Fragment,null))),n.createElement(X.Z,{span:16},n.createElement(F.Z.Item,Object.assign({},y,{name:[m,"type"],rules:[{required:!0}],fieldKey:[b,"type"],label:i("Product.Variation.File.Type")}),n.createElement(je.Z,{onChange:e=>p(e,m),placeholder:i("Global.SelectPlaceholder",{title:i("Product.Variation.File.Type")}),options:[{label:i("Product.Variation.File.Image"),value:"image"},{label:i("Product.Variation.File.Media"),value:"media"},{label:"Youtube",value:"youtube"},{label:i("Product.Variation.File.Certificate"),value:"certificate"}]})),n.createElement(F.Z.Item,Object.assign({},y,{name:[m,"title"],rules:[{required:!0}],fieldKey:[b,"title"],label:i("Product.Variation.File.Title")}),n.createElement(T.Z,{placeholder:i("Global.InputPlaceholder",{title:i("Product.Variation.File.Title")})})),!o.some((e=>e===m))&&n.createElement(F.Z.Item,Object.assign({},y,{name:[m,"link"],fieldKey:[b,"link"],label:i("Product.Variation.File.Link")}),n.createElement(T.Z,{placeholder:i("Global.InputPlaceholder",{title:i("Product.Variation.File.Link")})})),n.createElement(F.Z.Item,Object.assign({},y,{name:[m,"sort"],fieldKey:[b,"name"],label:i("Global.Sort")}),n.createElement(ne.Z,{placeholder:i("Global.InputPlaceholder",{title:i("Global.Sort")})})))),n.createElement(z.Z,{justify:"end",gutter:8},0===c&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",icon:n.createElement(E.Z,null),onClick:()=>t({type:void 0})})),n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>a(m),icon:n.createElement(Ne.Z,null)}))))}))))),n.createElement(r.Ow,{isPending:t}))};var Ae=({isFetching:e,onCallback:t,singleData:a,variationId:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/sync-product-variation-files`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(i,e)));return n.createElement(n.Fragment,null,e?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.Files")})}):n.createElement(qe,{initialValues:a,onSubmit:e=>{o({values:e},{onSuccess:t})},isPending:c}))},Le=a(31366),Ge=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var Ke=({onSubmit:e,isPending:t,initialValues:a})=>{const{t:i}=(0,s.$)(),[l]=F.Z.useForm();(0,n.useEffect)((()=>{a&&l.setFieldsValue(a)}),[a]);const o=e=>i("Global.InputPlaceholder",{title:e});return n.createElement(F.Z,{form:l,layout:"vertical",onFinish:e,name:"variation-settings-form"},n.createElement(F.Z.List,{name:"multiProductVariations"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,0===e.length?n.createElement(r.cm,{onClick:()=>t(null,0),title:i("Product.Variation.NoMultiDataMsg")}):e.map(((e,r)=>{var{key:l,name:c,fieldKey:s}=e,u=Ge(e,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:l},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"variation"],rules:[{required:!0}],fieldKey:[s,"variation"],label:i("Product.Variation.Title")}),n.createElement(Le.Z,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"quantity"],fieldKey:[s,"quantity"],label:i("Global.Quantity"),rules:[{required:!0},{type:"number",min:1}]}),n.createElement(ne.Z,{placeholder:o(i("Global.Quantity"))})))),n.createElement(z.Z,{justify:"end",gutter:8},0===r&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>t(null,0),icon:n.createElement(E.Z,null)})),r>0&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>a(c),icon:n.createElement(Ne.Z,null)}))))}))))),n.createElement(r.Ow,{isPending:t}))};var De=({isFetching:e,onCallback:t,singleData:a,variationId:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/multi-product-variations`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(i,e)));return n.createElement(n.Fragment,null,e?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.MultiVariation")})}):n.createElement(Ke,{initialValues:a,onSubmit:e=>{const{multiProductVariations:a}=e,n={multi_product_variations:a.map((e=>({id:e.variation.id,multi_variation_quantity:e.quantity})))};o({values:n},{onSuccess:t})},isPending:c}))},$e=a(3970),Ue=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var Qe=({onSubmit:e,isPending:t,initialValues:a})=>{const{t:i}=(0,s.$)(),[l]=F.Z.useForm();(0,n.useEffect)((()=>{a&&l.setFieldsValue({packages:a.packages.map((e=>({package:e,quantity:e.quantity})))})}),[a]);const o=e=>i("Global.InputPlaceholder",{title:e});return n.createElement(F.Z,{form:l,layout:"vertical",onFinish:e,name:"variation-settings-form"},n.createElement(F.Z.List,{name:"packages"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,0===e.length?n.createElement(r.cm,{title:i("Product.Variation.NoPackageMsg"),onClick:()=>t(null,0)}):e.map(((e,r)=>{var{key:l,name:c,fieldKey:s}=e,u=Ue(e,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:l},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"package"],rules:[{required:!0}],fieldKey:[s,"package"],label:i("Package.Title")}),n.createElement($e.R,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"quantity"],fieldKey:[s,"quantity"],label:i("Global.Quantity"),rules:[{required:!0},{type:"number",min:1}]}),n.createElement(ne.Z,{placeholder:o(i("Global.Quantity"))})))),n.createElement(z.Z,{justify:"end",gutter:8},0===r&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>t(null,0),icon:n.createElement(E.Z,null)})),n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>a(c),icon:n.createElement(Ne.Z,null)}))))}))))),n.createElement(r.Ow,{isPending:t}))},Re=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var Be=({isFetching:e,onCallback:t,singleData:a,variationId:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/sync-product-variation-package`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(i,e)));return n.createElement(n.Fragment,null,e?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.Packages")})}):n.createElement(Qe,{initialValues:a,onSubmit:e=>{const{packages:a}=e,n={packages:a.map((e=>{var{quantity:t}=e;return{package_id:Re(e,["quantity"]).package.id,quantity:t}}))};o({values:n},{onSuccess:t})},isPending:c}))},He=a(61320),We=a.n(He),ze=a(73857),Xe=a(49114),Je=a(31675),Ye=a(28681),et=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var tt=({NETCalcFunc:e,grossCalcFunc:t})=>{const{t:a}=(0,s.$)(),{Item:i}=F.Z,l=e=>a("Global.InputPlaceholder",{title:e});return n.createElement(F.Z.List,{name:"productVariationPrices"},((o,{add:c,remove:s})=>n.createElement(n.Fragment,null,0===o.length?n.createElement(r.cm,{title:a("Product.Variation.NoPriceMsg"),onClick:()=>c(null,0)}):o.map(((r,o)=>{var{key:u,name:m,fieldKey:p}=r,b=et(r,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:u},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},b,{name:[m,"price","currency"],rules:[{required:!0}],fieldKey:[p,"price","currency"],label:a("Currency.Title")}),n.createElement(ze.V,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},b,{name:[m,"price","priceType"],rules:[{required:!0}],fieldKey:[p,"price","priceType"],label:a("PriceType.Title")}),n.createElement(Xe.r,null))),n.createElement(X.Z,{span:12},n.createElement(i,Object.assign({},b,{name:[m,"value"],rules:[{required:!0}],fieldKey:[p,"value"],label:a("Product.Variation.Prices.ValueNET")}),n.createElement(ne.Z,{min:0,precision:2,onChange:()=>t(m),placeholder:l(a("Global.Value"))}))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},b,{name:[m,"price","countries"],rules:[{required:!0}],fieldKey:[p,"price","countries"],label:a("Country.Title")}),n.createElement(ee.O,{onChange:()=>t(m)}))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},b,{rules:[{type:"number",min:1}],name:[m,"price","unit_price"],fieldKey:[p,"price","unit_price"],label:a("Product.Variation.Prices.PricesUnit")}),n.createElement(ne.Z,{placeholder:l(a("Product.Variation.Prices.PricesUnit"))}))),n.createElement(X.Z,{span:12},n.createElement(i,Object.assign({},b,{name:[m,"gross"],fieldKey:[p,"gross"],label:a("Product.Variation.Prices.GrossPrice")}),n.createElement(ne.Z,{precision:2,onChange:()=>e(m),placeholder:l(a("Product.Variation.Prices.GrossPrice"))}))),n.createElement(X.Z,{span:12},n.createElement(i,Object.assign({},b,{rules:[{required:!0}],name:[m,"available_from"],fieldKey:[p,"available_from"],label:a("Product.Variation.Prices.AvailableFrom")}),n.createElement(Ye.Z,{format:(0,Je._A)(),placeholder:l(a("Product.Variation.Prices.AvailableFrom"))}))),n.createElement(X.Z,{span:12},n.createElement(i,Object.assign({},b,{hidden:!0,initialValue:1,name:[m,"minimum_quantity"],fieldKey:[p,"minimum_quantity"],label:a("Product.Variation.Prices.MinimumQuantity"),rules:[{type:"number",min:1}]}),n.createElement(ne.Z,{placeholder:l(a("Product.Variation.Prices.MinimumQuantity"))})))),n.createElement(z.Z,{justify:"end",gutter:8},0===o&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>c(null,0),icon:n.createElement(E.Z,null)})),n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>s(m),icon:n.createElement(Ne.Z,null)}))))})))))},at=a(2010),nt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function it(){const{t:e}=(0,s.$)(),t=t=>e("Global.InputPlaceholder",{title:t});return n.createElement(F.Z.List,{name:"userVariationPrices"},((a,{add:i,remove:l})=>n.createElement(n.Fragment,null,0===a.length?n.createElement(r.cm,{title:e("Product.Variation.NoUserPriceMsg"),onClick:()=>i(null,0)}):a.map(((a,r)=>{var{key:o,name:c,fieldKey:s}=a,u=nt(a,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:o},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"user"],rules:[{required:!0}],fieldKey:[s,"user"],label:e("Product.Variation.UserPrice.User")}),n.createElement(at.o,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"price","currency"],rules:[{required:!0}],fieldKey:[s,"price","currency"],label:e("Product.Variation.UserPrice.Currency")}),n.createElement(ze.V,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"price","countries"],rules:[{required:!0}],fieldKey:[s,"price","countries"],label:e("Product.Variation.UserPrice.Countries")}),n.createElement(ee.O,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"price","priceType"],rules:[{required:!0}],fieldKey:[s,"price","priceType"],label:e("Product.Variation.UserPrice.PriceType")}),n.createElement(Xe.r,null))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"price","unit_price"],rules:[{required:!0}],fieldKey:[s,"price","unit_price"],label:e("Product.Variation.UserPrice.UnitPrice")}),n.createElement(ne.Z,{min:0,placeholder:t(e("Product.Variation.UserPrice.UnitPrice"))}))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"value"],rules:[{required:!0}],fieldKey:[s,"value"],label:e("Product.Variation.UserPrice.Value")}),n.createElement(ne.Z,{min:0,placeholder:t(e("Product.Variation.UserPrice.Value"))}))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{rules:[{required:!0}],name:[c,"available_from"],fieldKey:[s,"available_from"],label:e("Product.Variation.UserPrice.AvailableFrom")}),n.createElement(Ye.Z,{format:(0,Je._A)(),placeholder:t(e("Product.Variation.UserPrice.AvailableFrom"))}))),n.createElement(X.Z,{span:12},n.createElement(F.Z.Item,Object.assign({},u,{hidden:!0,initialValue:1,name:[c,"minimum_quantity"],fieldKey:[s,"minimum_quantity"],label:e("Product.Variation.UserPrice.MinimumQuantity")}),n.createElement(ne.Z,{min:0,placeholder:t(e("Product.Variation.UserPrice.MinimumQuantity"))}))),n.createElement(X.Z,{span:12,style:{alignSelf:"end"}},n.createElement(F.Z.Item,Object.assign({},u,{name:[c,"buy_with_vat"],valuePropName:"checked"}),n.createElement(I.Z,null,e("Product.Variation.UserPrice.BuyWithVAT"))))),n.createElement(z.Z,{justify:"end",gutter:8},0===r&&n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>i(null,0),icon:n.createElement(E.Z,null)})),n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>l(c),icon:n.createElement(Ne.Z,null)}))))})))))}var rt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var lt=({onSubmit:e,isPending:t,variation:a,initialValues:i})=>{const[l]=F.Z.useForm(),{t:o}=(0,s.$)(),c=(e,t,n)=>{var r,c,s;const u=null!==(r=l.getFieldValue(["productVariationPrices",e,"value"]))&&void 0!==r?r:n,d=null!==(c=l.getFieldValue(["productVariationPrices",e,"price","countries"]))&&void 0!==c?c:t,m=a.vats.map((e=>({value:e.value,countryId:e.country.id}))).filter((e=>e.countryId===d.id));if(m.length>0){const t=m[0].value/100,a=null!==(s=l.getFieldsValue())&&void 0!==s?s:i,{productVariationPrices:n}=a,r=rt(a,["productVariationPrices"]),o=t*u+u;try{n[e].gross=o,l.setFieldsValue(Object.assign({productVariationPrices:n},r))}catch(e){}return o}W.ZP.error(o("Product.Variation.Prices.SetCountryVat",{countryName:d.name}))};return(0,n.useEffect)((()=>{i&&l.setFieldsValue({productVariationPrices:i.productVariationPrices.map(((e,t)=>{var{available_from:a,value:n}=e,i=e.price,{countries:r}=i,l=rt(i,["countries"]),o=rt(e,["available_from","value","price"]);return Object.assign(Object.assign({},o),{value:n,gross:c(t,r[0],n),available_from:a?We()(a):null,price:Object.assign({countries:r[0]},l)})})),userVariationPrices:i.userVariationPrices.map((e=>{var{available_from:t}=e,a=e.price,{countries:n}=a,i=rt(a,["countries"]),r=rt(e,["available_from","price"]);return Object.assign(Object.assign({},r),{price:Object.assign({countries:n[0]},i),available_from:t?We()(t):null})}))})}),[i]),n.createElement("div",null,n.createElement(Se.FormContainer,{form:l,layout:"vertical",onFinish:e,name:"variation-prices-form"},n.createElement(J.Z.Title,{style:{marginTop:16},level:3},o("Product.Variation.Prices.VariationPrices")),n.createElement(tt,{grossCalcFunc:c,NETCalcFunc:e=>{const t=l.getFieldValue(["productVariationPrices",e,"gross"]),n=l.getFieldValue(["productVariationPrices",e,"price","countries"]),i=a.vats.map((e=>({value:e.value,countryId:e.country.id}))).filter((e=>e.countryId===n.id));if(i.length>0){const a=i[0].value/100,n=l.getFieldsValue(),{productVariationPrices:r}=n,o=rt(n,["productVariationPrices"]);r[e].value=t/(a+1),l.setFieldsValue(Object.assign({productVariationPrices:r},o))}else W.ZP.error(o("Product.Variation.Prices.SetVatForProductVariation"))}}),n.createElement(J.Z.Title,{style:{marginTop:24},level:3},o("Product.Variation.Prices.VariationUserPrices")),n.createElement(it,null),n.createElement(r.Ow,{isPending:t})))},ot=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var ct=({variation:e,onCallback:t,singleData:a,variationId:i,isFetching:l})=>{const{t:o}=(0,s.$)(),{mutate:c,isLoading:u}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/prices`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(i,e)));return n.createElement(n.Fragment,null,l?n.createElement(r.aN,{title:o("Product.LoadingTabInfo",{Tab:o("Product.Tab.Prices")})}):n.createElement(n.Suspense,{fallback:n.createElement(r.aN,null)},n.createElement(lt,{variation:e,isPending:u,initialValues:a,onSubmit:e=>{const{productVariationPrices:a,userVariationPrices:n}=e,i=null==a?void 0:a.map((e=>{var{price:t,minimum_quantity:a}=e,n=ot(e,["price","minimum_quantity"]);return Object.assign(Object.assign({},n),{minimum_quantity:a,price_id:t.id,prices:{id:t.id,display_for_new_item:!0,unit_price:t.unit_price,price_type_id:t.priceType.id,currency_id:t.currency.id,min_quantity:a,country_ids:[t.countries.id]}})})),r=null==n?void 0:n.map((e=>{var{price:t,user:a,minimum_quantity:n}=e,i=ot(e,["price","user","minimum_quantity"]);return Object.assign(Object.assign({},i),{minimum_quantity:n,user_id:a.id,price_id:t.id,prices:{id:t.id,display_for_new_item:!0,unit_price:t.unit_price,price_type_id:t.priceType.id,currency_id:t.currency.id,min_quantity:n,country_ids:[t.countries.id]}})}));c({values:{userVariationPrices:r,productVariationPrices:i}},{onSuccess:t})}})))},st=a(19582),ut=(a(33699),a(89452));a(61572);var dt=e=>n.createElement(r.LE,Object.assign({},e,{hasNew:!1,searchParam:"search",module:new ut.Z,optionSelector:{label:"type-value",value:"id"}})),mt=a(75870),pt=a(31006),bt=a(92493),yt=a(24876),vt=a(4389);const{BarcodeTypes:gt}=new ut.Z;var Et=({isModalVisible:e,setModalVisible:t,form:a})=>{const{mutate:i,isLoading:l}=(0,g.useMutation)(Ze),{t:o}=(0,s.$)(),c=()=>{t(!1)};return n.createElement(v.Z,{width:1300,footer:!1,destroyOnClose:!0,closable:!0,onCancel:c,visible:e,title:n.createElement(r.xB,{onClose:c,items:[{path:"",breadcrumbName:o("Product.Variation.Settings.GenerateBarcode")}]})},n.createElement(n.Suspense,{fallback:n.createElement("p",null,o("Global.LoadingUpsertModule"))},n.createElement(F.Z,{name:"generate-barcode-modal",onFinish:({type:e})=>{i(e,{onSuccess:t=>{var n;if(null===t)return void W.ZP.error(o("Product.Variation.Settings.CouldNotFindAnyBarcodeWithTheTypeOf",{type:e}));const i=null!==(n=a.getFieldValue("barcodes"))&&void 0!==n?n:[];a.setFieldsValue({barcodes:[...i,t]})},onSettled:()=>{c()}})}},n.createElement(F.Z.Item,{label:o("Barcode.Field.Type"),name:"type",rules:[{required:!0}]},n.createElement(je.Z,{options:gt,placeholder:o("Global.SelectPlaceholder",{title:o("Barcode.Field.Type")})})),n.createElement(r.Ow,{title:o("Product.Variation.Settings.Generate"),isPending:l}))))};var Pt={MainContainer:C.ZP.div`
  .barcode-gen-container {
    padding: 12px !important;

    .ant-form-item-control-input-content {
      display: flex;
      justify-content: space-between;

      .barcode-select {
        width: calc(100% - ${"10rem"});
      }
    }
  }

  .checkboxContainer .ant-form-item {
    background-color: #fbfbfb !important;
  }

  .ant-form-item {
    margin-bottom: 0;
    padding: 12px 12px 24px 12px;
    :nth-child(even) {
      background-color: #fbfbfb;
    }
    :nth-child(odd) {
      background-color: rgb(242, 242, 242);
    }
  }
`};var ft=({product:e,onSubmit:t,isPending:a,initialValues:i})=>{const{t:l}=(0,s.$)(),[o]=F.Z.useForm(),{Item:c}=F.Z,[u,m]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1);(0,n.useEffect)((()=>{i&&(m(i.inherit),o.setFieldsValue(Object.assign(Object.assign({},i),{release_date:i.inherit?e.release_date?We()(e.release_date):void 0:i.release_date?We()(i.release_date):void 0,available_until:i.inherit?e.available_until?We()(e.available_until):void 0:i.available_until?We()(i.available_until):void 0,min_order_quantity:i.inherit?e.min_order_quantity:i.min_order_quantity,max_order_quantity:i.inherit?e.max_order_quantity:i.max_order_quantity,maximum_sale_for_each_user:i.inherit?e.maximum_sale_for_each_user:i.maximum_sale_for_each_user})))}),[i]);const y=e=>l("Global.InputPlaceholder",{title:e});return n.createElement(Pt.MainContainer,null,n.createElement(Se.FormContainer,{form:o,layout:"vertical",onFinish:t,name:"variation-settings-form",initialValues:{is_active:!0,is_main:!1,inherit:!1,has_serial_number:!1,auto_active_net_stock:!1,auto_deactivate_net_stock:!1,free_logistics_for_customer:!1,free_logistics_for_partner:!1,only_partner:!1}},n.createElement(z.Z,{gutter:[16,16]},n.createElement(X.Z,{span:12},n.createElement("div",{className:"form-content"},n.createElement(c,{name:"number",label:l("Global.Number")},n.createElement(T.Z,{placeholder:y(l("Global.Number"))})),n.createElement(c,{name:"purchase_price",label:l("Product.Variation.Settings.PurchasePrice")},n.createElement(ne.Z,{placeholder:y(l("Product.Variation.Settings.PurchasePrice"))})),!i&&n.createElement(F.Z.Item,{name:"number_series_position_id",label:l("Product.Field.NumberSeries")},n.createElement(pt.y,{slug:"product-variation"})),n.createElement(c,{name:"quantity",label:l("Order.Field.Quantity")},n.createElement(ne.Z,{min:0,placeholder:y(l("Order.Field.Quantity"))})),n.createElement(c,{name:"max_order_quantity",label:l("Product.Field.MaxOrderQuantity"),rules:[{type:"number",min:1}]},n.createElement(ne.Z,{disabled:u,placeholder:y(l("Product.Field.MaxOrderQuantity"))})),n.createElement(c,{name:"min_order_quantity",label:l("Product.Field.MinOrderQuantity"),rules:[{type:"number",min:1}]},n.createElement(ne.Z,{disabled:u,placeholder:y(l("Product.Field.MinOrderQuantity"))})),n.createElement(c,{name:"crossSellingVariations",label:l("Product.Variation.Settings.CrossSelling")},n.createElement(Le.Z,{isMulti:!0})),n.createElement(c,{name:"availability_id",label:l("Product.Variation.Settings.Availability"),rules:[{required:!0}]},n.createElement(st.Z,null)),n.createElement(c,{name:"productCategories",label:l("Product.Variation.Settings.Categories")},n.createElement(bt.Z,{isMulti:!0})))),n.createElement(X.Z,{span:12},n.createElement("div",{className:"form-content"},n.createElement(c,{name:"maximum_sale_for_each_user",label:l("Product.Field.MaxSaleForEachUser"),rules:[{type:"number",min:1}]},n.createElement(ne.Z,{disabled:u,placeholder:y(l("Product.Field.MaxSaleForEachUser"))})),n.createElement(c,{name:"release_date",label:l("Product.Field.ReleaseDate")},n.createElement(Ye.Z,{disabled:u,format:(0,Je._A)(),placeholder:y(l("Product.Field.ReleaseDate"))})),n.createElement(c,{name:"available_until",label:l("Product.Field.AvailableUntil")},n.createElement(Ye.Z,{disabled:u,format:(0,Je._A)(),placeholder:y(l("Product.Field.AvailableUntil"))})),n.createElement(c,{name:"customTariff",label:l("Product.Variation.Settings.CustomTariff")},n.createElement(mt.X,null)),n.createElement(c,{name:"shippingProfiles",label:l("Product.Variation.Settings.ShippingProfile")},n.createElement(yt.X,{isMulti:!0})),n.createElement(c,{name:"unit",label:y(l("Product.Variation.Settings.Unit"))},n.createElement(vt.m,null)),n.createElement(F.Z.Item,{className:"barcode-gen-container",label:l("Product.Variation.Settings.Barcode")},n.createElement(F.Z.Item,{noStyle:!0,name:"barcodes"},n.createElement(dt,{isMulti:!0,menuPlacement:"top",query:{used:!1},className:"barcode-select"})),n.createElement(d.Z,{onClick:()=>b(!0),className:"barcode-gen-btn"},l("Product.Variation.Settings.GenerateBarcode"))),p&&n.createElement(Et,{form:o,isModalVisible:p,setModalVisible:b}),n.createElement(z.Z,{className:"checkboxContainer"},n.createElement(X.Z,{flex:1},n.createElement(c,{name:"is_active",valuePropName:"checked"},n.createElement(I.Z,null,l("Global.IsActive")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"is_main",valuePropName:"checked"},n.createElement(I.Z,null,l("Global.IsMain")))),n.createElement(X.Z,{flex:1},n.createElement(c,null,n.createElement(I.Z,{checked:u,onChange:t=>{m(t.target.checked),o.setFields([{name:"inherit",value:t.target.checked}]),t.target.checked&&o.setFields([{name:"max_order_quantity",value:e.max_order_quantity},{name:"min_order_quantity",value:e.min_order_quantity},{name:"maximum_sale_for_each_user",value:e.maximum_sale_for_each_user},{name:"release_date",value:e.release_date?We()(e.release_date):void 0},{name:"available_until",value:e.available_until?We()(e.available_until):void 0}])}},l("Product.Variation.Settings.Inherit")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"auto_deactivate_net_stock",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Field.AutoDeactiveNetStock")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"auto_active_net_stock",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Field.AutoActiveNetStock")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"has_serial_number",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Field.HasSerialNumber")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"free_logistics_for_customer",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Variation.Settings.FreeLogisticsForCustomer")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"free_logistics_for_partner",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Variation.Settings.FreeLogisticsForPartner")))),n.createElement(X.Z,{flex:1},n.createElement(c,{name:"only_partner",valuePropName:"checked"},n.createElement(I.Z,null,l("Product.Variation.Field.OnlyPartner")))))))),n.createElement(r.Ow,{isPending:a})))},ht=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var Zt=({onCallback:e,singleData:t,product:a,productId:i,variationId:r,isMulti:l})=>{const{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>r?he(r,e):(e=>ge(void 0,void 0,void 0,(function*(){return yield fe.createOne(e)})))(e)));return n.createElement(ft,{initialValues:t,product:a,onSubmit:t=>{const{unit:a,barcodes:n,customTariff:r,shippingProfiles:c,productCategories:s,crossSellingVariations:u}=t,d=ht(t,["unit","barcodes","customTariff","shippingProfiles","productCategories","crossSellingVariations"]),m=Object.assign(Object.assign({},d),{unit_id:null==a?void 0:a.id,product_id:i,custom_tariff_id:null==r?void 0:r.id,type:l?"multi":"single",barcodeIds:null==n?void 0:n.map((e=>e.id)),product_category_ids:null==s?void 0:s.map((e=>e.id)),shippingProfileIds:null==c?void 0:c.map((e=>e.id)),crossSellingVariations:null==u?void 0:u.map((e=>e.id))});o({values:m},{onSuccess:e})},isPending:c})},_t=a(40416);a(64719);var Vt={MainContainer:C.ZP.div`
  border: 1px solid #d9d9d9;
  border-radius: 20px;
  padding: 20px 25px 35px;
  margin-bottom: 40px;
  margin-top: 10px;

  .checkboxContainer .ant-form-item {
    background-color: #fbfbfb !important;
  }

  .ant-form-item {
    margin-bottom: 0;
    padding: 12px 12px 24px 12px;
    :nth-child(even) {
      background-color: #fbfbfb;
    }
    :nth-child(odd) {
      background-color: rgb(242, 242, 242);
    }
  }
`};var kt=({onSubmit:e,isPending:t,initialValues:a,onRemove:i})=>{const[l]=F.Z.useForm(),{t:o}=(0,s.$)(),{Item:c}=F.Z;(0,n.useEffect)((()=>{a&&l.setFieldsValue(a)}),[a]);const u=e=>o("Global.InputPlaceholder",{title:e});return n.createElement(Vt.MainContainer,null,n.createElement(Se.FormContainer,{form:l,labelAlign:"left",onFinish:e,layout:"vertical",name:"variation-supplier-form"},n.createElement(z.Z,{gutter:[16,16],justify:"space-around"},n.createElement(X.Z,{span:12,className:"customBoxShadow formContainer"},n.createElement(n.Suspense,{fallback:(0,ae.Z)(o("Product.Variation.Suppliers.Title"))},n.createElement(c,{name:"supplier",rules:[{required:!0}],label:o("Product.Variation.Suppliers.Title")},n.createElement(_t.L,null))),n.createElement(c,{name:"supplier_product_number",rules:[{required:!0}],label:o("Product.Variation.Suppliers.ProductNumber")},n.createElement(ne.Z,{placeholder:u(o("Product.Variation.Suppliers.ProductNumber"))})),n.createElement(c,{name:"supplier_product_name",rules:[{required:!0}],label:o("Product.Variation.Suppliers.ProductName")},n.createElement(T.Z,{placeholder:u(o("Product.Variation.Suppliers.ProductName"))})),n.createElement(c,{name:"price_value",label:o("Product.Variation.Suppliers.PriceValue")},n.createElement(ne.Z,{placeholder:u(o("Product.Variation.Suppliers.PriceValue"))}))),n.createElement(X.Z,{span:12,className:"customBoxShadow formContainer"},n.createElement(c,{name:"delivery_days",label:o("Product.Variation.Suppliers.DeliveryDays")},n.createElement(ne.Z,{placeholder:u(o("Product.Variation.Suppliers.DeliveryDays"))})),n.createElement(c,{name:"unit",label:o("Product.Variation.Suppliers.PackingUnit")},n.createElement(vt.m,null)),n.createElement(c,{label:o("Product.Variation.Prices.MinimumQuantity"),name:"minimum_quantity"},n.createElement(ne.Z,{min:0,placeholder:u(o("Product.Variation.Prices.MinimumQuantity"))})),n.createElement(c,{label:o("Product.Variation.Suppliers.Currency"),name:"currency"},n.createElement(ze.V,null)))),n.createElement(r.Ow,{isPending:t,Secondary:n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(P.Z,null),onClick:i})})))},St=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):i(e.value).then(l,o)}c((n=n.apply(e,t||[])).next())}))};const xt=new p.Vx("product-variation-suppliers",m.ZP.t("Product.Variation.Suppliers.ProductVariationSupplier"));const Ot=e=>St(void 0,void 0,void 0,(function*(){try{const t=yield oe().delete(`product-variation-suppliers/${e}`);return W.ZP.success(m.ZP.t("Global.DeletedSuccessfully",{title:m.ZP.t("Product.Variation.Suppliers.Title")})),t.status}catch(e){throw new Error(e)}}));var Ft=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const Tt=new p.Vx("product-variation-suppliers",m.ZP.t("Product.Variation.Suppliers.Title"));var It=({singleData:e})=>{const[t]=(0,B.KO)(ue);if(!t)return n.createElement(Y.Z,null);const{t:a}=(0,s.$)(),[i,l]=(0,n.useState)(null!=e?e:[]),[o,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(-2),{mutate:p}=(0,g.useMutation)((({id:e,values:t})=>e?Tt.updateOne(e,t):Tt.createOne(t))),{mutate:b}=(0,g.useMutation)(Ot);(0,n.useEffect)((()=>{c(!0),function(e){return St(this,void 0,void 0,(function*(){try{return(yield xt.getAll({params:{productVariationId:e}})).data}catch(e){throw new Error(e)}}))}(t).then((e=>{c(!1),l(e)})).catch((()=>{c(!1)}))}),[]);return n.createElement(wt,null,n.createElement(z.Z,{className:"header",justify:"space-between"},n.createElement(X.Z,null,n.createElement(J.Z.Title,{level:4},a("Product.Variation.Suppliers.VariationSuppliersList"))),n.createElement(X.Z,null,n.createElement(d.Z,{icon:n.createElement(H.Z,null),type:"primary",onClick:()=>{(null==i?void 0:i.some((e=>-1===e.id)))||l((e=>[{id:-1,supplier_product_number:"",supplier_product_name:"",price_value:void 0,delivery_days:void 0,minimum_quantity:void 0,supplier:null,unit:null},...e]))}},a("Global.Create")))),o?n.createElement(r.aN,null):n.createElement(n.Fragment,null,null==i?void 0:i.map(((e,a)=>n.createElement(kt,{initialValues:e,key:`supplier-${a}`,isPending:u===e.id,onRemove:()=>(e=>{l((t=>t.filter((t=>t.id!==e)))),-1!==e&&b(e)})(e.id),onSubmit:a=>((e,a)=>{m(e);const{supplier:n,currency:i,unit:r,supplier_product_number:o}=a,c=Ft(a,["supplier","currency","unit","supplier_product_number"]),s=Object.assign({unit_id:null==r?void 0:r.id,currency_id:null==i?void 0:i.id,supplier_id:null==n?void 0:n.id,product_variation_id:t,supplier_product_number:String(o)},c);p({id:-1===e?void 0:e,values:s},{onSuccess:t=>{-1===e&&l((e=>e.map((e=>-1===e.id?t:e))))},onSettled:()=>{m(-2)}})})(null==e?void 0:e.id,a)})))))};const wt=C.ZP.div`
  & .header {
    padding: 16px 0;

    & button {
      min-width: 180px;
    }
  }
`;var Ct=a(86317),Nt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var jt=({onSubmit:e,isPending:t,initialValues:a})=>{const[i]=F.Z.useForm(),{Item:l}=F.Z,{t:o}=(0,s.$)();(0,n.useEffect)((()=>{a&&i.setFieldsValue(a)}),[a]);const c=e=>o("Global.InputPlaceholder",{title:e});return n.createElement(Se.FormContainer,{form:i,layout:"vertical",onFinish:e,initialValues:{translate:[{name:"",locale:void 0,description:"",preview_text:"",meta_keywords:"",technical_data:"",meta_description:""}]}},n.createElement(F.Z.List,{name:"translate"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,0===e.length?n.createElement(r.cm,{title:o("Product.Variation.NoTextMsg"),onClick:()=>t(null,0)}):e.map(((e,i)=>{var{key:s,name:u,fieldKey:m}=e,p=Nt(e,["key","name","fieldKey"]);return n.createElement(Se.FieldListDivider,{key:s},n.createElement(z.Z,{gutter:16},n.createElement(X.Z,{span:24},n.createElement(l,{label:o("Global.Name")},n.createElement(T.Z.Group,{compact:!0,style:{display:"flex",flex:1}},n.createElement(l,Object.assign({},p,{noStyle:!0,name:[u,"locale"],fieldKey:[m,"locale"],rules:[{required:!0}]}),n.createElement(Ct.S,{isGroup:!0})),n.createElement(l,Object.assign({},p,{noStyle:!0,name:[u,"name"],fieldKey:[m,"name"],rules:[{required:!0}]}),n.createElement(T.Z,{placeholder:c(o("Global.Name")),suffix:n.createElement(r.os,{className:"icon"})}))))),n.createElement(X.Z,{span:12},n.createElement(l,{name:[u,"meta_description"],fieldKey:[m,"meta_description"],label:o("Product.Variation.Texts.MetaDescription")},n.createElement(T.Z,{placeholder:c(o("Product.Variation.Texts.MetaDescription")),suffix:n.createElement(r.os,{className:"icon"})}))),n.createElement(X.Z,{span:12},n.createElement(l,{name:[u,"meta_keywords"],fieldKey:[m,"meta_keywords"],label:o("Product.Variation.Texts.MetaKeywords")},n.createElement(T.Z,{placeholder:c(o("Product.Variation.Texts.MetaKeywords")),suffix:n.createElement(r.os,{className:"icon"})}))),n.createElement(X.Z,{span:12},n.createElement(l,{name:[u,"description"],fieldKey:[m,"description"],rules:[{required:!0}],label:o("Global.Description")},n.createElement(r.H4,null))),n.createElement(X.Z,{span:12},n.createElement(l,{name:[u,"technical_data"],fieldKey:[m,"technical_data"],label:o("Product.Variation.Texts.TechnicalData")},n.createElement(r.H4,null))),n.createElement(X.Z,{span:24},n.createElement(l,{name:[u,"preview_text"],fieldKey:[m,"preview_text"],label:o("Product.Variation.Texts.PreviewText")},n.createElement(r.H4,null)))),n.createElement(z.Z,{justify:"end",gutter:8},0===i?n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>t(null,0),icon:n.createElement(E.Z,null)})):n.createElement(X.Z,null,n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",onClick:()=>a(u),icon:n.createElement(Ne.Z,null)}))))}))))),n.createElement(r.Ow,{isPending:t}))};var Mt=({onCallback:e,singleData:t,isFetching:a,variationId:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/text-tab`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(i,e)));return n.createElement(n.Fragment,null,a?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.Texts")})}):n.createElement(jt,{initialValues:t,onSubmit:t=>{o({values:t},{onSuccess:e})},isPending:c}))};var qt=({form:e,vatProps:t,countryProps:a,selectedCountryIDs:i,setSelectedCountryIDs:r})=>{const{t:l}=(0,s.$)(),[o,c]=(0,n.useState)();(0,n.useEffect)((()=>{var t,n,i;if(e.getFieldValue("productVariationVats")){const r=e.getFieldValue("productVariationVats"),l=(null===(t=null==a?void 0:a.fieldKey)||void 0===t?void 0:t[0])||0;r&&(null===(n=r[l])||void 0===n?void 0:n.country)&&c(null===(i=r[l])||void 0===i?void 0:i.country)}}),[]);return n.createElement(n.Fragment,null,n.createElement(X.Z,{flex:1},n.createElement(F.Z.Item,Object.assign({},a,{rules:[{required:!0}],label:l("Country.Title")}),n.createElement(ee.O,{maxHeight:200,onChange:a=>{var n;c(a);const i=e.getFieldValue("productVariationVats"),l=i.map((e=>{var t;return null===(t=null==e?void 0:e.country)||void 0===t?void 0:t.id}));r(l);return i[null===(n=t.name)||void 0===n?void 0:n[0]].id=void 0,e.setFieldsValue({productVariationVats:i}),a},filterFn:e=>!(null==i?void 0:i.includes(e.id))}))),n.createElement(X.Z,{flex:1},n.createElement(F.Z.Item,Object.assign({},t,{rules:[{required:!0}],label:l("Country.Field.Vat")}),n.createElement(je.Z,{showSearch:!0,placeholder:l("Global.SelectPlaceholder",{title:l("Country.Field.Vat")})},null==o?void 0:o.vats.map((e=>n.createElement(je.Z.Option,{key:e.id,value:e.id||0},e.number," - ",e.value)))))))};var At=({onSubmit:e,isPending:t,initialValues:a})=>{const{t:i}=(0,s.$)(),[l]=F.Z.useForm(),[o,c]=(0,n.useState)();(0,n.useEffect)((()=>{a&&(l.setFieldsValue(a),c(a.productVariationVats.map((e=>e.country.id))))}),[a]);const u=(0,n.useCallback)(((e,t)=>{var a,n;const i=l.getFieldValue("productVariationVats"),r=null===(n=null===(a=null==i?void 0:i[e])||void 0===a?void 0:a.country)||void 0===n?void 0:n.id;c((e=>null==e?void 0:e.filter((e=>r!==e)))),t(e)}),[]);return n.createElement(F.Z,{form:l,layout:"vertical",onFinish:e,name:"variation-vats-form"},n.createElement(F.Z.List,{name:"productVariationVats"},((e,{add:t,remove:a})=>n.createElement(n.Fragment,null,0===e.length?n.createElement(r.cm,{title:i("Product.Variation.NoVatMsg"),onClick:()=>t(null,0)}):e.map((({key:e,name:i,fieldKey:r},s)=>n.createElement(Se.FieldListDivider,{key:e},n.createElement(z.Z,{gutter:16,align:"middle"},n.createElement(qt,{form:l,selectedCountryIDs:o,setSelectedCountryIDs:c,vatProps:{name:[i,"id"],fieldKey:[r,"id"]},countryProps:{name:[i,"country"],fieldKey:[r,"country"]}}),0===s&&n.createElement(X.Z,{style:{marginTop:4}},n.createElement(d.Z,{ghost:!0,type:"primary",onClick:()=>t(null,0),icon:n.createElement(E.Z,null)})),n.createElement(X.Z,{style:{marginTop:4}},n.createElement(d.Z,{ghost:!0,danger:!0,type:"primary",icon:n.createElement(Ne.Z,null),onClick:()=>{u(i,a)}}))))))))),n.createElement(r.Ow,{isPending:t}))};var Lt=({onCallback:e,singleData:t,variationId:a,isFetching:i})=>{const{t:l}=(0,s.$)(),{mutate:o,isLoading:c}=(0,g.useMutation)((({values:e})=>((e,t)=>ge(void 0,void 0,void 0,(function*(){try{const a=yield oe().put(`${Ee}/${e}/vats`,t);return W.ZP.success(m.ZP.t("Global.UpdatedSuccessfully",{title:m.ZP.t("Product.Variation.Title")})),a.data.data}catch(e){throw new Error(e)}})))(a,e)));return n.createElement(n.Fragment,null,i?n.createElement(r.aN,{title:l("Product.LoadingTabInfo",{Tab:l("Product.Tab.CountryVats")})}):n.createElement(At,{initialValues:t,onSubmit:t=>{const{productVariationVats:a}=t,n={productVariationVats:a.map((({id:e})=>({vat_id:e})))};o({values:n},{onSuccess:e})},isPending:c}))},Gt=a(70937),Kt=a(14031),Dt=(a(8897),a(37144)),$t=a(2365),Ut=a(42027);const Qt=C.ZP.div`
  /* to hide the error message completely */
  .ant-form-item-explain.ant-form-item-explain-connected {
    display: none;
  }
`;var Rt=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function l(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):i(e.value).then(l,o)}c((n=n.apply(e,t||[])).next())}))},Bt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const Ht=e=>{var{editing:t,dataIndex:a,title:i,inputType:r,record:l,index:o,children:c,required:s=!1}=e,u=Bt(e,["editing","dataIndex","title","inputType","record","index","children","required"]);let d;if("number"===r)d=n.createElement(ne.Z,{min:0});else d=n.createElement(T.Z,null);return n.createElement("td",Object.assign({},u),t?n.createElement(F.Z.Item,{name:a,style:{margin:0},rules:[{message:"",required:s}]},d):c)},Wt=new p.Vx("inventories",m.ZP.t("Product.Stock.Correction.Title"));var zt=({onSubmit:e,isPending:t})=>{const[a]=(0,B.KO)(ue),[i,r]=(0,n.useState)(void 0),[l,o]=(0,n.useState)(!0),[c]=F.Z.useForm(),{t:u}=(0,s.$)(),[d,m]=(0,n.useState)();(0,n.useEffect)((()=>{if(a){o(!0);const e={productVariationId:a};i&&Object.assign(e,{warehouseId:i}),Wt.getAll({params:e}).then((e=>{m(e.data),o(!1)})).catch((()=>{o(!1)}))}}),[a,i]);const[p,b]=(0,n.useState)(""),y=e=>(null==e?void 0:e.id)===p,v=()=>{b("")},g=[{key:"id",dataIndex:"id",title:u("Global.ID")},{type:"number",key:"storage_variation_id",dataIndex:"storage_variation_id",title:u("Product.Stock.Correction.StorageVariationID")},{key:"purchase_quantity",dataIndex:"purchase_quantity",title:u("Product.Stock.Correction.PurchaseQuantity")},{key:"picked_quantity",dataIndex:"picked_quantity",title:u("Product.Stock.Correction.PickedQuantity")},{key:"packed_quantity",dataIndex:"packed_quantity",title:u("Product.Stock.Correction.PackedQuantity")},{key:"reserved_quantity",dataIndex:"reserved_quantity",title:u("Product.Stock.Correction.ReservedQuantity")},{key:"delta_quantity",dataIndex:"delta_quantity",title:u("Product.Stock.Correction.DeltaQuantity")},{editable:!0,required:!0,key:"quantity",type:"number",dataIndex:"quantity",title:u("Product.Stock.Correction.Quantity")},{title:u("Product.Stock.Correction.Operation"),dataIndex:"operation",render:(t,a)=>y(a)?n.createElement("span",null,n.createElement(J.Z.Link,{onClick:()=>(t=>Rt(void 0,void 0,void 0,(function*(){try{const a=yield c.validateFields(),n=[...d],i=n.findIndex((e=>t===e.id));if(i>-1){const t=n[i];e({item:t,row:a}),n.splice(i,1,Object.assign(Object.assign({},t),a)),m(n),b("")}}catch(e){const t=e.errorFields.map((e=>e.name));W.ZP.error(`Fill '${t.join("', '")}' field${1===t.length?"":"s"}`)}})))(a.id),style:{marginRight:8}},u("Global.Save")),n.createElement(Dt.Z,{title:u("Product.Stock.Correction.Cancel"),onConfirm:v},n.createElement("a",null,u("Global.Cancel")))):n.createElement(J.Z.Link,{disabled:""!==p,onClick:()=>(e=>{c.setFieldsValue(e),b(null==e?void 0:e.id)})(a)},u("Global.Edit"))}],E=g.map((e=>e.editable?Object.assign(Object.assign({},e),{onCell:t=>({record:t,inputType:e.type,dataIndex:e.dataIndex,title:e.title,required:e.required,editing:y(t)})}):e));return n.createElement(n.Fragment,null,n.createElement($t.Z,{type:"info",message:n.createElement(n.Suspense,{fallback:(0,ae.Z)(u("Product.Stock.Correction.Warehouse"))},n.createElement(Kt.Z,{onChange:e=>{r(null==e?void 0:e.id)}})),style:{padding:"20px",marginBottom:"12px"}}),n.createElement(Qt,null,n.createElement(F.Z,{form:c,component:!1},n.createElement(Ut.Z,{components:{body:{cell:Ht}},bordered:!0,dataSource:d,loading:t||l,columns:E,rowClassName:"editable-row",pagination:{onChange:v}}))))};var Xt=()=>{const e=new p.Vx("inventories",m.ZP.t("Product.Stock.Correction.Title")),{mutate:t,isLoading:a}=(0,g.useMutation)((({id:t,values:a})=>e.updateOne(t,a)));return n.createElement(zt,{onSubmit:({item:e,row:a})=>{const{quantity:n}=a,{id:i}=e;t({id:i,values:{quantity:n}})},isPending:a})};const Jt=()=>(console.count("DUMMY REQUESTED"),new Promise((e=>{setTimeout((()=>{e("Hello THEREEEE"),W.ZP.success("Waiting for backend api")}),1500)})));var Yt=a(50644);class ea{constructor(){this.entity="inventories",this.title=[m.ZP.t("Product.Stock.Title"),m.ZP.t("Product.Stock.Title",{count:2})],this.apiService=new p.Vx(this.entity,this.title[0]),this.tableColumns=[{key:"storage_variation",className:"hasTile",dataIndex:["storageVariation","name"],title:m.ZP.t("Product.Stock.Fields.StorageVariation")},{key:"phy",className:"hasTile",dataIndex:"quantity",title:m.ZP.t("Product.Stock.Fields.Phy"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Variation.Correction.Quantity")})},{key:"rs",className:"hasTile",dataIndex:"reserved_quantity",title:m.ZP.t("Product.Stock.Fields.Rs"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Variation.Correction.ReservedQuantity")})},{key:"rsl",dataIndex:"rsl",className:"hasTile",title:m.ZP.t("Product.Stock.Fields.Rsl"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Stock.Fields.RelativeStrengthDefined")})},{key:"rsb",dataIndex:"rsb",className:"hasTile",title:m.ZP.t("Product.Stock.Fields.Rsb"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Stock.Fields.RSB")})},{key:"net",dataIndex:"net",className:"hasTile",title:m.ZP.t("Product.Stock.Fields.Net"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Stock.Fields.NET")})},{key:"supply",className:"hasTile",dataIndex:"purchase_quantity",title:m.ZP.t("Product.Stock.Fields.PurchaseQuantity")},{key:"ri",dataIndex:"ri",className:"hasTile",title:m.ZP.t("Product.Stock.Fields.RL"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Stock.Fields.RI")})},{key:"riâ–³",className:"hasTile",dataIndex:"delta_quantity",title:m.ZP.t("Product.Stock.Fields.RLâ–³"),render:e=>(0,Yt.yL)({data:e,tooltip:m.ZP.t("Product.Stock.Fields.RIDelta")})}]}}class ta{constructor(){this.entity="movement-journals",this.title=[m.ZP.t("Product.Stock.Movement.Title"),m.ZP.t("Product.Stock.Movement.Title",{count:2})],this.apiService=new p.Vx(this.entity,this.title[0]),this.tableColumns=[{dataIndex:"id",key:"process_id",className:"hasTile",title:m.ZP.t("Product.Stock.Movement.ProcessId")},{dataIndex:"type",key:"item_movement",className:"hasTile",title:m.ZP.t("Product.Stock.Movement.ItemMovement")},{key:"pru",dataIndex:"items",className:"hasTile",render:Yt.fW,title:m.ZP.t("Product.Stock.Movement.Pru")},{className:"hasTile",key:"storage_variation",dataIndex:["items","0","storageVariation","name"],title:m.ZP.t("Product.Stock.Movement.StorageVariation")},{key:"warehouse_id",className:"hasTile",title:m.ZP.t("Product.Stock.Movement.WarehouseName"),dataIndex:["items","0","storageVariation","warehouse","name"]},{key:"batch",dataIndex:"items",className:"hasTile",render:Yt.Bv,title:m.ZP.t("Product.Stock.Movement.Batch")},{key:"quantity",dataIndex:"items",className:"hasTile",render:Yt.zC,title:m.ZP.t("Global.Quantity")},{key:"order_id",render:Yt.w7,dataIndex:"order_id",className:"hasTile number",title:m.ZP.t("Product.Stock.Movement.OrderID")},{key:"ex",dataIndex:"items",className:"hasTile",render:Yt.mf,title:m.ZP.t("Product.Stock.Movement.EX")},{key:"user",dataIndex:["creator","person","full_name"],className:"hasTile",title:m.ZP.t("Product.Stock.Movement.User")},{key:"date",className:"hasTile",render:Yt.JK,dataIndex:"created_at",title:m.ZP.t("Global.Date")}]}}class aa{constructor(){this.entity="/stock/supply",this.title=[m.ZP.t("Product.Stock.Supply.Title"),m.ZP.t("Product.Stock.Supply.Title",{count:2})],this.apiService=new p.Vx(this.entity,this.title[0]),this.tableColumns=[{key:"supplier",className:"hasTile",dataIndex:"supplier",title:m.ZP.t("Product.Stock.Supply.Supplier")},{key:"status",dataIndex:"status",className:"hasTile",title:m.ZP.t("Product.Stock.Supply.Status")}]}}var na=()=>{const{product_id:e}=(0,i.UO)();if(!e)return n.createElement(Y.Z,null);const[t]=(0,B.KO)(ue),{mutate:a,isLoading:l}=(0,g.useMutation)(Jt),{mutate:o,isLoading:c}=(0,g.useMutation)(Jt),{mutate:u,isLoading:m}=(0,g.useMutation)(Jt),{mutate:p,isLoading:b}=(0,g.useMutation)(Jt),{t:y}=(0,s.$)(),v=new ea;return n.createElement(n.Fragment,null,n.createElement(ia,null,n.createElement(d.Z,{type:"primary",block:!0,size:"large",loading:l,onClick:()=>a(),disabled:!0},y("Product.Stock.Fields.CreateReorder")),n.createElement(d.Z,{block:!0,size:"large",loading:c,onClick:()=>o(),disabled:!0},y("Product.Stock.Fields.RecalculateStocks")),n.createElement(d.Z,{block:!0,size:"large",loading:m,onClick:()=>u(),disabled:!0},y("Product.Stock.Fields.AcceptSuggestion")),n.createElement(d.Z,{block:!0,size:"large",loading:b,onClick:()=>p(),disabled:!0},y("Product.Stock.Fields.ResetQuantity"))),n.createElement(r.Xg,{module:v},n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasSearch:!0,hasNew:!1,noDescription:!0,dontNavigate:!0}),n.createElement(r.s_.ListView,{module:v,dontNavigate:!0,hasUpdate:!1,params:t?{productVariationId:t}:{}}))))};const ia=C.ZP.div`
  display: inline-flex;
  column-gap: 10px;

  padding-top: 16px;

  button {
    min-width: 14rem;
  }

  #recalculate-btn {
    background-color: #009ddc;
    color: white;
  }
  #reset-btn {
    background-color: #4a5161;
    color: white;
  }
`;var ra=()=>{const[e]=(0,B.KO)(ue),t=new ta;return n.createElement(r.Xg,{module:t},n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasNew:!1,noDescription:!0,dontNavigate:!0}),n.createElement(r.s_.ListView,{noId:!0,dontNavigate:!0,module:t,hasUpdate:!1,params:{productVariationId:e,orderBy:{created_at:"DESC"}}})))};var la=()=>{const e=new aa;return n.createElement(r.Xg,{module:e},n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasSearch:!0}),n.createElement(r.s_.ListView,{module:e,noId:!0})))};var oa={TabsContainer:C.ZP.div`
  padding: 20px 0;

  .stock-tabs {
    overflow: initial !important;

    .ant-tabs-tab.single-tab.ant-tabs-tab-active {
      background-color: #37b053;
    }
    .ant-tabs-nav::before {
      border: none;
    }
  }
`};const{TabPane:ca}=c.Z;var sa=()=>{const[e]=(0,B.KO)(ue),{t:t}=(0,s.$)(),[a]=(0,n.useState)(!1);return n.createElement(oa.TabsContainer,null,a?n.createElement(r.aN,null):n.createElement(c.Z,{className:"stock-tabs",type:"card",defaultActiveKey:"1",animated:!0,destroyInactiveTabPane:!0},n.createElement(ca,{className:"single-tab",tab:t("Product.Stock.Title"),key:"1"},n.createElement(na,null)),n.createElement(ca,{className:"single-tab",tab:t("Product.Stock.Correction.Title"),key:"2"},n.createElement(Xt,null)),n.createElement(ca,{className:"single-tab",tab:t("Product.Stock.Movement.Title"),key:"3"},n.createElement(ra,null)),n.createElement(ca,{className:"single-tab",tab:t("Product.Stock.IncomingItem.Title"),key:"5"},n.createElement(Gt.Z,{variation:e})),n.createElement(ca,{className:"single-tab",tab:t("Product.Stock.Supply.Title"),key:"4",disabled:!0},n.createElement(la,null))))};var ua={TabsContainer:C.ZP.div`
  padding: 20px 0;

  & .variation-tabs {
    overflow: initial !important;

    & .ant-tabs-nav::before {
      border: none;
    }

    & .multi-switch.ant-switch-checked {
      background-color: green !important;
    }
  }
`},da=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const{TabPane:ma}=c.Z;var pa=({product:e,productId:t,variationId:a,onCreate:i})=>{const[,l]=(0,B.KO)(ue),{t:o}=(0,s.$)(),[u]=(0,B.KO)(U.S),d=u.is_mlm_active,[m,p]=(0,n.useState)(!1),[b,y]=(0,n.useState)("1"),[v,E]=(0,n.useState)(!1),{refetch:P,isFetching:f,data:h,isLoading:Z}=(0,g.useQuery)(["variation",a],(()=>a?Pe(a):Promise.resolve({})),{onSuccess:e=>{p("multi"===(null==e?void 0:e.type))}});(0,n.useEffect)((()=>{l(a)}),[a]);return n.createElement(ua.TabsContainer,null,Z||!h?n.createElement(r.aN,{title:o("Product.VariationLoader")}):n.createElement(c.Z,{animated:!0,type:"card",defaultActiveKey:"1",activeKey:b,className:"variation-tabs",onChange:e=>y(e)},n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Settings"),key:"1"},n.createElement(Zt,{isMulti:m,product:e,productId:t,singleData:h,variationId:a,onCallback:e=>{!a&&i&&i(e.id)}})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Texts"),key:"2",disabled:!a},n.createElement(Mt,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{translate:h.translate}})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.CountryVats"),key:"5",disabled:!a},n.createElement(Lt,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{productVariationVats:h.productVariationVats}})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Prices"),key:"3",disabled:!a},n.createElement(ct,{variation:h,isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{userVariationPrices:h.userVariationPrices,productVariationPrices:h.productVariationPrices}})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Suppliers"),key:"10",disabled:!a},n.createElement(It,{singleData:null==h?void 0:h.productVariationSuppliers})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Packages"),key:"4",disabled:!a},n.createElement(Be,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{packages:h.packages}})),n.createElement(ma,{key:"6",className:"single-tab",disabled:!a,tab:n.createElement(w.Z,null,n.createElement("span",null,o("Product.Tab.MultiVariation")),n.createElement(Q.Z,{checked:m,className:"multi-switch",onChange:e=>{a&&(E(!0),he(Number(a),{product_id:t,is_main:null==h?void 0:h.is_main,type:m?"single":"multi",availability_id:null==h?void 0:h.availability.id}).then((()=>{p(e),E(!1)})).catch((()=>E(!1))))},loading:v}))},m?n.createElement(De,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{multiProductVariations:h.multiProductVariations.map((e=>{var{multi_variation_quantity:t}=e,a=da(e,["multi_variation_quantity"]);return{quantity:Number(t),variation:Object.assign({multi_variation_quantity:Number(t)},a)}}))}}):n.createElement(R.Z,{style:{marginTop:64},description:o("Product.Tab.ShouldActiveMultiProductVariation")})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Attributes"),key:"7",disabled:!a},n.createElement(Ce,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{attributes:h.attributes,productVariationCategories:h.productVariationCategories}})),n.createElement(ma,{className:"single-tab",tab:o("Product.Tab.Files"),key:"8",disabled:!a},n.createElement(Ae,{isFetching:f,variationId:h.id,onCallback:()=>P(),singleData:{productVariationFiles:h.productVariationFiles}})),n.createElement(ma,{className:"single-tab",closable:!1,tab:o("Product.Tab.Stock"),key:"9",disabled:!a},n.createElement(sa,null)),n.createElement(ma,{className:"single-tab",closable:!1,tab:o("Product.Tab.MLM"),key:"11",disabled:!d||!a},n.createElement(me,null))))};const{TabPane:ba}=c.Z;var ya=()=>{const e=(0,i.s0)(),{t:t}=(0,s.$)(),{product_id:a,variation_id:o}=(0,i.UO)(),d=(0,n.useMemo)((()=>new l.Z),[]),m=[...d.breadcrumbItems,{path:"",breadcrumbName:a?`${d.title[0]} - ${a}`:`New ${d.title[0]}`}],[p,b]=(0,n.useState)([]),[y,v]=(0,n.useState)("-1"),[g,E]=(0,n.useState)(!1),[P,f]=(0,n.useState)();(0,n.useEffect)((()=>{a&&(E(!0),d.apiService.getOne(Number(a)).then((e=>{f(e),E(!1);const t=o?Number(o):e.main_variation_id;t?(v(String(t)),b((e=>[...e.filter((e=>"0"!==e.key)),{key:String(t),title:String(t),variationId:t}]))):v(String(-2))})))}),[a]);const h=e=>{b((t=>[...t.filter((e=>"0"!==e.key)),{key:String(e),title:String(e),variationId:e}])),v(String(e))};return n.createElement(r.Xg,{module:d},n.createElement(r.Xg.Breadcrumb,{routes:m}),n.createElement(r.Xg.Panel,{noOverflow:!0},n.createElement($.TabsContainer,null,n.createElement(c.Z,{hideAdd:!0,type:"editable-card",onEdit:(e,t)=>{"remove"===t&&(v("2"),b((t=>t.filter((t=>t.key!==e)))))},onChange:e=>{v(e)},className:"product-tabs",defaultActiveKey:y},n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.Product"),key:"-1"},g?n.createElement(r.aN,{title:t("Product.Loader")}):n.createElement(u.default,{singleData:P,onCallback:t=>{a?f(t):e(`/admin/products/manage/${t.id}`)}})),n.createElement(ba,{key:"-2",tab:t("Product.Tab.Variations"),closable:!1,className:"single-tab",disabled:!a},a&&n.createElement(D,{onNew:()=>{p.some((e=>"0"===e.key))?v("0"):(v("0"),b((e=>[...e,{key:"0",variationId:null,title:"New Variation"}])))},onUpdate:e=>{p.some((t=>t.key===String(e)))?v(String(e)):(v(String(e)),b((t=>[...t,{key:String(e),title:String(e),variationId:e}])))},productId:+a})),p.length>0&&P&&p.map((e=>n.createElement(ba,{className:"single-tab",closable:!0,tab:e.title,key:e.key},n.createElement(pa,{product:P,onCreate:h,variationId:e.variationId,productId:Number(a)})))),n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.MultiChannel"),key:"-3",disabled:!0}),n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.Characteristics"),key:"-5",disabled:!0}),n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.Media"),key:"-6",disabled:!0}),n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.Statistic"),key:"-8",disabled:!0}),n.createElement(ba,{className:"single-tab",closable:!1,tab:t("Product.Tab.Files"),key:"-9",disabled:!0})))))};function va(){return n.createElement(i.Z5,null,n.createElement(i.AW,{path:"",element:n.createElement(o,null)}),n.createElement(i.AW,{path:"manage",element:n.createElement(ya,null)}),n.createElement(i.AW,{path:"manage/:product_id",element:n.createElement(ya,null)}),n.createElement(i.AW,{path:"manage/:product_id/:variation_id",element:n.createElement(ya,null)}))}},41156:function(e,t,a){var n=a(38056),i=a(37144),r=a(27378);t.Z=({children:e,onConfirm:t,isDisabled:a=!1,placement:l="bottom"})=>r.createElement(i.Z,{placement:l,disabled:a,onConfirm:t,okText:n.ZP.t("Global.Yes"),cancelText:n.ZP.t("Global.Cancel"),title:n.ZP.t("Global.DeleteSelectedRows?")},e)},95699:function(e){e.exports=JSON.parse('{"AW":"/sedsdsdttings/number-series/*"}')}}]);