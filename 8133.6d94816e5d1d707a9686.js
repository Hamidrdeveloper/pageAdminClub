"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8133],{39154:function(e,t,n){n.d(t,{JK:function(){return o},aT:function(){return r},DL:function(){return s}});var a=n(31675),i=n(27378),l=n(31602);n(88500);const o=e=>i.createElement("span",null,e?(0,a.Wb)(new Date((e||"").replace(/'-'/g,"/"))):"-"),r=e=>i.createElement(l.rU,{to:`/admin/dashboard/partner/${e}`},i.createElement("span",null,e)),s=(e,t)=>{const{competitionRule:n}=t,a=n.competition_id;return i.createElement(l.rU,{to:`/admin/competition/${a}/users/${e}`},i.createElement("span",null,e))}},88500:function(e,t,n){n(47728),n(2010)},63750:function(e,t,n){n.d(t,{Z:function(){return r},f:function(){return s}});var a=n(38056),i=(n(95171),n(34234)),l=n(27378),o=n(93412);n(47728),n(66400);class r{constructor(){this.entity="/competition-rules",this.title=[a.ZP.t("Competition.Rule.Title"),a.ZP.t("Competition.Rule.Title",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,l.lazy)((()=>Promise.resolve().then(n.bind(n,65686)))),this.detailColumns=[{key:"id",label:"ID"},{key:"competition_id",label:a.ZP.t("Competition.CompetitionId")},{key:"competition_name",label:a.ZP.t("Competition.CompetitionName")},{key:"description",label:a.ZP.t("Global.Description")},{key:"is_editable",label:a.ZP.t("Competition.isEditable")},{key:"points",label:a.ZP.t("Competition.Reward.Points")}],this.tableColumns=[{key:"title",dataIndex:"title",title:a.ZP.t("Competition.Rule.RuleName")},{key:"competition_title",dataIndex:["competition","title"],title:a.ZP.t("Competition.CompetitionName")},{className:"hasTile",key:"ruleType_title",dataIndex:["competitionRuleType","slug"],title:a.ZP.t("Competition.Rule.RuleType")},{key:"achieve_career_step",dataIndex:["achieveCareerStep","name"],title:a.ZP.t("Competition.Rule.CareerLevel")},{render:o.y8,key:"product_variation",dataIndex:"productVariations",title:a.ZP.t("Competition.Rule.ProductVariation")},{key:"points",dataIndex:"points",title:a.ZP.t("Competition.Rule.Point")},{key:"min_amount",className:"number",dataIndex:"min_amount",title:a.ZP.t("Competition.Rule.MinimumOrderValue")}]}}class s{constructor(){this.entity="/competition-rule-types",this.title=[a.ZP.t("Competition.Rule.RuleType"),a.ZP.t("Competition.Rule.RuleType",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0])}}},27498:function(e,t,n){var a=n(27378);t.Z=({title:e})=>a.createElement("div",null,"Invalid ",e," ",a.createElement("pre",null,"Head back to previous page"))},93412:function(e,t,n){n.d(t,{JK:function(){return P},lX:function(){return w},y8:function(){return _},MF:function(){return k},xe:function(){return x},yP:function(){return T},Pb:function(){return S},U$:function(){return I},ID:function(){return R}});var a=n(95985),i=(n(80631),n(38056)),l=n(89729),o=(n(2010),n(33996)),r=n(31675),s=n(34940),c=n(6110),u=n(56591),m=n(19511),d=n(12606),p=n(37144),b=n(63993),E=n(39338),v=n(27378),y=n(60071),f=n(56552),h=n(96740),C=n(31602),g=(n(7284),n(59649),n(82370)),Z=n(89820);const P=e=>v.createElement("span",null,e?(0,r.Wb)(new Date(e.split(" ")[0].replace(/'-'/g,"/"))):"-"),w=e=>v.createElement(v.Fragment,null,"string"==typeof e?v.createElement(b.Z,{ellipsis:e.length>50&&{suffix:"more",symbol:"...",tooltip:e}},v.createElement("strong",{dangerouslySetInnerHTML:{__html:e}})):v.createElement("span",null,v.createElement("strong",null,"-"))),_=e=>v.createElement("span",null,e.map((e=>v.createElement(s.Z,{color:"geekblue",key:e.id},e.name)))),k=(e,t)=>{const{isLoading:n,mutate:a}=(0,f.useMutation)(g.ZP);return v.createElement(u.Z,{type:"dashed",loading:n,onClick:()=>{a(t.id,{onSuccess:e=>{c.ZP.success(e)}})},disabled:"results_completed"===(null==t?void 0:t.status)},i.ZP.t("Competition.Calculate"))},x=(e,t)=>{const{isLoading:n,mutate:a}=(0,f.useMutation)(g.Ws),l=(0,v.useCallback)((()=>{a(t.id,{onSuccess:e=>{c.ZP.success(e)}})}),[]);return v.createElement(u.Z,{loading:n,onClick:l,disabled:"results_completed"!==(null==t?void 0:t.status)},i.ZP.t("Competition.RedeemRewards"))},T=(e,t)=>{const{t:n}=(0,y.$)(),i=(0,h.s0)();return v.createElement(m.Z,{className:"action-btn",title:n("Competition.CopyCompetitionToolTip")},v.createElement(u.Z,{onClick:()=>{(0,g.be)(t.id).then((e=>{c.ZP.success(n("Competition.CopyCompetitionMessage")),i(`/admin/competition/manage/${null==e?void 0:e.id}`)})).catch((e=>{d.Z.error(e)}))},shape:"default",icon:v.createElement(a.Z,null)}))},S=(e,t)=>{var n;const a=e.roles.map((e=>e.slug))[0],i=(0,r.by)({role:a,profile:e});return v.createElement(C.rU,{to:i},e?null===(n=null==e?void 0:e.person)||void 0===n?void 0:n.full_name:t.user_id)},I=(e,t)=>{const{t:n}=(0,y.$)(),{mutateAsync:a,isLoading:i}=(0,f.useMutation)(l.Y),{setRequestUpdate:r}=(0,o.xV)(),{is_participant:s,must_accept_terms:m}=t,d=(0,v.useCallback)(((e=!1)=>{a({competitionId:t.id,hasAcceptedConditions:e},{onSuccess:()=>{r(!0),c.ZP.success(n(s?"Competition.YouNoLongerParticipatingInThisCompetition":"Competition.YouAreNowParticipatingInThisCompetition"))}})}),[]);return m?v.createElement(p.Z,{placement:"top",cancelText:n("Global.No"),disabled:!s,onConfirm:()=>d(!0),okText:n(s?"Competition.YesCancelMyParticipation":"Competition.YesParticipate"),title:n(s?"Competition.YouMustAcceptTermsAndConditionsToCancel":"Competition.YouMustAcceptTermsAndConditionsToParticipate")},v.createElement(u.Z,{loading:i,disabled:!s},n(s?"Competition.CancelParticipation":"Competition.Participate"))):v.createElement(u.Z,{onClick:()=>d(),loading:i,disabled:!s},n(s?"Competition.CancelParticipation":"Competition.Participate"))},R=(e,t)=>{const[n]=(0,E.KO)(Z.L),a=t.user_id;return v.createElement(C.rU,{to:`/admin/competition/${n}/users/${a}`},v.createElement("span",null,a))}},58822:function(e,t,n){var a=n(33996),i=(n(33699),n(27378)),l=(n(66400),n(63750));t.Z=e=>i.createElement(a.LE,Object.assign({hasNew:!1,searchParam:"search",module:new l.f,optionSelector:{label:"title",value:"id"}},e))},84300:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(38056),i=n(34234),l=n(39338),o=n(27378),r=n(62500),s=(n(1130),n(59748)),c=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};const u=(0,l.cn)([]),m=new i.Vx("career-steps",a.ZP.t("Competition.Rule.CareerStep")),d=(0,s.el)((e=>({queryKey:["careerStep",e(u)],queryFn:()=>c(void 0,void 0,void 0,(function*(){return(yield m.getAll({pagination:{per_page:20}})).data}))})));var p=function({value:e,onChange:t,maxHeight:n,isMulti:s=!1,placeholder:c=a.ZP.t("Global.SelectPlaceholder",{title:a.ZP.t("Competition.Rule.CareerStep")}),disabled:u=!1,menuPlacement:m="bottom"}){const[p]=(0,l.KO)(d);return o.createElement(r.ZP,{isClearable:!0,isMulti:s,options:p,isDisabled:u,onChange:e=>null==t?void 0:t(e),placeholder:c,maxMenuHeight:n,menuPlacement:m,menuPortalTarget:document.body,getOptionLabel:e=>null==e?void 0:e.name,getOptionValue:e=>String(null==e?void 0:e.id),theme:e=>(0,i.$p)(e),styles:{menuPortal:e=>Object.assign(Object.assign({},e),{zIndex:9999})},classNamePrefix:"react-select",value:e})}},65686:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(38056),i=(n(95171),n(34234)),l=n(39338),o=n(27378),r=n(56552),s=n(27498),c=n(31366),u=n(33996),m=n(32383),d=n(3288),p=n(25724),b=n(35062),E=n(10374),v=n(60071),y=n(58822),f=n(84300);n(47728),n(66400);var h=({initialValues:e,isPending:t,onSubmit:n})=>{var a;const[i]=d.Z.useForm(),{t:l}=(0,v.$)(),[r,s]=(0,o.useState)(null==e?void 0:e.competitionRuleType),{Item:h}=d.Z;(0,o.useEffect)((()=>{var t;e&&i.setFieldsValue(Object.assign(Object.assign({},e),{translations:null!==(t=null==e?void 0:e.translations)&&void 0!==t?t:[{locale:void 0,description:""}]}))}),[e]);const C=(0,o.useMemo)((()=>{switch(null==r?void 0:r.slug){case"Career Step":return o.createElement(o.Suspense,{fallback:(0,m.Z)(l("Competition.Rule.AchieveCareerStep"))},o.createElement(h,{name:"achieveCareerStep",rules:[{required:!0}],label:l("Competition.Rule.AchieveCareerStep")},o.createElement(f.Z,null)));case"Ordered Products":return o.createElement(h,{name:"productVariations",label:l("Competition.Rule.ProductVariation"),rules:[{required:!0}]},o.createElement(c.Z,{isMulti:!0,menuPlacement:"bottom"}));default:return o.createElement(h,{name:"min_amount",label:l("Global.Amount"),rules:[{required:!0}]},o.createElement(p.Z,{min:0,placeholder:l("Global.InputPlaceholder",{title:l("Global.Amount")})}))}}),[r]);return o.createElement(d.Z,{form:i,name:"rules-form",layout:"vertical",onFinish:n.bind(void 0,i.resetFields),initialValues:{translations:null!==(a=null==e?void 0:e.translations)&&void 0!==a?a:[{locale:void 0,description:""}]}},o.createElement(b.Z,{gutter:[16,0]},o.createElement(E.Z,{span:12},o.createElement(o.Suspense,{fallback:(0,m.Z)(l("Competition.Rule.RuleType"))},o.createElement(h,{name:"competitionRuleType",label:l("Competition.Rule.RuleType"),rules:[{required:!0}]},o.createElement(y.Z,{onChange:e=>{s(e)}})))),o.createElement(E.Z,{span:12},o.createElement(h,{name:"points",label:l("Competition.Rule.Point"),rules:[{required:!0}]},o.createElement(p.Z,{min:0,placeholder:l("Global.InputPlaceholder",{title:l("Competition.Rule.Point")})})))),o.createElement(b.Z,{gutter:[16,0]},o.createElement(E.Z,{span:12},C),o.createElement(E.Z,{span:12},o.createElement(h,{name:"careerSteps",label:l("SidePanel.CareerStep")},o.createElement(f.Z,{isMulti:!0})))),o.createElement(u.jh,{isDescriptionRequired:!1,hasLocale:!0,isTitleRequired:!1,name:"translations",inputName:"title",isEditor:!0}),o.createElement(u.Ow,{isPending:t}))},C=n(89820),g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};const Z=new i.Vx("competition-rules",a.ZP.t("Competition.Rule.Title"));var P=({onCallback:e,singleData:t})=>{var n;const[a]=(0,l.KO)(C.L);if(!a&&!(null==t?void 0:t.competition_id))return o.createElement(s.Z,{title:"competition ID"});const c=null!==(n=null!=a?a:null==t?void 0:t.competition_id)&&void 0!==n?n:0,[u,m]=(0,o.useState)(t),{mutate:d,isLoading:p}=(0,r.useMutation)((({values:e,id:t})=>t?Z.updateOne(t,e):Z.createOne(e)));return o.createElement(h,{isPending:p,initialValues:t,onSubmit:(t,n)=>{var a;const{achieveCareerStep:l,competitionRuleType:o,productVariations:r,translations:s,careerSteps:p}=n,b=g(n,["achieveCareerStep","competitionRuleType","productVariations","translations","careerSteps"]),E=Object.assign(Object.assign({},b),{competition_id:c,achieve_career_step_id:null==l?void 0:l.id,competition_rule_type_id:null==o?void 0:o.id,product_variation_ids:null==r?void 0:r.map((e=>e.id)),career_step_ids:p?null==p?void 0:p.map((e=>null==e?void 0:e.id)):null,translate:s?(0,i.mj)(s):void 0});d({id:null!==(a=null==u?void 0:u.id)&&void 0!==a?a:void 0,values:E},{onSuccess:n=>{t(),m(n),null==e||e(n)}})}})}},22301:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(38056),i=(n(95171),n(34234)),l=n(39338),o=n(27378),r=n(56552),s=n(27498),c=n(31366),u=n(33996),m=n(3288),d=n(35062),p=n(10374),b=n(25724),E=n(9172),v=n(56591),y=n(60071),f=(n(90188),function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n});const{Item:h}=m.Z;var C=({isPending:e,initialValues:t,onSubmit:n,onSecondaryClick:a})=>{var i;const{t:l}=(0,y.$)(),[r]=m.Z.useForm(),[s,C]=(0,o.useState)(null!==(i=null==t?void 0:t.type)&&void 0!==i?i:"point");(0,o.useEffect)((()=>{var e;t&&r.setFieldsValue(Object.assign(Object.assign({},t),{translations:null!==(e=null==t?void 0:t.translations)&&void 0!==e?e:[{locale:void 0,description:""}]}))}),[t]);return o.createElement(m.Z,{form:r,name:"reward-form",layout:"vertical",onFinish:n.bind(void 0,r.resetFields),initialValues:{translations:[{locale:void 0,description:""}],type:s}},o.createElement(d.Z,{gutter:[16,0]},o.createElement(p.Z,{span:8},o.createElement(h,{name:"points",label:l("Competition.Reward.Points"),rules:[{required:!0}]},o.createElement(b.Z,{min:0,placeholder:l("Global.InputPlaceholder",{title:l("Competition.Reward.Points")})}))),o.createElement(p.Z,{span:8},o.createElement(h,{name:"type",label:l("Competition.Attendee.RewardType")},o.createElement(E.Z,{onChange:e=>{C(e)},options:[{label:l("Competition.Reward.Point"),value:"point"},{label:l("Competition.Reward.ProductVariation"),value:"product_variation"},{label:l("Global.Amount"),value:"amount"}]}))),o.createElement(p.Z,{span:8},"product_variation"===s&&o.createElement(h,{name:"productVariations",label:l("Competition.Reward.ProductVariation"),rules:[{required:!0}]},o.createElement(c.Z,{isMulti:!0,menuPlacement:"bottom"})),("amount"===s||"point"===s)&&o.createElement(h,{name:"amount",label:l("Global.Amount"),rules:[{required:!0}]},o.createElement(b.Z,{placeholder:l("Global.InputPlaceholder",{title:l("Global.Amount")})})))),o.createElement(m.Z.List,{name:"translations"},(e=>e.map((e=>{var{name:t,fieldKey:n}=e,a=f(e,["name","fieldKey"]);return o.createElement(o.Fragment,null,o.createElement(h,Object.assign({},a,{name:[t,"description"],fieldKey:[n,"description"],rules:[{required:!0}],label:l("Global.Description")}),o.createElement(u.H4,null)))})))),o.createElement(u.Ow,{isPending:e,Secondary:a&&o.createElement(v.Z,{onClick:a},l("Competition.Previous"))}))},g=n(89820),Z=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};const P=new i.Vx("competition-rewards",a.ZP.t("Competition.Reward.Title"));var w=({competitionId:e,singleData:t,onCallback:n,onError:a,onSecondaryClick:c})=>{const[u]=(0,l.KO)(g.L);if(!e&&!u)return o.createElement(s.Z,{title:"Competition ID"});const{mutate:m,isLoading:d}=(0,r.useMutation)((({id:e,values:t})=>e?P.updateOne(e,t):P.createOne(t)));return o.createElement(C,{onSecondaryClick:c,isPending:d,onSubmit:(l,o)=>{var r,s;const{productVariations:c,translations:d}=o,p=Z(o,["productVariations","translations"]),b=Object.assign({competition_id:null!==(r=null!=e?e:u)&&void 0!==r?r:0,translate:Array.isArray(d)?(0,i.mj)(d.map((e=>Object.assign(Object.assign({},e),{locale:"ln"})))):[],product_variation_ids:null==c?void 0:c.map((e=>e.id))},p);m({id:null!==(s=null==t?void 0:t.id)&&void 0!==s?s:void 0,values:b},{onSuccess:e=>{l(),null==n||n(e)},onError:a})},initialValues:t})}},7284:function(e,t,n){n(98809),n(2010),n(95171)},90188:function(e,t,n){n(55088),n(2010),n(95171),n(7284)},47728:function(e,t,n){n(55088),n(2010),n(95171),n(1130),n(7284),n(66400)},66400:function(e,t,n){n(95171)},59649:function(e,t,n){n(2010)},48133:function(e,t,n){n.r(t),n.d(t,{default:function(){return dt}});var a=n(27378),i=n(96740),l=n(61985),o=n(33996),r=n(50836),s=n(60071),c=n(26761),u=n(38056),m=(n(95171),n(34234)),d=n(93412),p=(n(7284),JSON.parse('{"AW":"/competitsdsddsion/*"}'));class b{constructor(){this.entity="/competitions",this.title=[u.ZP.t("Competition.Title"),u.ZP.t("Competition.Title",{count:2})],this.apiService=new m.Vx(this.entity,this.title[0]),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${p.AW.replace("*","")}`}],this.detailColumns=[{key:"id",label:"ID"},{key:"title",label:u.ZP.t("Global.Title")},{key:"description",label:u.ZP.t("Global.Description")},{key:"is_active",label:u.ZP.t("Global.IsActive")},{key:"is_editable",label:u.ZP.t("Competition.isEditable")},{key:"activable",label:u.ZP.t("Competition.Activable")}],this.tableColumns=[{width:140,key:"title",ellipsis:{showTitle:!1},dataIndex:"title",className:"hasTile",title:u.ZP.t("Global.Name")},{key:"release_date",className:"hasTile",render:d.JK,dataIndex:"release_date",title:u.ZP.t("Competition.StartDate")},{className:"hasTile",render:d.JK,key:"available_until",dataIndex:"available_until",title:u.ZP.t("Competition.EndDate")},{width:140,key:"calculate",className:"hasTile",render:d.MF,title:u.ZP.t("Competition.Calculate")},{width:140,key:"redeem",dataIndex:"",className:"hasTile",render:d.xe,title:u.ZP.t("Competition.RedeemRewards")},{key:"id",dataIndex:"",align:"center",render:d.yP,title:u.ZP.t("Competition.CopyCompetitionToolTip")},{dataIndex:"",className:"hasTile",key:"cancel-participation",render:d.U$,title:u.ZP.t("Competition.CancelParticipation")}]}}var E=n(39338),v=(n(47728),n(63750)),y=n(89820);function f({competitionId:e}){const t=new v.Z,[n]=(0,E.KO)(y.b),{t:i}=(0,s.$)();return a.createElement(o.Xg,{module:t},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,dontNavigate:!0,hasFilters:!1}),a.createElement(o.s_.ListView,{module:t,dontNavigate:!0,hasUpdate:null==n?void 0:n.is_editable,updateLink:"",params:{competitionId:e},togglers:[{url:"is-active",title:i("Global.IsActive"),dataIndex:"is_active"}]})))}n(95914);function h(e){switch(e){case"active":return{isActive:!0,hasEnded:!1};case"inactive":return{isActive:!1,hasEnded:!1};case"ended":return{hasEnded:!0};default:return{}}}function C({key:e,tableColumns:t}){const n=t.slice(),a=n.findIndex((t=>t.key===e));return a>-1&&n.splice(a,1),n.slice()}var g=({activeTab:e})=>{var t;const{loggedInUserRole:n}=(0,a.useContext)(l.Vo),i=new b;"partner"===n&&(null===(t=null==i?void 0:i.tableColumns)||void 0===t||t.splice(5,1));const r=(0,a.useMemo)((()=>{const t=[];switch(e){case"active":case"inactive":t.push({url:"is-active",title:u.ZP.t("Global.Active"),dataIndex:"is_active",disabled:"activable"})}return t}),[e]);return"active"===e&&"partner"===n||(i.tableColumns=C({key:"cancel-participation",tableColumns:i.tableColumns})),"active"===e&&(i.tableColumns=C({key:"calculate",tableColumns:i.tableColumns})),a.createElement(o.Xg,{module:i},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0}),a.createElement(o.s_.ListView,{module:i,updateLink:"manage",togglers:r,params:h(e)})))},Z=n(97986),P=n(12606),w=n(6110),_=n(61320),k=n.n(_),x=n(56552),T=n(31675),S=n(3288),I=n(35062),R=n(10374),O=n(28681),N=n(48158);var A=({isPending:e,initialValues:t,onSubmit:n})=>{const{t:i}=(0,s.$)(),[l]=S.Z.useForm();return(0,a.useEffect)((()=>{var e;t&&l.setFieldsValue(Object.assign(Object.assign({},t),{release_date:t.release_date?k()(t.release_date):null,available_until:t.available_until?k()(t.available_until):null,translations:(null===(e=t.translations)||void 0===e?void 0:e.length)>0?t.translations:[{locale:void 0,name:"",title:""}]}))}),[t]),a.createElement(S.Z,{form:l,name:"competition-form",layout:"vertical",onFinish:n,initialValues:{translations:[{locale:void 0,title:"",name:""}],must_accept_terms:!1}},a.createElement(I.Z,{gutter:[16,0],justify:"space-between"},a.createElement(R.Z,{span:12},a.createElement(S.Z.Item,{name:"release_date",label:i("Competition.StartDate")},a.createElement(O.Z,{format:(0,T._A)()}))),a.createElement(R.Z,{span:12},a.createElement(S.Z.Item,{name:"available_until",label:i("Competition.EndDate")},a.createElement(O.Z,{format:(0,T._A)()})))),a.createElement(o.jh,{name:"translations",inputName:"title",isEditor:!0}),a.createElement(I.Z,{gutter:[16,0],justify:"start"},a.createElement(R.Z,{span:24},a.createElement(S.Z.Item,{required:!0,valuePropName:"checked",name:"must_accept_terms"},a.createElement(N.Z,null,i("Competition.AcceptTerms"))))),a.createElement(o.Ow,{isPending:e}))},j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};var V=({onCallback:e,onError:t,singleData:n})=>{const i=new b,{mutate:l,isLoading:o}=(0,x.useMutation)((({id:e,values:t})=>e?i.apiService.updateOne(e,t):i.apiService.createOne(t)));return a.createElement(A,{onSubmit:a=>{var i;const{translations:o,available_until:r,release_date:s}=a,c=j(a,["translations","available_until","release_date"]);if(r&&s&&r<s)return void w.ZP.error(u.ZP.t("Competition.WrongDateMsg"));const d=Object.assign({translate:(0,m.mj)(o),release_date:k()(s).format("YYYY-MM-DD"),available_until:k()(r).format("YYYY-MM-DD")},c);l({id:null!==(i=null==n?void 0:n.id)&&void 0!==i?i:void 0,values:d},{onSuccess:e,onError:t})},isPending:o,initialValues:n})},D=n(22301),$=n(27498),L=n(31366),K=n(2010),U=n(32383),G=n(25724),M=n(56591),F=n(58822),q=n(84300);n(66400);var Y=({initialValues:e,isPending:t,onSubmit:n,onSecondaryClick:i})=>{const[l]=S.Z.useForm(),{t:r}=(0,s.$)(),[c,u]=(0,a.useState)(null==e?void 0:e.competitionRuleType),{Item:m}=S.Z;(0,a.useEffect)((()=>{e&&l.setFieldsValue(e)}),[e]);const d=(0,a.useMemo)((()=>{if(!c)return a.createElement(a.Fragment,null);switch(c.slug){case"Career Step":return a.createElement(a.Suspense,{fallback:(0,U.Z)(r("Competition.Rule.AchieveCareerStep"))},a.createElement(m,{name:"achieveCareerStep",rules:[{required:!0}],label:r("Competition.Rule.AchieveCareerStep")},a.createElement(q.Z,null)));case"Ordered Products":return a.createElement(m,{name:"productVariations",label:r("Competition.Rule.ProductVariation"),rules:[{required:!0}]},a.createElement(L.Z,{isMulti:!0,menuPlacement:"top"}));default:return a.createElement(m,{name:"min_amount",label:r("Global.Amount"),rules:[{required:!0}]},a.createElement(G.Z,{min:0,placeholder:r("Global.InputPlaceholder",{title:r("Global.Amount")})}))}}),[c]);return a.createElement(S.Z,{form:l,name:"rules-form",layout:"vertical",onFinish:n},a.createElement(a.Suspense,{fallback:(0,U.Z)(r("Competition.Rule.RuleType"))},a.createElement(m,{name:"competitionRuleType",label:r("Competition.Rule.RuleType"),rules:[{required:!0}]},a.createElement(F.Z,{onChange:e=>{u(e)}}))),a.createElement(I.Z,{justify:"space-between",gutter:[16,0]},a.createElement(R.Z,{span:c?12:24},a.createElement(m,{name:"points",label:r("Competition.Rule.Point"),rules:[{required:!0}]},a.createElement(G.Z,{min:0,placeholder:r("Global.InputPlaceholder",{title:r("Competition.Rule.Point")})}))),a.createElement(R.Z,{span:12},d)),a.createElement(I.Z,{justify:"space-between",gutter:[16,0]},a.createElement(R.Z,{span:12},a.createElement(a.Suspense,{fallback:(0,U.Z)(r("Competition.Rule.BlockedUser"))},a.createElement(m,{name:"blocked_users",label:r("Competition.Rule.BlockedUser")},a.createElement(K.o,{isMulti:!0,menuPlacement:"top"})))),a.createElement(R.Z,{span:12},a.createElement(m,{name:"careerSteps",label:r("SidePanel.CareerStep")},a.createElement(q.Z,{isMulti:!0})))),a.createElement(o.Ow,{isPending:t,Secondary:i&&a.createElement(M.Z,{onClick:i},r("Competition.Previous"))}))},B=n(14206),X=n.n(B),W=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};function H({id:e,userIds:t}){return W(this,void 0,void 0,(function*(){try{const n=yield X().put(`competitions/${e}/blacklist-users`,{user_ids:t});return w.ZP.success(u.ZP.t("Global.UpdatedSuccessfully",{title:u.ZP.t("Competition.UserBlacklist")})),n.status}catch(e){throw new Error(e)}}))}var z=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};const J=new m.Vx("competition-rules",u.ZP.t("Competition.Rule.Title"));var Q=({competitionId:e,onCallback:t,singleData:n,onError:i,onSecondaryClick:l})=>{const[o]=(0,E.KO)(y.L);if(!e&&!o&&!(null==n?void 0:n.competition_id))return a.createElement($.Z,{title:"Competition ID"});const{mutate:r,isLoading:s}=(0,x.useMutation)((({id:e,values:t})=>e?J.updateOne(e,t):J.createOne(t))),{mutate:c,isLoading:u}=(0,x.useMutation)(H);return a.createElement(Y,{onSecondaryClick:l,isPending:s&&u,onSubmit:a=>{var l,s;const u=null!==(l=null!=e?e:o)&&void 0!==l?l:null==n?void 0:n.competition_id,{achieveCareerStep:m,productVariations:d,competitionRuleType:p,blocked_users:b,careerSteps:E}=a,v=z(a,["achieveCareerStep","productVariations","competitionRuleType","blocked_users","careerSteps"]),y=Object.assign(Object.assign({},v),{competition_id:null!=u?u:0,achieve_career_step_id:null==m?void 0:m.id,competition_rule_type_id:null==p?void 0:p.id,product_variation_ids:null==d?void 0:d.map((e=>e.id)),career_step_ids:E?null==E?void 0:E.map((e=>null==e?void 0:e.id)):null});r({id:null!==(s=null==n?void 0:n.id)&&void 0!==s?s:void 0,values:y},{onSuccess:t,onError:i}),u&&(null==b?void 0:b.length)>0&&c({id:u,userIds:null==b?void 0:b.map((e=>null==e?void 0:e.id))})},initialValues:n})};n(90188);const{Step:ee}=Z.Z;var te=()=>{const{t:e}=(0,s.$)(),t=(0,i.s0)(),[n,l]=(0,a.useState)(0),[o,r]=(0,a.useState)(),[c,u]=(0,a.useState)(),[m,d]=(0,a.useState)(),[p,b]=(0,a.useState)(["wait","wait","wait"]),E=()=>l((e=>e+1)),v=()=>l((e=>e-1)),y=()=>{b((e=>{const t=[...e];return t[n]="finish",t}))},f=()=>{b((e=>{const t=[...e];return t[n]="error",t}))},h=[{title:e("Competition.General"),content:a.createElement(V,{singleData:o,onCallback:t=>{r(t),y(),E(),P.Z.info({message:e("Competition.CareerStepsAchieve"),description:e("Competition.SendNullValueToLetAllCareerSteps")})},onError:f})},{title:e("Competition.Rule.Title",{count:2}),content:a.createElement(Q,{onError:f,singleData:c,onSecondaryClick:v,onCallback:e=>{u(e),y(),E()},competitionId:null==o?void 0:o.id})},{title:e("Competition.Reward.Title",{count:2}),content:a.createElement(D.default,{onError:f,singleData:m,onSecondaryClick:v,onCallback:e=>{y(),d(e),o&&t("manage/"+(null==o?void 0:o.id))},competitionId:null==o?void 0:o.id})}];return a.createElement(ne,null,a.createElement(Z.Z,{current:n},h.map(((e,t)=>a.createElement(ee,Object.assign({key:t},e,{status:p[t]}))))),a.createElement("div",{className:"steps-content"},h[n].content))};const ne=c.ZP.div`
  .steps-content {
    padding: 18px;
  }
`;var ae=()=>{const{loggedInUserRole:e}=(0,a.useContext)(l.Vo),{t:t}=(0,s.$)(),[n,i]=(0,a.useState)("1");return a.createElement(ie,null,a.createElement(r.Z,{type:"card",defaultActiveKey:n,className:"competition-list-tabs",activeKey:n,destroyInactiveTabPane:!0,onChange:e=>i(e)},a.createElement(r.Z.TabPane,{key:"1",tab:t("Global.Active")},a.createElement(g,{activeTab:"active"})),"partner"!==e&&a.createElement(r.Z.TabPane,{key:"2",tab:t("Global.InActive")},a.createElement(g,{activeTab:"inactive"})),a.createElement(r.Z.TabPane,{key:"3",tab:t("Competition.Finished")},a.createElement(g,{activeTab:"ended"})),"partner"!==e&&a.createElement(r.Z.TabPane,{key:"4",tab:t("Competition.NewCompetition")},a.createElement(te,null))))};const ie=c.ZP.div`
  border-radius: 12px;
  background: #fff;

  & .content {
    padding: 12px 0;
  }

  & .competition-list-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #309847 !important;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;var le=()=>a.createElement("div",null,"ParticipantsTab");var oe=()=>{const{t:e}=(0,s.$)(),[t,n]=(0,a.useState)("1"),{loggedInUserRole:i}=(0,a.useContext)(l.Vo);return a.createElement(o.Xg,{module:new b},a.createElement(o.Xg.Breadcrumb,null),a.createElement(re,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"competition-tabs",activeKey:t,destroyInactiveTabPane:!0,onChange:e=>n(e)},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Title",{count:2})},a.createElement(ae,null)),a.createElement(r.Z.TabPane,{key:"2",tab:e("Competition.Participant.Title",{count:2}),disabled:!0},a.createElement(le,null)),("admin"===i||"employee"===i)&&a.createElement(r.Z.TabPane,{key:"3",tab:e("Competition.Rule.Title",{count:2})},a.createElement(f,null)))))};const re=c.ZP.div`
  padding: 32px 16px;
  border-radius: 12px;
  background: #fff;
  margin-top: 16px;

  & .content {
    padding: 12px 0;
  }

  & .competition-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #009ddc;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;var se=()=>a.createElement("div",null,"RankingList.Tab"),ce=n(39154);class ue{constructor(e){this.title=[u.ZP.t("Competition.Attendee.UserResults"),u.ZP.t("Competition.Attendee.UserResults",{count:2})],this.detailColumns=[{key:"user_id",label:u.ZP.t("Global.UserId")},{key:"full_name",label:u.ZP.t("Global.Name")},{key:"total_points",label:u.ZP.t("Competition.Reward.Points")},{key:"possible_reward",label:u.ZP.t("Competition.PossibleRewards")}],this.tableColumns=[{key:"user_id",dataIndex:"user_id",render:d.ID,title:u.ZP.t("CompetitionResult.UserId")},{key:"partner_id",render:ce.aT,className:"hasTile",dataIndex:"partner_id",title:u.ZP.t("CompetitionResult.PartnerId")},{key:"full_name",title:u.ZP.t("Global.Name"),dataIndex:"full_name",className:"hasTile"},{align:"center",key:"total_points",className:"hasTile",dataIndex:"total_points",title:u.ZP.t("Competition.Reward.TotalPoints")},{align:"center",className:"hasTile",key:"possible_reward",dataIndex:"possible_reward",title:u.ZP.t("Competition.PossibleRewards")}],this.entity=`competitions/${e}/competition-results/users`,this.apiService=new m.Vx(this.entity,this.title[0])}}n(88500);var me=()=>{const[e]=(0,E.KO)(y.L);if(!e)return a.createElement($.Z,{title:"Can't Perform Edit if Competition is Not Available"});const t=new ue(e);return a.createElement(o.Xg,{module:t},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,dontNavigate:!0,noDescription:!0}),a.createElement(o.s_.ListView,{module:t,noId:!0,dontNavigate:!0,noSelection:!0})))};class de{constructor(e){this.title=[u.ZP.t("Competition.Attendee.UserRewards"),u.ZP.t("Competition.Attendee.UserRewards",{count:2})],this.detailColumns=[{key:"id",label:u.ZP.t("Global.ID")},{key:"username",label:u.ZP.t("Global.Name")},{key:"type",label:u.ZP.t("Competition.Attendee.RewardType")},{key:"points",label:u.ZP.t("Competition.Reward.Points")}],this.tableColumns=[{key:"user_id",dataIndex:"user_id",title:u.ZP.t("Competition.TopParticipant.UserID"),className:"hasTile"},{key:"username",title:u.ZP.t("Global.Name"),dataIndex:["user","person","full_name"],className:"hasTile"},{key:"type",title:u.ZP.t("Competition.Reward.RewardType"),dataIndex:["competitionReward","type"],className:"hasTile"},{key:"points",title:u.ZP.t("Competition.Reward.Points"),dataIndex:["competitionReward","points"],className:"hasTile"}],this.entity=`competitions/${e}/competition-rewards/users`,this.apiService=new m.Vx(this.entity,this.title[0])}}var pe=()=>{const[e]=(0,E.KO)(y.L);if(!e)return a.createElement($.Z,{title:"Can't Perform Edit if Competition is Not Available"});const t=new de(e);return a.createElement(o.Xg,{module:t},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,dontNavigate:!0,noDescription:!0}),a.createElement(o.s_.ListView,{module:t,noId:!0,dontNavigate:!0})))};var be=()=>{const{t:e}=(0,s.$)();return a.createElement(Ee,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"attendees-tabs"},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Attendee.UserRewards")},a.createElement(pe,null)),a.createElement(r.Z.TabPane,{key:"2",tab:e("Competition.Attendee.UserResults")},a.createElement(me,null)),a.createElement(r.Z.TabPane,{key:"3",tab:e("Competition.Attendee.UserRanking"),disabled:!0},a.createElement(se,null))))};const Ee=c.ZP.div`
  & .attendees-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #37b052 !important;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;var ve=()=>a.createElement("div",null,"AttendeesDetail.tab"),ye=n(98809),fe=n(2365);var he=({isPending:e,initialValues:t,onSubmit:n})=>{var i;const{t:l}=(0,s.$)(),[r]=S.Z.useForm(),[c,u]=(0,a.useState)(null!==(i=null==t?void 0:t.is_editable)&&void 0!==i&&i);return(0,a.useEffect)((()=>{var e;t&&(u(t.is_editable),r.setFieldsValue(Object.assign(Object.assign({},t),{release_date:t.release_date?k()(t.release_date):null,available_until:t.available_until?k()(t.available_until):null,translations:(null===(e=t.translations)||void 0===e?void 0:e.length)>0?t.translations:[{locale:void 0,name:"",title:""}]})))}),[t]),a.createElement(S.Z,{form:r,name:"competition-form",layout:"vertical",onFinish:n,initialValues:{translations:[{locale:void 0,title:"",name:""}],must_accept_terms:!1}},!c&&a.createElement(fe.Z,{style:{marginBottom:"1rem"},showIcon:!0,type:"warning",message:"Warning",description:"This Competition is not Editable"}),a.createElement(I.Z,{gutter:[16,0],justify:"space-between"},a.createElement(R.Z,{span:12},a.createElement(S.Z.Item,{name:"release_date",label:l("Competition.StartDate")},a.createElement(O.Z,{format:(0,T._A)(),disabled:!c}))),a.createElement(R.Z,{span:12},a.createElement(S.Z.Item,{name:"available_until",label:l("Competition.EndDate")},a.createElement(O.Z,{format:(0,T._A)(),disabled:!c}))),a.createElement(R.Z,{xs:24,md:12},a.createElement(a.Suspense,{fallback:(0,U.Z)(l("Competition.AllowedCountries"))},a.createElement(S.Z.Item,{name:"country_list",label:l("Competition.AllowedCountries"),tooltip:l("Competition.WhenNothingSelectedAllCountriesAreAllowedToJoinCompetition")},a.createElement(ye.O,{isMulti:!0,menuPlacement:"top",disabled:!c,placeholder:l("Competition.AllCountriesAreAllowed")})))),a.createElement(R.Z,{xs:24,md:12},a.createElement(a.Suspense,{fallback:(0,U.Z)(l("Competition.BlockedUsers"))},a.createElement(S.Z.Item,{name:"blacklist_users",label:l("Competition.BlockedUsers")},a.createElement(K.o,{isMulti:!0,menuPlacement:"top",disabled:!c}))))),a.createElement(o.jh,{inputName:"title",name:"translations",isEditor:c,disabled:!c}),a.createElement(I.Z,{gutter:[16,0],justify:"start"},a.createElement(R.Z,{span:24},a.createElement(S.Z.Item,{required:!0,valuePropName:"checked",name:"must_accept_terms"},a.createElement(N.Z,null,l("Competition.AcceptTerms"))))),c&&a.createElement(o.Ow,{isPending:e}))},Ce=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};var ge=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n};var Ze=({singleData:e})=>{const{t:t}=(0,s.$)(),[n]=(0,E.KO)(y.L);if(!n)return a.createElement($.Z,{title:"Invalid Competition ID"});const{mutate:i,isLoading:l}=(0,x.useMutation)((({id:e,values:t})=>function(e,t){return Ce(this,void 0,void 0,(function*(){try{return(yield X().put(`competitions/${e}/full-detail-update`,t)).data.data}catch(e){throw new Error(e)}}))}(e,t)));return a.createElement(he,{isPending:l,onSubmit:function(e){if(!n)return;const{country_list:a,blacklist_users:l,translations:o,release_date:r,available_until:s}=e,c=ge(e,["country_list","blacklist_users","translations","release_date","available_until"]),u=Object.assign({translate:(0,m.mj)(o),release_date:k()(r).format("YYYY-MM-DD"),available_until:k()(s).format("YYYY-MM-DD"),country_ids:(null==a?void 0:a.length)>0?a.map((e=>e.id)):void 0,user_ids:(null==l?void 0:l.length)>0?l.map((e=>e.id)):void 0},c);i({id:n,values:u},{onSuccess:()=>{w.ZP.success(t("Global.UpdatedSuccessfully",{title:t("Competition.Title")}))}})},initialValues:e})},Pe=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};var we=()=>{const[e]=(0,E.KO)(y.b);if(!e)return a.createElement($.Z,{title:"Can't Perform Edit if Competition is Not Available"});const{data:t,isLoading:n}=(0,x.useQuery)("competition_country_list",(()=>function(e){return Pe(this,void 0,void 0,(function*(){const t=new m.Vx(`competitions/${e}/countries`);try{return(yield t.getAll({})).data}catch(t){throw new Error(t)}}))}(e.id))),{data:i,isLoading:l}=(0,x.useQuery)("competition_user_list",(()=>function(e){return W(this,void 0,void 0,(function*(){try{return(yield X().get(`competitions/${e}/blacklist-users`)).data.data}catch(e){throw new Error(e)}}))}(e.id))),r=Object.assign(Object.assign({},e),{country_list:null!=t?t:[],blacklist_users:null!=i?i:[]});return a.createElement(a.Fragment,null,l&&n?a.createElement(o.aN,null):a.createElement(Ze,{singleData:r}))},_e=n(95985),ke=JSON.parse('{"a":[{"name":"Starter+","amt":"590"},{"name":"Partner","amt":"150"},{"name":"Partner+","amt":"690"},{"name":"Supervisor","amt":"180"},{"name":"Supervisor+","amt":"500"}]}'),xe=n(82370),Te=n(27100),Se=n(97257),Ie=n(27810),Re=n(9911),Oe=n(99308),Ne=n(38616),Ae=n(32529),je=n(26299),Ve=n(52734),De=n(31246);var $e=({data:e,color:t})=>a.createElement("div",{style:{width:"100%",height:300}},a.createElement(Re.h,null,a.createElement(Oe.v,{layout:"vertical",data:e,margin:{top:5,right:30,left:20,bottom:5}},a.createElement(Ne.q,{strokeDasharray:"3 3"}),a.createElement(Ae.K,{type:"number"}),a.createElement(je.B,{dataKey:"name",type:"category"}),a.createElement(Ve.u,null),a.createElement(De.$,{dataKey:"amt",fill:null!=t?t:"#B2E0F5",maxBarSize:20})))),Le=n(19511),Ke=n(26490),Ue=n(28246),Ge=n(47289);const{Item:Me}=Ue.Z,Fe=({compId:e})=>{const{t:t}=(0,s.$)(),n=new b,[,i]=(0,E.KO)(y.b),[l,r]=(0,a.useState)({}),[c,u]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{u(!0),n.apiService.getOne(e).then((e=>{i(e),u(!1),r(e)})).catch((()=>{u(!1)}))}),[]),a.createElement(a.Fragment,null,c?a.createElement(o.aN,null):a.createElement(Ue.Z,{bordered:!0,column:1},a.createElement(Me,{label:t("Competition.CompetitionId")},l.id),a.createElement(Me,{label:t("Competition.CompetitionName")},l.title),a.createElement(Me,{label:t("Competition.Start")},l.release_date?(0,d.JK)(l.release_date):"-"),a.createElement(Me,{label:t("Competition.End")},l.available_until?(0,d.JK)(l.available_until):"-"),a.createElement(Me,{label:t("Competition.CreationDate")},l.created_at?(0,d.JK)(l.created_at):"-")))},qe=({compId:e})=>{const[t,n]=(0,a.useState)(),[i,l]=(0,a.useState)(),[r,s]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{s(!0),X().get(`competitions/${e}/dashboard`).then((e=>{s(!1);const t=e.data.data,a=t.participants.map((e=>({name:e.participant_type,amt:e.number_of_participants})));l(a),n(t)})).catch((()=>{s(!1)}))}),[]),a.createElement(a.Fragment,null,r?a.createElement(o.aN,null):a.createElement(Se.Z,{data:null!=i?i:[],renderer:Xe.bind(void 0,t),colors:["#06D6A0","#EF476F"]}))},Ye=()=>{const[e,t]=(0,a.useState)(),[n]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{t(ke.a)}),[]),a.createElement(a.Fragment,null,n?a.createElement(o.aN,null):a.createElement(Ie.Z,{data:null!=e?e:[]}))},Be=()=>{const[e,t]=(0,a.useState)(),[n]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{t(ke.a)}),[]),a.createElement(a.Fragment,null,n?a.createElement(o.aN,null):a.createElement($e,{data:null!=e?e:[]}))},Xe=(e,t)=>{const{cx:n,cy:i,innerRadius:l,outerRadius:o,startAngle:r,endAngle:s,fill:c}=t;return a.createElement("g",null,a.createElement("text",{x:n,y:i-l/3,textAnchor:"middle",fill:"black",style:{fontSize:"1rem"}},u.ZP.t("Competition.Total")),a.createElement("text",{x:n,y:i+l/3,textAnchor:"middle",fill:"#989898",style:{fontSize:"1rem"}},null==e?void 0:e.total_participants),a.createElement(Ge.L,{cx:n,cy:i,innerRadius:l,outerRadius:o,startAngle:r,endAngle:s,fill:c}),a.createElement(Ge.L,{cx:n,cy:i,startAngle:r,endAngle:s,innerRadius:o+6,outerRadius:o+10,fill:c}))};var We=()=>{const{t:e}=(0,s.$)(),[t]=(0,E.KO)(y.L),n=(0,i.s0)(),{loggedInUserRole:o}=(0,a.useContext)(l.Vo);return t?a.createElement(a.Fragment,null,"partner"!==o&&a.createElement(I.Z,{gutter:[32,32]},a.createElement(R.Z,{xs:24,lg:24,xl:24},a.createElement(Le.Z,{className:"action-btn",title:e("Competition.CopyCompetitionToolTip")},a.createElement(M.Z,{style:{marginBottom:"15px",float:"right"},onClick:()=>{(0,xe.be)(t).then((t=>{w.ZP.success(e("Competition.CopyCompetitionMessage")),n(`/admin/competition/manage/${null==t?void 0:t.id}`)})).catch((e=>{P.Z.error(e)}))},shape:"default",icon:a.createElement(_e.Z,null)})),a.createElement(Ke.Z.Text,{style:{marginTop:"5px",marginRight:"10px",float:"right"},strong:!0},e("Competition.CopyCompetitionToolTip")))),a.createElement(I.Z,{gutter:[32,32]},a.createElement(R.Z,{xs:24,lg:12,xl:6},a.createElement(Te.Z,{title:e("Competition.General"),input:a.createElement(Fe,{compId:t}),hasBorder:!0})),a.createElement(R.Z,{xs:24,lg:12,xl:6},a.createElement(Te.Z,{title:e("Competition.Participate"),input:a.createElement(qe,{compId:t}),hasBorder:!0})),a.createElement(R.Z,{xs:24,lg:24,xl:12},a.createElement(Te.Z,{hasBorder:!0,input:a.createElement(Ye,null),title:e("Competition.ThoseWhoHadLevelUp")})),a.createElement(R.Z,{span:24},a.createElement(Te.Z,{hasBorder:!0,input:a.createElement(Be,null),title:e("Competition.AllContestParticipantsAccordingToTheRules")})))):a.createElement($.Z,{title:"Competition ID"})};var He=()=>a.createElement("div",null,"PublishTab");n(59649);class ze{constructor(e){this.title=[u.ZP.t("Competition.TopParticipant.Title"),u.ZP.t("Competition.TopParticipant.Title",{count:2})],this.tableColumns=[{key:"user",dataIndex:"user",className:"hasTile",render:d.Pb,title:u.ZP.t("Competition.TopParticipant.FullName")},{key:"user_id",className:"hasTile number",dataIndex:"user_id",title:u.ZP.t("Competition.TopParticipant.UserID")},{key:"points",dataIndex:"points",className:"hasTile number",title:u.ZP.t("Competition.TopParticipant.Points")}],e&&(this.entity=`competitions/${e}/top-users`,this.apiService=new m.Vx(this.entity,this.title[0]))}}var Je=()=>{const[e]=(0,E.KO)(y.L);if(!e)return a.createElement($.Z,{title:"Competition ID"});const t=new ze(e);return a.createElement(o.Xg,{module:t},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,noDescription:!0}),a.createElement(o.s_.ListView,{module:t,hasUpdate:!1,noId:!0})))};var Qe=()=>{const{t:e}=(0,s.$)(),{loggedInUserRole:t}=(0,a.useContext)(l.Vo),[n,i]=(0,a.useState)("1");return a.createElement(et,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"competition-details-tabs",activeKey:n,destroyInactiveTabPane:!0,onChange:e=>i(e)},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Details.Overview")},a.createElement(We,null)),"partner"!==t&&a.createElement(r.Z.TabPane,{key:"2",tab:e("Competition.Details.EditCompetition")},a.createElement(we,null)),a.createElement(r.Z.TabPane,{key:"3",tab:e("Competition.Details.TopListParticipants")},a.createElement(Je,null)),a.createElement(r.Z.TabPane,{key:"4",tab:e("Competition.Details.Publish"),disabled:!0},a.createElement(He,null))))};const et=c.ZP.div`
  & .competition-details-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #37b052 !important;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;class tt{constructor(){this.entity="/competition-rewards",this.title=[u.ZP.t("Competition.Reward.Title"),u.ZP.t("Competition.Reward.Title",{count:2})],this.apiService=new m.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,a.lazy)((()=>Promise.resolve().then(n.bind(n,22301)))),this.detailColumns=[{key:"id",label:"ID"},{key:"competition_id",label:u.ZP.t("Competition.CompetitionId")},{key:"description",label:u.ZP.t("Global.Description")},{key:"points",label:u.ZP.t("Competition.Reward.Points")},{key:"type",label:u.ZP.t("Competition.Reward.RewardType")},{key:"amount",label:u.ZP.t("Global.Amount")}],this.tableColumns=[{key:"points",className:"number",dataIndex:"points",title:u.ZP.t("Competition.Reward.Points")},{key:"type",dataIndex:"type",className:"hasTile",title:u.ZP.t("Global.Type")},{width:200,key:"description",dataIndex:"description",render:d.lX,title:u.ZP.t("Global.Description")}]}}function nt(){const[e]=(0,E.KO)(y.L),[t]=(0,E.KO)(y.b),n=new tt;return a.createElement(o.Xg,{module:n},a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,dontNavigate:!0,hasFilters:!1}),a.createElement(o.s_.ListView,{module:n,dontNavigate:!0,updateLink:"",params:{competitionId:e},hasUpdate:null==t?void 0:t.is_editable})))}var at=()=>{const{t:e}=(0,s.$)(),[t]=(0,E.KO)(y.L);if(!t)return a.createElement($.Z,{title:"Competition ID"});const[n]=(0,E.KO)(y.b),{loggedInUserRole:i}=(0,a.useContext)(l.Vo),[o,c]=(0,a.useState)("1");return a.createElement(it,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"competition-rewards-tabs",activeKey:o,destroyInactiveTabPane:!0,onChange:e=>c(e)},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Reward.AllRewards")},a.createElement(nt,null)),"partner"!==i&&a.createElement(r.Z.TabPane,{key:"2",tab:`+ ${e("Competition.Reward.NewReward")}`,disabled:!(null==n?void 0:n.is_editable)},a.createElement(D.default,{competitionId:t,onCallback:()=>c("1")}))))};const it=c.ZP.div`
  & .competition-rewards-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #37b052 !important;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;var lt=n(65686);var ot=()=>{const{t:e}=(0,s.$)(),[t]=(0,E.KO)(y.L);if(!t)return a.createElement($.Z,{title:"Competition ID"});const[n]=(0,E.KO)(y.b),{loggedInUserRole:i}=(0,a.useContext)(l.Vo),[o,c]=(0,a.useState)("1");return a.createElement(rt,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"competition-rules-tabs",activeKey:o,destroyInactiveTabPane:!0,onChange:e=>c(e)},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Rule.AllRules")},a.createElement(f,{competitionId:t})),"partner"!==i&&a.createElement(r.Z.TabPane,{key:"2",tab:`+ ${e("Competition.Rule.NewRule")}`,disabled:!(null==n?void 0:n.is_editable)},a.createElement(lt.default,{onCallback:()=>c("1")}))))};const rt=c.ZP.div`
  & .competition-rules-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #37b052 !important;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;var st=()=>{const{t:e}=(0,s.$)(),{competition_id:t}=(0,i.UO)();if(!t)return a.createElement($.Z,{title:"Competition ID"});const[,n]=(0,E.KO)(y.L);(0,a.useEffect)((()=>{n(+t)}),[t]);const{loggedInUserRole:c}=(0,a.useContext)(l.Vo),[u,m]=(0,a.useState)("1");return a.createElement(o.Xg,{module:new b},a.createElement(o.Xg.Breadcrumb,{routes:[{breadcrumbName:e("Competition.Title",{count:2}),path:"/admin/competitions/"},{breadcrumbName:e("Global.Edit"),path:`/admin/competitions/manage/${t}`}]}),a.createElement(ct,null,a.createElement(r.Z,{type:"card",defaultActiveKey:"1",className:"competition-edit-tabs",activeKey:u,destroyInactiveTabPane:!0,onChange:e=>m(e)},a.createElement(r.Z.TabPane,{key:"1",tab:e("Competition.Details.Title",{count:2})},a.createElement(Qe,null)),a.createElement(r.Z.TabPane,{key:"2",tab:e("Competition.Rule.Title",{count:2})},a.createElement(ot,null)),a.createElement(r.Z.TabPane,{key:"3",tab:e("Competition.Reward.Title",{count:2})},a.createElement(at,null)),"partner"!==c&&a.createElement(r.Z.TabPane,{key:"4",tab:e("Competition.Attendee.Title",{count:2})},a.createElement(be,null)),"partner"!==c&&a.createElement(r.Z.TabPane,{key:"5",tab:e("Competition.AttendeesDetail.Title",{count:2}),disabled:!0},a.createElement(ve,null)))))};const ct=c.ZP.div`
  padding: 32px 16px;
  border-radius: 12px;
  background: #fff;
  margin-top: 16px;

  & .content {
    padding: 12px 0;
  }

  & .competition-edit-tabs .ant-tabs-nav-list {
    margin-left: 0;

    & .ant-tabs-tab {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    & .ant-tabs-tab-active {
      background-color: #009ddc;

      & .ant-tabs-tab-btn {
        color: white;
      }
    }
  }
`;class ut{constructor(e,t){this.title=[u.ZP.t("Competition.Attendee.UserResults"),u.ZP.t("Competition.Attendee.UserResults",{count:2})],this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${p.AW.replace("*","")}`}],this.detailColumns=[{key:"id",label:u.ZP.t("Global.ID")},{key:"full_name",label:u.ZP.t("Global.Name")},{key:"points",label:u.ZP.t("Competition.Reward.Points")}],this.tableColumns=[{key:"full_name",title:u.ZP.t("Global.Name"),dataIndex:["user","person","full_name"],className:"hasTile"},{key:"user_id",dataIndex:"user_id",title:u.ZP.t("CompetitionResult.UserId"),className:"hasTile number"},{key:"partner_id",title:u.ZP.t("CompetitionResult.PartnerId"),dataIndex:["user","partner_id"],className:"hasTile number"},{key:"points",title:u.ZP.t("Competition.Reward.Points"),dataIndex:"points",align:"center",className:"hasTile number"}],this.entity=`competitions/${e}/competition-results/users/${t}`,this.apiService=new m.Vx(this.entity,this.title[0])}}var mt=()=>{const{competition_id:e,user_id:t}=(0,i.UO)();if(!e)return a.createElement($.Z,{title:"Compitition Id is needed"});if(!t)return a.createElement($.Z,{title:"User Id is needed"});const n=new ut(parseInt(e),parseInt(t)),l=[{breadcrumbName:u.ZP.t("CompetitionResult.Title"),path:"/admin/competition/result"},...n.breadcrumbItems];return a.createElement(o.Xg,{module:n},a.createElement(o.Xg.Breadcrumb,{routes:l}),a.createElement(o.Xg.Panel,null,a.createElement(o.s_.Header,{hasSearch:!0,dontNavigate:!0}),a.createElement(o.s_.ListView,{module:n,noId:!0,dontNavigate:!0})))};function dt(){return a.createElement(i.Z5,null,a.createElement(i.AW,{path:"",element:a.createElement(oe,null)}),a.createElement(i.AW,{path:"/manage/:competition_id",element:a.createElement(st,null)}),a.createElement(i.AW,{path:"/:competition_id/users/:user_id",element:a.createElement(mt,null)}))}},82370:function(e,t,n){n.d(t,{ZP:function(){return o},Ws:function(){return r},be:function(){return s}});n(7284);var a=n(14206),i=n.n(a),l=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};function o(e){return l(this,void 0,void 0,(function*(){try{return(yield i().post("competitions/rule-calculation-job",{id:e})).data.data.message}catch(e){throw new Error(e)}}))}function r(e){return l(this,void 0,void 0,(function*(){try{return(yield i().post("competition-rewards/assign-to-user",{competition_id:e})).data.data.message}catch(e){throw new Error(e)}}))}function s(e){var t;return l(this,void 0,void 0,(function*(){const n=yield i().post(`competitions/${e}/copy`);return null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.data}))}},89820:function(e,t,n){n.d(t,{L:function(){return i},b:function(){return l}});var a=n(39338);n(7284);const i=(0,a.cn)(void 0),l=(0,a.cn)(void 0)},27100:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(71616),i=n(26490),l=n(54030),o=n(27378),r=n(26761),s=n(9700),c=n(6826),u=n(56591);var m=({collapsed:e,onClose:t,onSettingClick:n,onArrowClick:a})=>o.createElement(d,{collapsed:e},o.createElement(u.Z,{icon:o.createElement(s.Z,{className:"arrowBtn"}),onClick:a}),n&&o.createElement(u.Z,{icon:o.createElement(c.Z,null),onClick:n}),o.createElement(u.Z,{icon:o.createElement("span",null,"X"),onClick:t}));const d=r.ZP.div`
  display: flex;
  gap: 10px;
  & > span {
    color: #004c81;
  }
  .arrowBtn {
    transition: all 0.3s ease;
    transform: ${e=>e.collapsed?"rotate(-180deg)":"rotate(0deg)"};
    transform-origin: center;
  }

  .ant-btn {
    border-radius: 5px;
    background-color: #f9f9f9;
  }
`;var p=({moreInfo:e,input:t,noRadius:n,foldable:r,title:s,disabled:c,infoLink:u,onSettingClick:d,hasBorder:p=!1})=>{const[E,v]=(0,o.useState)(!1),[y,f]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,!y&&o.createElement(b,{disabled:c,noRadius:n,border:p},s||r?o.createElement("div",{className:"header"},o.createElement(l.Z,{level:5},s),r&&o.createElement(m,{collapsed:E,onClose:()=>f(!0),onSettingClick:null!=d?d:void 0,onArrowClick:()=>v((e=>!e))})):"",o.createElement("div",{className:"content"},!E&&t),u&&o.createElement(i.Z.Link,{strong:!0,href:u||"#",target:"_blank"},e&&o.createElement("footer",null,"More Info ",o.createElement(a.Z,null)))))};const b=r.ZP.div`
  ${e=>e.disabled&&"\n      filter:blur(3px) grayscale(1);\n    "}

  min-height: 50px;
  background-color: #ffffff;
  text-align: left;

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    align-content: center;
    padding: 12px;

    h5 {
      font-size: 14px;
    }
  }
  .content {
    padding: 12px;
  }

  footer {
    margin-top: auto;
    padding: 12px;
    background-color: #f9f9f9;
    font-size: 12px;
    color: #003177;
    text-align: center;
  }

  /* top-left | top-right | bottom-right | bottom-left */
  border-radius: ${e=>(null==e?void 0:e.noRadius)?"0":"9px 9px 0 0"};
  border: ${e=>(null==e?void 0:e.border)?"1px solid #e8e8e8":"none"};
`},97257:function(e,t,n){var a=n(27378),i=n(9911),l=n(13057),o=n(3509),r=n(14569),s=n(91296);t.Z=({data:e,colors:t,renderer:n})=>{const c=null==e?void 0:e.every((e=>0===e.amt)),[u,m]=(0,a.useState)(0),d=(0,a.useCallback)(((e,t)=>{m(t)}),[m]);return a.createElement(i.h,{width:"100%",height:500},a.createElement(l.u,null,a.createElement(o.b,{data:c?[{name:"",amt:100}]:e,activeIndex:u,activeShape:null!=n?n:void 0,shapeRendering:"auto",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",dataKey:"amt",onMouseEnter:d},e.map(((e,n)=>a.createElement(r.b,{key:`cell-${n}`,fill:c?"#E0E0E0":t[n%t.length]})))),a.createElement(s.D,{verticalAlign:"bottom",height:36,payload:e.map(((e,n)=>({id:e.name,type:"square",value:`${e.name}: ${e.amt}`,color:c?"#E0E0E0":t[n%t.length]})))})))}},27810:function(e,t,n){var a=n(27378),i=n(9911),l=n(99308),o=n(38616),r=n(32529),s=n(26299),c=n(52734),u=n(31246);t.Z=({data:e,color:t})=>a.createElement("div",{style:{width:"100%",height:300}},a.createElement(i.h,null,a.createElement(l.v,{data:e,margin:{top:5,right:30,left:20,bottom:5}},a.createElement(o.q,{strokeDasharray:"3 3"}),a.createElement(r.K,{dataKey:"name"}),a.createElement(s.B,null),a.createElement(c.u,null),a.createElement(u.$,{dataKey:"amt",fill:null!=t?t:"#B2E0F5",maxBarSize:20}))))},89729:function(e,t,n){n.d(t,{Y:function(){return o}});var a=n(14206),i=n.n(a),l=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){e.done?n(e.value):i(e.value).then(o,r)}s((a=a.apply(e,t||[])).next())}))};function o({competitionId:e,hasAcceptedConditions:t}){return l(this,void 0,void 0,(function*(){try{return(yield i().put(`competitions/${e}/participate`,{accept_terms:null!=t&&t})).data}catch(e){throw new Error(e)}}))}},58066:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(38056),i=(n(95171),n(34234)),l=n(27378),o=(n(55088),n(30433));class r{constructor(){this.entity="/product-variations",this.title=[a.ZP.t("Product.Variation.Title"),a.ZP.t("Product.Variation.Title",{count:2})],this.apiService=new i.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,l.lazy)((()=>n.e(8722).then(n.bind(n,61261)))),this.breadcrumbItems=[],this.detailColumns=[{key:"name",label:a.ZP.t("Global.Name")}],this.tableColumns=[{width:200,key:"number",dataIndex:"number",className:"number hasTile",title:a.ZP.t("Product.Variation.Field.Number"),align:"center"},{width:250,key:"name",dataIndex:"name",className:"hasTile",ellipsis:{showTitle:!1},render:o.yL,title:a.ZP.t("Global.Name")}]}}},31366:function(e,t,n){var a=n(33996),i=(n(33699),n(27378)),l=(n(55088),n(58066));t.Z=e=>i.createElement(a.LE,Object.assign({},e,{hasNew:!1,searchParam:"search",module:new l.Z,optionSelector:{label:"number-name",value:"id"}}))}}]);