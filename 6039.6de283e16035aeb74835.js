"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6039],{29819:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(50189),l=a(27378),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},i=a(92788),o=function(e,t){return l.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:r}))};o.displayName="BookOutlined";var s=l.forwardRef(o)},19830:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(50189),l=a(27378),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M348 676.1C250 619.4 184 513.4 184 392c0-181.1 146.9-328 328-328s328 146.9 328 328c0 121.4-66 227.4-164 284.1V792c0 17.7-14.3 32-32 32H380c-17.7 0-32-14.3-32-32V676.1zM392 888h240c4.4 0 8 3.6 8 8v32c0 17.7-14.3 32-32 32H416c-17.7 0-32-14.3-32-32v-32c0-4.4 3.6-8 8-8z"}}]},name:"bulb",theme:"filled"},i=a(92788),o=function(e,t){return l.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:r}))};o.displayName="BulbFilled";var s=l.forwardRef(o)},92555:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(50189),l=a(27378),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},i=a(92788),o=function(e,t){return l.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:r}))};o.displayName="LinkOutlined";var s=l.forwardRef(o)},19504:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(50189),l=a(27378),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zM512 824c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40z"}}]},name:"mobile",theme:"filled"},i=a(92788),o=function(e,t){return l.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:r}))};o.displayName="MobileFilled";var s=l.forwardRef(o)},80893:function(e,t,a){var n=a(7914),l=a(11873);t.Z=void 0;var r=n(a(2398)),i=n(a(11873)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a(27378)),s=n(a(49811)),c=n(a(74574)),u=n(a(82821));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}var m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a},p=function(e){var t=e.ellipsis,a=m(e,["ellipsis"]),n=o.useMemo((function(){return t&&"object"===(0,i.default)(t)?(0,s.default)(t,["expandable","rows"]):t}),[t]);return(0,c.default)("object"!==(0,i.default)(t)||!t||!("expandable"in t)&&!("rows"in t),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),o.createElement(u.default,(0,r.default)({},a,{ellipsis:n,component:"span"}))};t.Z=p},97787:function(e,t,a){a.d(t,{Z:function(){return b}});var n=a(38056),l=(a(95171),a(34234)),r=a(27378),i=a(34940),o=a(80893),s=a(61320),c=a.n(s);a(87392);const u=e=>r.createElement("span",null,r.createElement("strong",null,c()(e).format("DD.MM.yyyy"))),d=e=>r.createElement("span",null,(e||[]).map((e=>r.createElement(i.Z,{color:"geekblue",key:e.id},e.code)))),m=({data:e})=>r.createElement(r.Fragment,null,"string"==typeof e?r.createElement(o.Z,{ellipsis:{tooltip:e}},r.createElement("strong",null,e)):r.createElement("span",null,r.createElement("strong",null,"-")));var p=a(28814);class b{constructor(){this.entity="/coupons",this.title=[n.ZP.t("Coupon.Title"),n.ZP.t("Coupon.Title",{count:2})],this.apiService=new l.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,r.lazy)((()=>Promise.resolve().then(a.bind(a,40956)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${p.AW.replace("*","")}`}],this.detailColumns=[{key:"id",label:"ID"},{key:"name",label:n.ZP.t("Global.Name")},{key:["partner","fullname"],label:n.ZP.t("Global.Partner")},{key:"amount",label:n.ZP.t("Global.Amount")},{key:"available_until",render:u,label:n.ZP.t("Coupon.Field.AvailableUntil")},{key:"max_quantity_each_user",label:n.ZP.t("Coupon.Field.MaxQuantityEachUser")},{key:"quantity",label:n.ZP.t("Global.Quantity")},{key:"type",label:n.ZP.t("Global.Type")},{key:"used_quantity",label:n.ZP.t("Coupon.Field.UsedQuantity")},{key:"is_active",label:n.ZP.t("Global.IsActive")},{key:"release_date",render:u,label:n.ZP.t("Coupon.Field.ReleaseDate")},{key:"first_order",label:n.ZP.t("Coupon.Field.FirstOrder")},{key:"description",render:m,label:n.ZP.t("Global.Description")}],this.tableColumns=[{width:150,key:"name",dataIndex:"name",className:"hasTile",title:n.ZP.t("Global.Name")},{width:150,key:"partner",dataIndex:["partner","fullname"],className:"hasTile",title:n.ZP.t("Global.Partner")},{width:150,key:"amount",dataIndex:"amount",className:"number hasTile",title:n.ZP.t("Global.Amount"),align:"center"},{width:150,key:"used_quantity",dataIndex:"used_quantity",className:"number hasTile",title:n.ZP.t("Coupon.Field.UsedQuantity"),align:"center"},{width:100,key:"quantity",dataIndex:"quantity",className:"hasTile",title:n.ZP.t("Global.Quantity"),align:"center"},{width:180,key:"couponCodes",render:d,dataIndex:"couponCodes",className:"hasTile",title:n.ZP.t("Coupon.Field.Codes"),align:"center"}]}}},40956:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n=a(38056),l=(a(95171),a(34234)),r=a(6110),i=a(27378),o=a(56552),s=(a(31366),a(55088),a(33996)),c=(a(96800),a(31675)),u=a(61320),d=a.n(u),m=(a(87392),a(58066)),p=a(56591);function b(e){const t=new m.Z;return i.createElement(s.Xg,{module:t},i.createElement(s.Xg.Panel,null,i.createElement(s.s_.Header,{hasSearch:!0,hasNew:!1,dontNavigate:!0,ExtraAction:(t,a)=>i.createElement(p.Z,{type:"primary",onClick:()=>{console.log({selectedRowsData:a,selectedRows:t}),e((e=>{const t=[...e,...a].filter(((e,t,a)=>a.findIndex((t=>t.id===e.id))===t));return t}))},disabled:0===t.length},n.ZP.t("Coupon.AddSelected"))}),i.createElement(s.s_.ListView,{dontNavigate:!0,hasUpdate:!1,module:t,tableScroll:{y:640,x:1300}})))}var f=a(26650),h=a(3288),v=a(97851),y=a(35062),Z=a(10374),g=a(28681),E=a(60071);var P=function({onSubmit:e,isPending:t,initialValues:a}){const[n]=h.Z.useForm(),{t:l}=(0,E.$)(),[r,o]=(0,i.useState)([]);(0,i.useEffect)((()=>{n.setFieldsValue({productVariations:r})}),[r]);const[u,m]=(0,i.useState)(!0),[p,P]=(0,i.useState)(!0);(0,i.useEffect)((()=>{var e;a&&("amount"===a.type&&m(!1),P(a.product_instead_of_discount),n.setFieldsValue(Object.assign(Object.assign({},a),{release_date:a.release_date?d()(a.release_date):"",available_until:a.available_until?d()(a.available_until):"",translate:(null===(e=a.translate)||void 0===e?void 0:e.length)>0?a.translate:[{locale:void 0,name:""}]}))),(null==a?void 0:a.productVariations)&&o(null==a?void 0:a.productVariations)}),[a]);const w=i.useMemo((()=>b(o)),[]);return i.createElement(h.Z,{form:n,layout:"vertical",onFinish:e,name:"coupon-form",initialValues:{is_active:!1,first_order:!1,product_instead_of_discount:!1,translate:[{locale:void 0,name:""}]}},i.createElement(h.Z.Item,{label:l("Coupon.Field.ReleaseDate"),name:"release_date"},i.createElement(v.Z,{placeholder:l("Global.InputPlaceholder",{title:l("Coupon.Field.Codes")})})),i.createElement(y.Z,{gutter:[16,0]},i.createElement(Z.Z,{span:12},i.createElement(h.Z.Item,{name:["couponCodes",0,"code"],label:l("Coupon.Field.Codes")},i.createElement(g.Z,{format:(0,c._A)(),placeholder:l("Coupon.Field.ReleaseDate")}))),i.createElement(Z.Z,{xs:12},i.createElement(h.Z.Item,{label:l("Coupon.Field.ReleaseDate"),name:"release_date"},i.createElement(g.Z,{format:(0,c._A)(),placeholder:l("Coupon.Field.ReleaseDate")})))),i.createElement(f.Z,null),p&&i.createElement(i.Fragment,null,w),i.createElement(s.Ow,{isPending:t}))},w=a(97787),_=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a};var O=({onCallback:e,singleData:t})=>{const a=new w.Z,{mutate:s,isLoading:c}=(0,o.useMutation)((({id:e,values:t})=>e?a.apiService.updateOne(e,t):a.apiService.createOne(t)));return i.createElement(P,{initialValues:t,onSubmit:a=>{const{translate:i,couponCodes:o,productVariations:c}=a,u=_(a,["translate","couponCodes","productVariations"]);if(u.available_until&&u.release_date&&new Date(u.available_until)<new Date(u.release_date))return void r.ZP.error(n.ZP.t("Coupon.WrongDateMsg"));const d=null==o?void 0:o.map((e=>e.code)),m=Object.assign(Object.assign({},u),{available_until:u.available_until?new Date(u.available_until).toISOString().split("T")[0]+" 23:59:58 ":void 0,release_date:u.release_date?new Date(u.release_date).toISOString().split("T")[0]+" 00:00:00 ":void 0,codes:d?d[0]:null,translate:(0,l.mj)(i),product_variation_ids:null==c?void 0:c.map((e=>e.id))});s({id:t?t.id:void 0,values:m},{onSuccess:e})},isPending:c})}},52419:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(27378),l=a(96740),r=a(33996),i=a(97787);a(87392);function o(){const e=new i.Z;return n.createElement(r.Xg,{module:e},n.createElement(r.Xg.Breadcrumb,null),n.createElement(r.Xg.Panel,null,n.createElement(r.s_.Header,{hasNew:!0,hasSearch:!0}),n.createElement(r.s_.ListView,{hasActive:!0,module:e})))}var s=a(38056),c=a(53988),u=a(3487),d=a(40956),m=a(28814);var p=()=>{const e=(0,l.s0)(),{coupon_id:t}=(0,l.UO)(),[a,o]=(0,n.useState)({}),[p,b]=(0,n.useState)(!1),f=new i.Z,h=f.title[0],v=`${m.AW.replace("*","")}`,y=[...f.breadcrumbItems,{path:"",breadcrumbName:t?`${s.ZP.t("Global.Update")} ${h} - ${t}`:`${s.ZP.t("Global.New")} ${h}`}];(0,n.useEffect)((()=>{t&&(b(!0),f.apiService.getOne(+t).then((e=>{o(e)})).finally((()=>{b(!1)})))}),[]);return n.createElement(r.Xg,{module:f},n.createElement(r.Xg.Breadcrumb,{routes:y}),n.createElement(r.Xg.Panel,null,n.createElement(u.j,null,n.createElement("div",{className:"header"},n.createElement(c.Z,{onClose:()=>e(`/admin${v}`),items:y})),p?n.createElement(r.aN,null):n.createElement(d.default,{singleData:a,onCallback:()=>{e(-1)}}))))};function b(){return n.createElement(l.Z5,null,n.createElement(l.AW,{path:"",element:n.createElement(o,null)}),n.createElement(l.AW,{path:"/upsert",element:n.createElement(p,null)}),n.createElement(l.AW,{path:"/upsert/:coupon_id",element:n.createElement(p,null)}))}},58066:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(38056),l=(a(95171),a(34234)),r=a(27378),i=(a(55088),a(30433));class o{constructor(){this.entity="/product-variations",this.title=[n.ZP.t("Product.Variation.Title"),n.ZP.t("Product.Variation.Title",{count:2})],this.apiService=new l.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,r.lazy)((()=>a.e(8722).then(a.bind(a,61261)))),this.breadcrumbItems=[],this.detailColumns=[{key:"name",label:n.ZP.t("Global.Name")}],this.tableColumns=[{width:200,key:"number",dataIndex:"number",className:"number hasTile",title:n.ZP.t("Product.Variation.Field.Number"),align:"center"},{width:250,key:"name",dataIndex:"name",className:"hasTile",ellipsis:{showTitle:!1},render:i.yL,title:n.ZP.t("Global.Name")}]}}},31366:function(e,t,a){var n=a(33996),l=(a(33699),a(27378)),r=(a(55088),a(58066));t.Z=e=>l.createElement(n.LE,Object.assign({},e,{hasNew:!1,searchParam:"search",module:new r.Z,optionSelector:{label:"number-name",value:"id"}}))},3487:function(e,t,a){a.d(t,{j:function(){return n}});const n=a(26761).ZP.div`
  padding: 32px;
  .header {
    padding-bottom: 32px;
    margin-bottom: 32px;
    border-bottom: 1px dashed #ededed;
  }
`},28814:function(e){e.exports=JSON.parse('{"AW":"/producsdsdts/coupsdsdons/*"}')}}]);