"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4327],{24327:function(e,t,l){l.d(t,{Ll:function(){return R},cu:function(){return D},uw:function(){return W}});var n=l(38056),i=(l(95171),l(34234)),a=l(27378),r=l(6286),d=l(12198),o=l(81769),u=(l(80631),l(98809),l(68600),l(2010),l(31675)),s=l(19511),c=l(56591),p=l(37144),m=l(31602),b=(l(54045),l(21668));const v=e=>a.createElement("span",null,e?(0,u.Wb)(new Date(String(e).replace(/'-'/g,"/"))):" - "),y=e=>a.createElement("span",null,null!=e?e:" - "),h=e=>a.createElement("span",null,e?"Yes":"No"),P=e=>{var t,l;return a.createElement("span",null,null!==(l=null!==(t=null==e?void 0:e.title)&&void 0!==t?t:`${null==e?void 0:e.first_name} ${null==e?void 0:e.last_name} ${null==e?void 0:e.company_name}`)&&void 0!==l?l:" - ")},Z=e=>{var t;return a.createElement("span",null,null!==(t=null==e?void 0:e.name)&&void 0!==t?t:" - ")},_=(e,t)=>{var l,n;return a.createElement("span",null,(0,u.v3)(null!==(n=null===(l=null==t?void 0:t.country)||void 0===l?void 0:l.currency.iso3)&&void 0!==n?n:"EUR",null!=e?e:0))},x=e=>{var t;return a.createElement("span",null,null!==(t=null==e?void 0:e.name)&&void 0!==t?t:" - ")},I=e=>a.createElement("span",null,(null!=e?e:0)+"%"),k=(e,{first_name:t,last_name:l})=>{var n,i,r,d;return a.createElement("span",null,(null!=t?t:null===(n=null==e?void 0:e.person)||void 0===n?void 0:n.first_name)+" "+(null!=l?l:null===(i=null==e?void 0:e.person)||void 0===i?void 0:i.last_name)+" "+(null!==(d=null===(r=null==e?void 0:e.person)||void 0===r?void 0:r.company_name)&&void 0!==d?d:""))},w=(e,t)=>{var l;const n=null==e?void 0:e.roles.map((e=>e.slug))[0],i=(0,u.by)({role:n,profile:e});return a.createElement(m.rU,{to:i},null!==(l=null==t?void 0:t.user_id)&&void 0!==l?l:null==e?void 0:e.id)},f=(e,t)=>{var l,n,i;const r=(0,u.by)({role:"partner",profile:e});return a.createElement(m.rU,{to:r},null!==(n=null===(l=null==t?void 0:t.user)||void 0===l?void 0:l.partner_id)&&void 0!==n?n:null===(i=null==e?void 0:e.partner)||void 0===i?void 0:i.id)},B=e=>{const[t,l]=(0,a.useState)(!1);return a.createElement(s.Z,{title:n.ZP.t("Bill.Field.Preview")},a.createElement(c.Z,{icon:a.createElement(r.Z,null),size:"small",type:"ghost",loading:t,onClick:()=>{l(!0),(0,b.le)(e).then((e=>{window.open(e,"_blank"),l(!1)})).catch((()=>l(!1)))}}))},g=e=>{const[t,l]=(0,a.useState)(!1);return a.createElement(s.Z,{title:n.ZP.t("Global.Download")},a.createElement(c.Z,{size:"small",type:"ghost",loading:t,icon:a.createElement(d.Z,null),onClick:()=>{l(!0),(0,b.YN)(e).then((e=>window.open(e,"_blank"))).finally((()=>l(!1)))}}))},E=(e,t)=>{const[l,i]=(0,a.useState)(!1),r=t.id;return a.createElement(p.Z,{title:n.ZP.t("Bill.Field.RegenerationConfirmWarning"),onConfirm:()=>{i(!0),(0,b.Ov)(r).then((e=>window.open(e,"_blank"))).finally((()=>i(!1)))}},a.createElement(s.Z,{title:n.ZP.t("Bill.Field.Regenerate")},a.createElement(c.Z,{size:"small",type:"ghost",disabled:l,icon:a.createElement(o.Z,{spin:l})})))};var G=l(33996),F=l(48158),C=l(6110),S=l(12606),$=l(14206),N=l.n($),U=l(22501);const A=e=>a.createElement("span",null,Boolean(e)?(0,u.Wb)(e):" - "),V=(e,t)=>{const{setRequestUpdate:l}=(0,G.xV)();return a.createElement(F.Z,{checked:e,onClick:()=>{window.confirm((0,U.t)("Bill.IsPaidConfirmation"))&&N().put(`/bill/${null==t?void 0:t.id}/paid`).then((e=>{var t,l;C.ZP.success(null===(l=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.data)||void 0===l?void 0:l.message)})).catch((e=>{S.Z.error(null==e?void 0:e.message)})).finally((()=>{l(!0)}))}})};var T=JSON.parse('{"AW":"/billsdsdds/*"}');class R{constructor(){this.entity="/abills",this.title=[n.ZP.t("SidePanel.Bills"),n.ZP.t("SidePanel.Bills",{count:2})],this.apiService=new i.Vx("/abills","ABills"),this.UpsertComponent=(0,a.lazy)((()=>l.e(4943).then(l.bind(l,34943)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${T.AW.replace("*","")}`}],this.tableColumns=[{key:"name",dataIndex:"name",title:n.ZP.t("Global.Name"),width:400},{key:"from",dataIndex:"from",title:n.ZP.t("Global.From"),render:A},{key:"to",dataIndex:"to",title:n.ZP.t("Global.To"),render:A},{key:"hidden",dataIndex:"hidden",title:n.ZP.t("Bill.Field.Hidden"),render:h},{key:"bill_number_generated",dataIndex:"bill_number_generated",title:n.ZP.t("Bill.Field.BillNumberGenerated"),width:200},{key:"promotion_executed",dataIndex:"promotion_executed",title:n.ZP.t("Bill.Field.PromotionExecuted")},{key:"created_at",dataIndex:"created_at",title:n.ZP.t("Global.CreatedAt"),render:A},{key:"update_at",dataIndex:"updated_at",title:n.ZP.t("Global.UpdatedAt"),render:A},{key:"id",dataIndex:"id",title:n.ZP.t("Global.IsApproved"),render:(e,t)=>(e=>{const[t,l]=(0,a.useState)(!1);return a.createElement(F.Z,{checked:t||(null==e?void 0:e.is_approved),disabled:t||(null==e?void 0:e.is_approved),onClick:()=>{const t=window.confirm((0,U.t)("Bill.IsApprovedConfirmation"));l(t),t&&N().put(`/abills/${null==e?void 0:e.id}/approve`).then((e=>{var t,l;C.ZP.success(null===(l=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.data)||void 0===l?void 0:l.message)})).catch((e=>{S.Z.error(null==e?void 0:e.message)}))}})})(t),align:"center"}]}}class D{constructor(e,t,l){if(this.entity="/bills",this.title=[n.ZP.t("Bill.Title"),n.ZP.t("Bill.Title",{count:2})],this.apiService=new i.Vx("/bills","Bills"),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${T.AW.replace("*","")}`}],this.tableColumns=[{width:100,key:"user",dataIndex:"user",title:n.ZP.t("Global.UserId"),render:w},{key:"user",dataIndex:"user",className:"number",render:f,title:n.ZP.t("Bill.Field.PartnerId")},{render:y,key:"calculation_career_step_name",dataIndex:["calculationCareerStep","name"],title:n.ZP.t("Bill.Field.CalculationCareerStep")},{width:200,render:y,key:"current_career_step",title:n.ZP.t("Bill.Field.CareerStep"),dataIndex:["currentCareerStep","name"]},{render:y,key:"next_career_step",dataIndex:["nextCareerStep","name"],title:n.ZP.t("Bill.Field.NextCareerStep")},{width:200,dataIndex:"user",title:n.ZP.t("Global.User"),key:"full_name_company_name",render:k},{key:"country",dataIndex:"country",title:n.ZP.t("Global.Country"),render:Z},{key:"number",dataIndex:"number",title:n.ZP.t("Global.Number")},{key:"pay_date",dataIndex:"pay_date",title:n.ZP.t("Bill.Field.PayDate"),render:v},{key:"total_amount",dataIndex:"total_amount",title:n.ZP.t("Global.TotalAmount"),render:_},{key:"gen_1_point",render:y,dataIndex:"gen_1_point",title:n.ZP.t("Bill.Field.Gen1Point")},{render:y,key:"gen_1_to_4_point",dataIndex:"gen_1_to_4_point",title:n.ZP.t("Bill.Field.1to4GenPoint")},{key:"point",dataIndex:"point",render:y,title:n.ZP.t("Global.Point")},{key:"group_point",render:y,dataIndex:"group_point",title:n.ZP.t("Bill.Field.GroupPoint")},{key:"id",dataIndex:"id",title:n.ZP.t("Bill.Field.Preview"),render:B},{key:"id",dataIndex:"id",title:n.ZP.t("Global.Download"),render:g},{key:"regenerate_button",title:n.ZP.t("Bill.Field.Regenerate"),render:E},{key:"is_paid",align:"center",dataIndex:"is_paid",render:V,title:n.ZP.t("Global.IsPaid")}],l)this.apiService=new i.Vx(`/bills?userId=${l}`,"Bills");else if(t){let l=`/bills?abillId=${e}`;t.forEach((e=>{l+=`&countryIds[]=${e}`})),this.apiService=new i.Vx(l,"Bills")}else this.apiService=new i.Vx("/bills?abillId="+e,"Bills")}}class W{constructor(e){this.entity="/bills",this.title=[n.ZP.t("Bill.Title"),n.ZP.t("Bill.Title",{count:2})],this.apiService=new i.Vx("/bills","Bills"),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${T.AW.replace("*","")}`}],this.tableColumns=[{key:"id",dataIndex:["id","abill_id"],title:n.ZP.t("Global.ID"),render:(e,t)=>(e=>a.createElement(m.rU,{to:`/admin/bills/description/${null==e?void 0:e.abill_id}/positions/${null==e?void 0:e.id}`},null==e?void 0:e.id))(t),width:200},{width:100,key:"user",dataIndex:"user",title:n.ZP.t("Global.UserId"),render:w},{width:200,key:"career_step",render:y,title:n.ZP.t("Bill.Field.CareerStep"),dataIndex:["currentCareerStep","name"]},{width:200,key:"contactGroup",dataIndex:"contactGroup",title:n.ZP.t("Global.ContactGroup"),render:P},{key:"country",dataIndex:"country",title:n.ZP.t("Global.Country"),render:Z},{key:"factor",dataIndex:"factor",title:n.ZP.t("Bill.Field.Factor"),width:50},{key:"gender",dataIndex:"gender",title:n.ZP.t("Global.Gender")},{key:"iban",dataIndex:"iban",title:n.ZP.t("Bill.Field.IBAN")},{key:"is_paid",dataIndex:"is_paid",title:n.ZP.t("Global.IsPaid"),render:h,width:70},{key:"number",dataIndex:"number",title:n.ZP.t("Global.Number")},{key:"pay_date",dataIndex:"pay_date",title:n.ZP.t("Bill.Field.PayDate"),render:v},{key:"payment_method",dataIndex:"paymentMethod",title:n.ZP.t("Bill.Field.PaymentMethod"),render:x},{key:"swift",dataIndex:"swift",title:n.ZP.t("Bill.Field.Swift")},{key:"tax_number",dataIndex:"tax_number",title:n.ZP.t("Bill.Field.TaxNumber")},{key:"total_amount",dataIndex:"total_amount",title:n.ZP.t("Global.TotalAmount"),render:_},{key:"user",dataIndex:"user",title:n.ZP.t("Global.User"),render:k,width:200},{key:"vat",dataIndex:"vat",title:n.ZP.t("Bill.Field.Vat"),render:_},{key:"vat_percent",dataIndex:"vat_percent",title:n.ZP.t("Bill.Field.VatPercent"),render:I},{key:"id",dataIndex:"id",title:n.ZP.t("Bill.Field.Preview"),render:B}],this.apiService=new i.Vx(`/bills?userId=${e}`,"Bills")}}},54045:function(e,t,l){l(1130),l(98809),l(73857),l(68600),l(2010)},21668:function(e,t,l){l.d(t,{yv:function(){return o},le:function(){return s},YN:function(){return c},Ov:function(){return p}});var n=l(61985),i=(l(95171),l(34234)),a=l(14206),r=l.n(a),d=(l(54045),function(e,t,l,n){function i(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function r(e){try{o(n.next(e))}catch(e){a(e)}}function d(e){try{o(n.throw(e))}catch(e){a(e)}}function o(e){e.done?l(e.value):i(e.value).then(r,d)}o((n=n.apply(e,t||[])).next())}))});new i.Vx("/abills");new i.Vx("/bills");function o(e){return d(this,void 0,void 0,(function*(){try{return(yield r().post("/abills",Object.assign({},e))).data.data}catch(e){throw new Error(e)}}))}function u(e){const t=new Blob([e],{type:"application/pdf"});return URL.createObjectURL(t)}function s(e){return d(this,void 0,void 0,(function*(){try{return u((yield r().post(`/bill/${e}/abrechnung-document-preview`,{OrderDocument:{created_date:Date.now(),comment:"this abrechnung document"}},{responseType:"blob"})).data)}catch(e){throw new Error(e)}}))}function c(e){return d(this,void 0,void 0,(function*(){try{return u((yield r().get(`/bill/${e}/abrechnung-download`,{responseType:"blob"})).data)}catch(e){throw new Error(e)}}))}function p(e){return d(this,void 0,void 0,(function*(){try{const t=(yield r().get(`/bill/${e}/abrechnung-document`)).data.data.link;return n.Xb.PURE_URL+t}catch(e){throw new Error(e)}}))}}}]);