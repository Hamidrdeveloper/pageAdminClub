"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[541,5023],{79213:function(e,t,l){l.d(t,{Z:function(){return m},b:function(){return s}});var n=l(38056),r=(l(95171),l(34234)),a=l(27378),i=(l(52190),l(95699));class m{constructor(){this.entity="/number-series",this.title=[n.ZP.t("NumberSeries.Title"),n.ZP.t("NumberSeries.Title",{count:2})],this.apiService=new r.Vx(this.entity,this.title[0]),this.UpsertComponent=(0,a.lazy)((()=>l.e(5023).then(l.bind(l,25023)))),this.breadcrumbItems=[{breadcrumbName:this.title[1],path:`/admin${i.AW.replace("*","")}`}],this.detailColumns=[{key:"name",label:n.ZP.t("NumberSeries.Field.Name")},{key:"active_manual",label:n.ZP.t("NumberSeries.Field.ActiveManual")},{key:"date_order",label:n.ZP.t("NumberSeries.Field.DateOrder")}],this.tableColumns=[{key:"name",width:90,title:n.ZP.t("Global.Name"),className:"hasTile ",dataIndex:"name"},{key:"slug",width:180,title:n.ZP.t("NumberSeries.Field.Type"),dataIndex:["numberSeriesType","slug"]}]}}class s{constructor(){this.entity="/number-series-types",this.title=[n.ZP.t("NumberSeries.Field.Type"),n.ZP.t("NumberSeries.Field.Type",{count:2})],this.apiService=new r.Vx(this.entity,this.title[0])}}},25023:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var n=l(38056),r=(l(95171),l(34234)),a=l(6110),i=l(27378),m=l(56552),s=l(33996),u=l(3288),c=l(35062),o=l(10374),d=l(72961),b=l(48158),p=l(61320),E=l.n(p),g=l(60071),y=(l(52190),l(21244)),Z=l(99386),f=l(46226),h=l(31675),v=l(56591),S=l(25724),N=l(97851),P=l(28681),x=l(85273);var _={NumberSeriesContainer:l(26761).ZP.div`
  gap: 8px;
  display: flex;
  border: 1px solid #ccc;
  border-radius: 20px;
  padding: 20px;
  &:not(:last-child) {
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px dashed #ccc;
  }
`},O=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(l[n[r]]=e[n[r]])}return l};function F({name:e}){const{t:t}=(0,g.$)();return i.createElement("div",null,i.createElement(u.Z.List,{name:e},((e,{add:l,remove:n})=>i.createElement(i.Fragment,null,0===e.length?i.createElement(v.Z,{block:!0,type:"dashed",onClick:()=>l()},t("Global.CreateTitle",{title:"Number Series"})):e.map(((r,a)=>{var{key:m,name:s,fieldKey:d}=r,b=O(r,["key","name","fieldKey"]);return i.createElement(_.NumberSeriesContainer,{key:m},i.createElement("div",{style:{flex:"1"}},i.createElement(c.Z,{gutter:[16,0],style:{width:"100%"}},i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"starting_number"],fieldKey:[d,"starting_number"],label:t("NumberSeries.Field.StartingNo")}),i.createElement(S.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.StartingNo")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"ending_number"],fieldKey:[d,"ending_number"],label:t("NumberSeries.Field.EndingNo")}),i.createElement(S.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.EndingNo")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"increment_by_number"],fieldKey:[d,"increment_by_no"],label:t("NumberSeries.Field.IncrementByNo")}),i.createElement(S.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.IncrementByNo")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"warning_number"],fieldKey:[d,"warning_number"],label:t("NumberSeries.Field.WarningNo")}),i.createElement(N.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.WarningNo")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"available_from"],fieldKey:[d,"available_from"],label:t("NumberSeries.Field.AvailableFrom")}),i.createElement(P.Z,{format:(0,h._A)(),mode:"date",placeholder:t("Global.SelectPlaceholder",{title:t("NumberSeries.Field.AvailableFrom")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"last_number"],fieldKey:[d,"last_number"],label:t("NumberSeries.Field.LastNumber")}),i.createElement(S.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.LastNumber")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({rules:[{required:!0}]},b,{name:[s,"prefix"],fieldKey:[d,"prefix"],label:t("NumberSeries.Field.Prefix")}),i.createElement(N.Z,{placeholder:t("Global.InputPlaceholder",{title:t("NumberSeries.Field.Prefix")})}))),i.createElement(o.Z,{xl:12},i.createElement(u.Z.Item,Object.assign({},b,{name:[s,"company"],fieldKey:[d,"company"],label:t("NumberSeries.Field.Company")}),i.createElement(f.Z,null))),i.createElement(o.Z,{xl:12},i.createElement(c.Z,{style:{marginTop:"30px"}},i.createElement(o.Z,{xl:8},i.createElement(u.Z.Item,Object.assign({},b,{name:[s,"allow_gaps"],fieldKey:[d,"allow_gaps"],valuePropName:"checked",initialValue:!1}),i.createElement(x.default,null,t("NumberSeries.Field.AllowGaps")))),i.createElement(o.Z,{xl:8},i.createElement(u.Z.Item,Object.assign({},b,{name:[s,"is_default"],fieldKey:[d,"is_default"],valuePropName:"checked",initialValue:!1}),i.createElement(x.default,null,t("Global.IsDefault")))))))),i.createElement(c.Z,{align:"bottom"},a<1?i.createElement(c.Z,{justify:"end",gutter:8},i.createElement(o.Z,null,i.createElement(v.Z,{ghost:!0,type:"primary",icon:i.createElement(y.Z,null),onClick:()=>l(null,0)})),e.length>1&&i.createElement(o.Z,null,i.createElement(v.Z,{ghost:!0,danger:!0,type:"primary",icon:i.createElement(Z.Z,null),onClick:()=>n(s)}))):i.createElement(v.Z,{ghost:!0,danger:!0,type:"primary",icon:i.createElement(Z.Z,null),onClick:()=>n(s)})))}))))))}var I=l(79213);var j=function({value:e,onChange:t}){return i.createElement(s.LE,{module:new I.b,optionSelector:{label:"slug",value:"id"},hasNew:!1,value:e,onChange:t})};function w({onSubmit:e,isPending:t,initialValues:l}){const[n]=u.Z.useForm(),{t:r}=(0,g.$)();(0,i.useEffect)((()=>{var e,t;(null===(e=null==l?void 0:l.numberSeriesPositions)||void 0===e?void 0:e.length)&&l.numberSeriesPositions.length>0?n.setFieldsValue(Object.assign(Object.assign({},l),{numberSeriesPositions:null===(t=l.numberSeriesPositions)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{available_from:E()(e.available_from)})))})):n.setFieldsValue({numberSeriesPositions:[{prefix:"",allow_gaps:!1,is_default:!1,last_number:null,ending_number:null,warning_number:null,starting_number:null,available_from:E()(),increment_by_number:null}]})}),[l]);return i.createElement(u.Z,{form:n,layout:"vertical",onFinish:e,name:"number-series-form",initialValues:{active_manual:!1,date_order:!1,translate:[{locale:void 0,description:""}]}},i.createElement(c.Z,{gutter:[16,15]},i.createElement(o.Z,{xs:12},i.createElement(u.Z.Item,{rules:[{required:!0}],name:"numberSeriesType",label:r("Global.Type")},i.createElement(j,{onChange:e=>{n.setFieldsValue({numberSeriesType:e})}}))),i.createElement(o.Z,{xs:12},i.createElement(d.Z,{style:{marginTop:"30px"},align:"center"},i.createElement(u.Z.Item,{name:"active_manual",valuePropName:"checked"},i.createElement(b.Z,null,r("NumberSeries.Field.ActiveManual"))),i.createElement(u.Z.Item,{name:"date_order",valuePropName:"checked"},i.createElement(b.Z,null,r("NumberSeries.Field.DateOrder")))))),i.createElement(c.Z,null,i.createElement(o.Z,{xs:24},i.createElement(u.Z.Item,null,i.createElement(s.jh,null))),i.createElement(o.Z,{xs:24},i.createElement(u.Z.Item,null,i.createElement(F,{name:"numberSeriesPositions"})))),i.createElement(s.Ow,{isPending:t}))}var k=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(l[n[r]]=e[n[r]])}return l};var C=({onCallback:e,singleData:t})=>{const l=new I.Z,{mutate:s,isLoading:u}=(0,m.useMutation)((({id:e,values:t})=>e?l.apiService.updateOne(e,t):l.apiService.createOne(t)));return i.createElement(w,{initialValues:t,onSubmit:l=>{const{translate:i,numberSeriesType:m,numberSeriesPositions:u}=l,c=k(l,["translate","numberSeriesType","numberSeriesPositions"]);if(null==u?void 0:u.find((e=>e.increment_by_number>e.ending_number)))return void a.ZP.error(n.ZP.t("NumberSeries.IncOnEndingNumberError"));const o=null==u?void 0:u.map((e=>{var t;return Object.assign(Object.assign({},e),{company_id:null===(t=null==e?void 0:e.company)||void 0===t?void 0:t.id})})),d=Object.assign(Object.assign({},c),{type_id:null==m?void 0:m.id,translate:(0,r.mj)(i),numberSeriesPositions:o});s({id:t?t.id:void 0,values:d},{onSuccess:e})},isPending:u})}},52190:function(e,t,l){l(9378),l(95171)},10541:function(e,t,l){l.r(t),l.d(t,{default:function(){return E}});var n=l(27378),r=l(96740),a=l(33996),i=l(60071),m=(l(52190),l(79213));function s(){const e=new m.Z,{t:t}=(0,i.$)();return n.createElement(a.Xg,{module:e},n.createElement(a.Xg.Breadcrumb,null),n.createElement(a.Xg.Panel,null,n.createElement(a.s_.Header,{hasNew:!0,hasSearch:!0,hasDelete:!0}),n.createElement(a.s_.ListView,{tableScroll:{x:992,y:475},togglers:[{url:"date-order",title:t("NumberSeries.Field.DateOrder"),dataIndex:"date_order"},{url:"active-manual",title:t("NumberSeries.Field.ActiveManual"),dataIndex:"active_manual"}],module:e})))}var u=l(38056),c=l(53988),o=l(3487),d=l(25023),b=l(95699);var p=()=>{const e=(0,r.s0)(),{numberseries_id:t}=(0,r.UO)(),[l,i]=(0,n.useState)({}),[s,p]=(0,n.useState)(!1),E=new m.Z,g=E.title[0],y=`${b.AW.replace("*","")}`,Z=[...E.breadcrumbItems,{path:"",breadcrumbName:t?`${u.ZP.t("Global.Update")} ${g} - ${t}`:`${u.ZP.t("Global.New")} ${g}`}];(0,n.useEffect)((()=>{t&&(p(!0),E.apiService.getOne(+t).then((e=>{i(e)})).finally((()=>{p(!1)})))}),[]);return n.createElement(a.Xg,{module:E},n.createElement(a.Xg.Breadcrumb,{routes:Z}),n.createElement(a.Xg.Panel,null,n.createElement(o.j,null,n.createElement("div",{className:"header"},n.createElement(c.Z,{onClose:()=>e(`/admin${y}`),items:Z})),s?n.createElement(a.aN,null):n.createElement(d.default,{singleData:l,onCallback:()=>{e(-1)}}))))};function E(){return n.createElement(r.Z5,null,n.createElement(r.AW,{path:"",element:n.createElement(s,null)}),n.createElement(r.AW,{path:"/upsert",element:n.createElement(p,null)}),n.createElement(r.AW,{path:"/upsert/:numberseries_id",element:n.createElement(p,null)}))}},3487:function(e,t,l){l.d(t,{j:function(){return n}});const n=l(26761).ZP.div`
  padding: 32px;
  .header {
    padding-bottom: 32px;
    margin-bottom: 32px;
    border-bottom: 1px dashed #ededed;
  }
`},95699:function(e){e.exports=JSON.parse('{"AW":"/sedsdsdttings/number-series/*"}')}}]);